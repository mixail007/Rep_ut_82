
Процедура ДействияФормыОтчетСформировать(Кнопка)
	//{{КОНСТРУКТОР_ВЫХОДНЫХ_ФОРМ_ПРОЦЕДУРА_ВЫЗОВА(Отчет)
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!

	ТабДок = ЭлементыФормы.ПолеТабличногоДокумента;
	Отчет(ТабДок);

	//}}КОНСТРУКТОР_ВЫХОДНЫХ_ФОРМ_ПРОЦЕДУРА_ВЫЗОВА
КонецПроцедуры

Процедура Отчет(ТабДок) Экспорт
	//{{КОНСТРУКТОР_ВЫХОДНЫХ_ФОРМ(Отчет)
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!

	Макет = ВнешнийОтчетОбъект.ПолучитьМакет("Отчет");
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	А.Период,
	|	А.КоличествоЛегковыеА КАК КоличествоЛегковыеА,
	|	А.КоличествоЛегковыеПА КАК КоличествоЛегковыеПА,
	|	А.СуммаЛегковыеА КАК СуммаЛегковыеА,
	|	А.СуммаЛегковыеПА КАК СуммаЛегковыеПА,
	|	А.КоличествоЛегкогрузовыеА КАК КоличествоЛегкогрузовыеА,
	|	А.КоличествоЛегкогрузовыеПА КАК КоличествоЛегкогрузовыеПА,
	|	А.СуммаЛегкогрузовыеА КАК СуммаЛегкогрузовыеА,
	|	А.СуммаЛегкогрузовыеПА КАК СуммаЛегкогрузовыеПА,
	|	А.КоличествоГрузовыеА КАК КоличествоГрузовыеА,
	|	А.КоличествоГрузовыеПА КАК КоличествоГрузовыеПА,
	|	А.СуммаГрузовыеА КАК СуммаГрузовыеА,
	|	А.СуммаГрузовыеПА КАК СуммаГрузовыеПА,
	|	А.КоличествоКрупногабаритныеА КАК КоличествоКрупногабаритныеА,
	|	А.КоличествоКрупногабаритныеПА КАК КоличествоКрупногабаритныеПА,
	|	А.СуммаКрупногабаритныеА КАК СуммаКрупногабаритныеА,
	|	А.СуммаКрупногабаритныеПА КАК СуммаКрупногабаритныеПА,
	|	А.КоличествоДляПогрузчиковА КАК КоличествоДляПогрузчиковА,
	|	А.КоличествоДляПогрузчиковПА КАК КоличествоДляПогрузчиковПА,
	|	А.СуммаДляПогрузчиковА КАК СуммаДляПогрузчиковА,
	|	А.СуммаДляПогрузчиковПА КАК СуммаДляПогрузчиковПА,
	|	А.КоличествоКамерыА КАК КоличествоКамерыА,
	|	А.КоличествоКамерыПА КАК КоличествоКамерыПА,
	|	А.СуммаКамерыА КАК СуммаКамерыА,
	|	А.СуммаКамерыПА КАК СуммаКамерыПА,
	|	А.СуммаИтого КАК СуммаИтого
	|ИЗ
	|	(ВЫБРАТЬ
	|		А.Период КАК Период,
	|		А.КоличествоЛегковыеА КАК КоличествоЛегковыеА,
	|		А.КоличествоЛегковыеПА КАК КоличествоЛегковыеПА,
	|		А.КоличествоЛегковыеА * &РасценкаЛегковые КАК СуммаЛегковыеА,
	|		А.КоличествоЛегковыеПА * 2 * &РасценкаЛегковые КАК СуммаЛегковыеПА,
	|		А.КоличествоЛегкогрузовыеА КАК КоличествоЛегкогрузовыеА,
	|		А.КоличествоЛегкогрузовыеПА КАК КоличествоЛегкогрузовыеПА,
	|		А.КоличествоЛегкогрузовыеА * &Расценкалегкогрузовые КАК СуммаЛегкогрузовыеА,
	|		А.КоличествоЛегкогрузовыеПА * 2 * &Расценкалегкогрузовые КАК СуммаЛегкогрузовыеПА,
	|		А.КоличествоГрузовыеА КАК КоличествоГрузовыеА,
	|		А.КоличествоГрузовыеПА КАК КоличествоГрузовыеПА,
	|		А.КоличествоГрузовыеА * &РасценкаГрузовые КАК СуммаГрузовыеА,
	|		А.КоличествоГрузовыеПА * 2 * &РасценкаГрузовые КАК СуммаГрузовыеПА,
	|		А.КоличествоКрупногабаритныеА КАК КоличествоКрупногабаритныеА,
	|		А.КоличествоКрупногабаритныеПА КАК КоличествоКрупногабаритныеПА,
	|		А.КоличествоКрупногабаритныеА * &РасценкаКрупногабаритные КАК СуммаКрупногабаритныеА,
	|		А.КоличествоКрупногабаритныеПА * 2 * &РасценкаКрупногабаритные КАК СуммаКрупногабаритныеПА,
	|		А.КоличествоДляПогрузчиковА КАК КоличествоДляПогрузчиковА,
	|		А.КоличествоДляПогрузчиковПА КАК КоличествоДляПогрузчиковПА,
	|		А.КоличествоДляПогрузчиковА * &РасценкаДляПогрузчиков КАК СуммаДляПогрузчиковА,
	|		А.КоличествоДляПогрузчиковПА * 2 * &РасценкаДляПогрузчиков КАК СуммаДляПогрузчиковПА,
	|		А.КоличествоКамерыА КАК КоличествоКамерыА,
	|		А.КоличествоКамерыПА КАК КоличествоКамерыПА,
	|		А.КоличествоКамерыА * &РасценкаКамеры КАК СуммаКамерыА,
	|		А.КоличествоКамерыПА * 2 * &РасценкаКамеры КАК СуммаКамерыПА,
	|		А.КоличествоЛегковыеА * &РасценкаЛегковые + А.КоличествоЛегковыеПА * 2 * &РасценкаЛегковые + А.КоличествоЛегкогрузовыеА * &Расценкалегкогрузовые + А.КоличествоЛегкогрузовыеПА * 2 * &Расценкалегкогрузовые + А.КоличествоГрузовыеА * &РасценкаГрузовые + А.КоличествоГрузовыеПА * 2 * &РасценкаГрузовые + А.КоличествоКрупногабаритныеА * &РасценкаКрупногабаритные + А.КоличествоКрупногабаритныеПА * 2 * &РасценкаКрупногабаритные + А.КоличествоДляПогрузчиковА * &РасценкаДляПогрузчиков + А.КоличествоДляПогрузчиковПА * 2 * &РасценкаДляПогрузчиков + А.КоличествоКамерыА * &РасценкаКамеры + А.КоличествоКамерыПА * 2 * &РасценкаКамеры КАК СуммаИтого
	|	ИЗ
	|		(ВЫБРАТЬ
	|			А.Период КАК Период,
	|			ВЫБОР
	|				КОГДА А.КоличествоЛегковые < ЕСТЬNULL(Б.КоличествоЛегковые, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоЛегковые - ЕСТЬNULL(Б.КоличествоЛегковые, 0)
	|			КОНЕЦ КАК КоличествоЛегковыеА,
	|			ВЫБОР
	|				КОГДА А.КоличествоЛегковые < ЕСТЬNULL(Б.КоличествоЛегковые, 0)
	|					ТОГДА А.КоличествоЛегковыеП + А.КоличествоЛегковые - ЕСТЬNULL(Б.КоличествоЛегковые, 0)
	|				ИНАЧЕ А.КоличествоЛегковыеП
	|			КОНЕЦ КАК КоличествоЛегковыеПА,
	|			ВЫБОР
	|				КОГДА А.КоличествоЛегкогрузовые < ЕСТЬNULL(Б.КоличествоЛегкогрузовые, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоЛегкогрузовые - ЕСТЬNULL(Б.КоличествоЛегкогрузовые, 0)
	|			КОНЕЦ КАК КоличествоЛегкогрузовыеА,
	|			ВЫБОР
	|				КОГДА А.КоличествоЛегкогрузовые < ЕСТЬNULL(Б.КоличествоЛегкогрузовые, 0)
	|					ТОГДА А.КоличествоЛегкогрузовыеП + А.КоличествоЛегкогрузовые - ЕСТЬNULL(Б.КоличествоЛегкогрузовые, 0)
	|				ИНАЧЕ А.КоличествоЛегкогрузовыеП
	|			КОНЕЦ КАК КоличествоЛегкогрузовыеПА,
	|			ВЫБОР
	|				КОГДА А.КоличествоГрузовые < ЕСТЬNULL(Б.КоличествоГрузовые, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоГрузовые - ЕСТЬNULL(Б.КоличествоГрузовые, 0)
	|			КОНЕЦ КАК КоличествоГрузовыеА,
	|			ВЫБОР
	|				КОГДА А.КоличествоГрузовые < ЕСТЬNULL(Б.КоличествоГрузовые, 0)
	|					ТОГДА А.КоличествоГрузовыеП + А.КоличествоГрузовые - ЕСТЬNULL(Б.КоличествоГрузовые, 0)
	|				ИНАЧЕ А.КоличествоГрузовыеП
	|			КОНЕЦ КАК КоличествоГрузовыеПА,
	|			ВЫБОР
	|				КОГДА А.КоличествоКрупногабаритные < ЕСТЬNULL(Б.КоличествоКрупногабаритные, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоКрупногабаритные - ЕСТЬNULL(Б.КоличествоКрупногабаритные, 0)
	|			КОНЕЦ КАК КоличествоКрупногабаритныеА,
	|			ВЫБОР
	|				КОГДА А.КоличествоКрупногабаритные < ЕСТЬNULL(Б.КоличествоКрупногабаритные, 0)
	|					ТОГДА А.КоличествоКрупногабаритныеП + А.КоличествоКрупногабаритные - ЕСТЬNULL(Б.КоличествоКрупногабаритные, 0)
	|				ИНАЧЕ А.КоличествоКрупногабаритныеП
	|			КОНЕЦ КАК КоличествоКрупногабаритныеПА,
	|			ВЫБОР
	|				КОГДА А.КоличествоДляПогрузчиков < ЕСТЬNULL(Б.КоличествоДляПогрузчиков, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоДляПогрузчиков - ЕСТЬNULL(Б.КоличествоДляПогрузчиков, 0)
	|			КОНЕЦ КАК КоличествоДляПогрузчиковА,
	|			ВЫБОР
	|				КОГДА А.КоличествоДляПогрузчиков < ЕСТЬNULL(Б.КоличествоДляПогрузчиков, 0)
	|					ТОГДА А.КоличествоДляПогрузчиковП + А.КоличествоДляПогрузчиков - ЕСТЬNULL(Б.КоличествоДляПогрузчиков, 0)
	|				ИНАЧЕ А.КоличествоДляПогрузчиковП
	|			КОНЕЦ КАК КоличествоДляПогрузчиковПА,
	|			ВЫБОР
	|				КОГДА А.КоличествоКамеры < ЕСТЬNULL(Б.КоличествоКамеры, 0)
	|					ТОГДА 0
	|				ИНАЧЕ А.КоличествоКамеры - ЕСТЬNULL(Б.КоличествоКамеры, 0)
	|			КОНЕЦ КАК КоличествоКамерыА,
	|			ВЫБОР
	|				КОГДА А.КоличествоКамеры < ЕСТЬNULL(Б.КоличествоКамеры, 0)
	|					ТОГДА А.КоличествоКамерыП + А.КоличествоКамеры - ЕСТЬNULL(Б.КоличествоКамеры, 0)
	|				ИНАЧЕ А.КоличествоКамерыП
	|			КОНЕЦ КАК КоличествоКамерыПА
	|		ИЗ
	|			(ВЫБРАТЬ
	|				А.Период КАК Период,
	|				СУММА(А.КоличествоЛегковые) КАК КоличествоЛегковые,
	|				СУММА(А.КоличествоЛегкогрузовые) КАК КоличествоЛегкогрузовые,
	|				СУММА(А.КоличествоГрузовые) КАК КоличествоГрузовые,
	|				СУММА(А.КоличествоКрупногабаритные) КАК КоличествоКрупногабаритные,
	|				СУММА(А.КоличествоДляПогрузчиков) КАК КоличествоДляПогрузчиков,
	|				СУММА(А.КоличествоКамеры) КАК КоличествоКамеры,
	|				СУММА(А.КоличествоЛегковыеП) КАК КоличествоЛегковыеП,
	|				СУММА(А.КоличествоЛегкогрузовыеП) КАК КоличествоЛегкогрузовыеП,
	|				СУММА(А.КоличествоГрузовыеП) КАК КоличествоГрузовыеП,
	|				СУММА(А.КоличествоКрупногабаритныеП) КАК КоличествоКрупногабаритныеП,
	|				СУММА(А.КоличествоДляПогрузчиковП) КАК КоличествоДляПогрузчиковП,
	|				СУММА(А.КоличествоКамерыП) КАК КоличествоКамерыП
	|			ИЗ
	|				(ВЫБРАТЬ
	|					А.Период КАК Период,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоЛегковые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоЛегковые,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоЛегкогрузовые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоЛегкогрузовые,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоГрузовые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоГрузовые,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоКрупногабаритные
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоКрупногабаритные,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоДляПогрузчиков
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоДляПогрузчиков,
	|					ВЫБОР
	|						КОГДА (НЕ А.ПризнакПереработки)
	|							ТОГДА А.КоличествоКамеры
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоКамеры,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоЛегковые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоЛегковыеП,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоЛегкогрузовые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоЛегкогрузовыеП,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоГрузовые
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоГрузовыеП,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоКрупногабаритные
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоКрупногабаритныеП,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоДляПогрузчиков
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоДляПогрузчиковП,
	|					ВЫБОР
	|						КОГДА А.ПризнакПереработки
	|							ТОГДА А.КоличествоКамеры
	|						ИНАЧЕ 0
	|					КОНЕЦ КАК КоличествоКамерыП
	|				ИЗ
	|					(ВЫБРАТЬ
	|						А.ПризнакПереработки КАК ПризнакПереработки,
	|						А.Период КАК Период,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Легковые
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоЛегковые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ЛегкоГрузовые
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоЛегкогрузовые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ГрузовыеLingLong
	|									ИЛИ А.ПроизводительНазначение = &ГрузовыеRoadShine
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоГрузовые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Крупногабаритные
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоКрупногабаритные,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ДляПогрузчиков
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоДляПогрузчиков,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Камеры
	|								ТОГДА А.КоличествоПриход + А.КоличествоРасход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоКамеры
	|					ИЗ
	|						(ВЫБРАТЬ
	|							А.ПризнакПереработки КАК ПризнакПереработки,
	|							А.Период КАК Период,
	|							А.ПроизводительНазначение КАК ПроизводительНазначение,
	|							А.Номенклатура КАК Номенклатура,
	|							СУММА(А.КоличествоПриход) КАК КоличествоПриход,
	|							СУММА(А.КоличествоРасход) КАК КоличествоРасход
	|						ИЗ
	|							(ВЫБРАТЬ
	|								ВЫБОР
	|									КОГДА ТоварыНаОтветственномХраненииОбороты.Регистратор.ПризнакПереработки
	|											ИЛИ ДЕНЬНЕДЕЛИ(ТоварыНаОтветственномХраненииОбороты.Период) = 6
	|											ИЛИ ДЕНЬНЕДЕЛИ(ТоварыНаОтветственномХраненииОбороты.Период) = 7
	|										ТОГДА ИСТИНА
	|									ИНАЧЕ ЛОЖЬ
	|								КОНЕЦ КАК ПризнакПереработки,
	|								НАЧАЛОПЕРИОДА(ТоварыНаОтветственномХраненииОбороты.Период, ДЕНЬ) КАК Период,
	|								ЗначенияСвойствОбъектов.Значение КАК ПроизводительНазначение,
	|								ТоварыНаОтветственномХраненииОбороты.Номенклатура КАК Номенклатура,
	|								ТоварыНаОтветственномХраненииОбороты.КоличествоПриход КАК КоличествоПриход,
	|								ТоварыНаОтветственномХраненииОбороты.КоличествоРасход КАК КоличествоРасход
	|							ИЗ
	|								РегистрНакопления.ТоварыНаОтветственномХранении.Обороты(&НачДата, &КонДата, Регистратор, Контрагент = &Автошина) КАК ТоварыНаОтветственномХраненииОбороты
	|									ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	|										ЗначенияСвойствОбъектов.Объект КАК Объект,
	|										ЗначенияСвойствОбъектов.Значение КАК Значение
	|									ИЗ
	|										РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
	|									ГДЕ
	|										ЗначенияСвойствОбъектов.Свойство = &Свойство) КАК ЗначенияСвойствОбъектов
	|									ПО ТоварыНаОтветственномХраненииОбороты.Номенклатура = ЗначенияСвойствОбъектов.Объект) КАК А
	|						
	|						СГРУППИРОВАТЬ ПО
	|							А.Период,
	|							А.ПризнакПереработки,
	|							А.ПроизводительНазначение,
	|							А.Номенклатура) КАК А) КАК А) КАК А
	|			
	|			СГРУППИРОВАТЬ ПО
	|				А.Период) КАК А
	|				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	|					А.Период КАК Период,
	|					СУММА(А.КоличествоЛегковые) КАК КоличествоЛегковые,
	|					СУММА(А.КоличествоГрузовые) КАК КоличествоГрузовые,
	|					СУММА(А.КоличествоЛегкогрузовые) КАК КоличествоЛегкогрузовые,
	|					СУММА(А.КоличествоКрупногабаритные) КАК КоличествоКрупногабаритные,
	|					СУММА(А.КоличествоДляПогрузчиков) КАК КоличествоДляПогрузчиков,
	|					СУММА(А.КоличествоКамеры) КАК КоличествоКамеры
	|				ИЗ
	|					(ВЫБРАТЬ
	|						А.Период КАК Период,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Легковые
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоЛегковые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ЛегкоГрузовые
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоЛегкогрузовые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ГрузовыеLingLong
	|									ИЛИ А.ПроизводительНазначение = &ГрузовыеRoadShine
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоГрузовые,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Крупногабаритные
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоКрупногабаритные,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &ДляПогрузчиков
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоДляПогрузчиков,
	|						ВЫБОР
	|							КОГДА А.ПроизводительНазначение = &Камеры
	|								ТОГДА А.КоличествоПриход
	|							ИНАЧЕ 0
	|						КОНЕЦ КАК КоличествоКамеры
	|					ИЗ
	|						(ВЫБРАТЬ
	|							НАЧАЛОПЕРИОДА(Закупки.Период, ДЕНЬ) КАК Период,
	|							ЗначенияСвойствОбъектов.Значение КАК ПроизводительНазначение,
	|							Закупки.Номенклатура КАК Номенклатура,
	|							Закупки.КоличествоОборот КАК КоличествоПриход
	|						ИЗ
	|							РегистрНакопления.Закупки.Обороты(&НачДата, &КонДата, Регистратор, ДоговорКонтрагента.Владелец = &Автошина) КАК Закупки
	|								ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	|									ЗначенияСвойствОбъектов.Объект КАК Объект,
	|									ЗначенияСвойствОбъектов.Значение КАК Значение
	|								ИЗ
	|									РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
	|								ГДЕ
	|									ЗначенияСвойствОбъектов.Свойство = &Свойство) КАК ЗначенияСвойствОбъектов
	|								ПО Закупки.Номенклатура = ЗначенияСвойствОбъектов.Объект) КАК А) КАК А
	|				
	|				СГРУППИРОВАТЬ ПО
	|					А.Период) КАК Б
	|				ПО А.Период = Б.Период) КАК А) КАК А
	|ИТОГИ
	|	СУММА(КоличествоЛегковыеА),
	|	СУММА(КоличествоЛегковыеПА),
	|	СУММА(СуммаЛегковыеА),
	|	СУММА(СуммаЛегковыеПА),
	|	СУММА(КоличествоЛегкогрузовыеА),
	|	СУММА(КоличествоЛегкогрузовыеПА),
	|	СУММА(СуммаЛегкогрузовыеА),
	|	СУММА(СуммаЛегкогрузовыеПА),
	|	СУММА(КоличествоГрузовыеА),
	|	СУММА(КоличествоГрузовыеПА),
	|	СУММА(СуммаГрузовыеА),
	|	СУММА(СуммаГрузовыеПА),
	|	СУММА(КоличествоКрупногабаритныеА),
	|	СУММА(КоличествоКрупногабаритныеПА),
	|	СУММА(СуммаКрупногабаритныеА),
	|	СУММА(СуммаКрупногабаритныеПА),
	|	СУММА(КоличествоДляПогрузчиковА),
	|	СУММА(КоличествоДляПогрузчиковПА),
	|	СУММА(СуммаДляПогрузчиковА),
	|	СУММА(СуммаДляПогрузчиковПА),
	|	СУММА(КоличествоКамерыА),
	|	СУММА(КоличествоКамерыПА),
	|	СУММА(СуммаКамерыА),
	|	СУММА(СуммаКамерыПА),
	|	СУММА(СуммаИтого)
	|ПО
	|	ОБЩИЕ";

	Запрос.УстановитьПараметр("ГрузовыеLingLong",Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01079") );
	Запрос.УстановитьПараметр("ГрузовыеRoadShine",Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01088") );
	Запрос.УстановитьПараметр("ДляПогрузчиков", Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01331"));
	Запрос.УстановитьПараметр("Камеры", Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01354"));
	Запрос.УстановитьПараметр("Крупногабаритные", Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01349"));
	Запрос.УстановитьПараметр("Легковые", Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01347"));
	Запрос.УстановитьПараметр("ЛегкоГрузовые", Справочники.ЗначенияСвойствОбъектов.НайтиПоКоду("01330"));
	Запрос.УстановитьПараметр("РасценкаГрузовые", РасценкаГрузовые);
	Запрос.УстановитьПараметр("РасценкаДляПогрузчиков",РасценкаДляПогрузчиков );
	Запрос.УстановитьПараметр("РасценкаКамеры",РасценкаКамеры );
	Запрос.УстановитьПараметр("РасценкаКрупногабаритные",РасценкаКрупногабаритные );
	Запрос.УстановитьПараметр("РасценкаЛегковые",РасценкаЛегковые );
	Запрос.УстановитьПараметр("Расценкалегкогрузовые",Расценкалегкогрузовые );
	Запрос.УстановитьПараметр("Свойство",ПланыВидовХарактеристик.СвойстваОбъектов.НайтиПоКоду("00120") );
	Запрос.УстановитьПараметр("НачДата",НачДата );
	Запрос.УстановитьПараметр("КонДата",КонецДня(КонДата));
	Запрос.УстановитьПараметр("Автошина",Справочники.Контрагенты.НайтиПоКоду("91640"));

	Результат = Запрос.Выполнить();

	ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
	ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
	ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
	ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
	ОбластьОбщийИтог = Макет.ПолучитьОбласть("ОбщиеИтоги");
	ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");

	ТабДок.Очистить();
	ТабДок.Вывести(ОбластьЗаголовок);
	ТабДок.Вывести(ОбластьШапкаТаблицы);
	ТабДок.НачатьАвтогруппировкуСтрок();

	ВыборкаОбщийИтог = Результат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);

	ВыборкаОбщийИтог.Следующий();		// Общий итог
	ОбластьОбщийИтог.Параметры.Заполнить(ВыборкаОбщийИтог);
	ТабДок.Вывести(ОбластьОбщийИтог, ВыборкаОбщийИтог.Уровень());

	ВыборкаДетали = ВыборкаОбщийИтог.Выбрать();

	Пока ВыборкаДетали.Следующий() Цикл
		ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетали);
		ОбластьДетальныхЗаписей.Параметры.Период=Формат(ВыборкаДетали.Период,"ДФ=dd.MM.yyyy") ;
		ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетали.Уровень());
	КонецЦикла;

	ТабДок.ЗакончитьАвтогруппировкуСтрок();
	ТабДок.Вывести(ОбластьПодвалТаблицы);
	ТабДок.Вывести(ОбластьПодвал);

	//}}КОНСТРУКТОР_ВЫХОДНЫХ_ФОРМ
КонецПроцедуры

Процедура ПриОткрытии()
	РасценкаГрузовые=5;
	РасценкаДляПогрузчиков=1;
	РасценкаКамеры=0.5;
	РасценкаКрупногабаритные=30;
	РасценкаЛегковые=1;
	РасценкаЛегкогрузовые=2.50;
КонецПроцедуры

Процедура ВыбПериодНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.УстановитьПериод(НачДата, ?(КонДата='0001-01-01', КонДата, КонецДня(КонДата)));
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	Если НастройкаПериода.Редактировать() Тогда
		НачДата = НастройкаПериода.ПолучитьДатуНачала();
		КонДата = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
КонецПроцедуры
