<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema">
		<dataSource>
			<name>ИсточникДанных1</name>
			<dataSourceType>Local</dataSourceType>
		</dataSource>
		<dataSet xsi:type="DataSetQuery">
			<name>НаборДанных1</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЗатрат</dataPath>
				<field>ВидЗатрат</field>
				<role>
					<ignoreNullValues xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</ignoreNullValues>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДисконтнаяКарта</dataPath>
				<field>ДисконтнаяКарта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДоговорКонтрагента</dataPath>
				<field>ДоговорКонтрагента</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументОприходования</dataPath>
				<field>ДокументОприходования</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПродажи</dataPath>
				<field>ДокументПродажи</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДоляЗатрат</dataPath>
				<field>ДоляЗатрат</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Сумма</d5p1:content>
					</d5p1:item>
				</title>
				<appearance>
					<item xmlns="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xsi:type="dcsset:SettingsParameterValue">
						<parameter>Формат</parameter>
						<value xsi:type="xs:string">ЧДЦ=0</value>
					</item>
				</appearance>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Заказ</dataPath>
				<field>Заказ</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ЗаказПокупателя</dataPath>
				<field>ЗаказПокупателя</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Итого</dataPath>
				<field>Итого</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НоменклатурнаяГруппа</dataPath>
				<field>НоменклатурнаяГруппа</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Подразделение</dataPath>
				<field>Подразделение</field>
				<role>
					<dimension xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</dimension>
					<ignoreNullValues xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</ignoreNullValues>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Проект</dataPath>
				<field>Проект</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СтатьяЗатрат</dataPath>
				<field>СтатьяЗатрат</field>
				<role>
					<dimension xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</dimension>
					<ignoreNullValues xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</ignoreNullValues>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СтатьяЗатратУпр</dataPath>
				<field>СтатьяЗатратУпр</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ХарактеристикаНоменклатуры</dataPath>
				<field>ХарактеристикаНоменклатуры</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ИтогоНалог</dataPath>
				<field>ИтогоНалог</field>
				<appearance>
					<item xmlns="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xsi:type="dcsset:SettingsParameterValue">
						<parameter>Формат</parameter>
						<value xsi:type="xs:string">ЧДЦ=0</value>
					</item>
				</appearance>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НП</dataPath>
				<field>НП</field>
				<role>
					<ignoreNullValues xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</ignoreNullValues>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Сделка</dataPath>
				<field>Сделка</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ
	ДАТАВРЕМЯ(2017, 1, 1) КАК Период,
	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка) КАК Номенклатура,
	0 КАК Бонус
ПОМЕСТИТЬ втБонусы
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ПродажиОбороты.Период КАК ПериодРеализации,
	ПродажиОбороты.Номенклатура
ПОМЕСТИТЬ ВтПродажи
ИЗ
	РегистрНакопления.Продажи.Обороты({(&amp;Нач)}, {(&amp;Кон)}, Регистратор, ) КАК ПродажиОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	А.ПериодРеализации,
	А.Номенклатура,
	втБонусы.Бонус
ПОМЕСТИТЬ втБонусыПоНоменклатуре
ИЗ
	(ВЫБРАТЬ
		втПродажи.ПериодРеализации КАК ПериодРеализации,
		втПродажи.Номенклатура КАК Номенклатура,
		МАКСИМУМ(втБонусы.Период) КАК ПериодБонуса
	ИЗ
		ВтПродажи КАК втПродажи
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ втБонусы КАК втБонусы
			ПО втПродажи.Номенклатура = втБонусы.Номенклатура
				И втПродажи.ПериодРеализации &gt;= втБонусы.Период
	
	СГРУППИРОВАТЬ ПО
		втПродажи.ПериодРеализации,
		втПродажи.Номенклатура) КАК А
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ втБонусы КАК втБонусы
		ПО А.Номенклатура = втБонусы.Номенклатура
			И А.ПериодБонуса = втБонусы.Период
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсключенияИзРаспределенияСтатейПоНоменклатурнымГруппам.СтатьяЗатрат,
	ИсключенияИзРаспределенияСтатейПоНоменклатурнымГруппам.ПодразделениеИсточник,
	ИсключенияИзРаспределенияСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа
ПОМЕСТИТЬ Исключения
ИЗ
	РегистрСведений.ИсключенияИзРаспределенияСтатейПоНоменклатурнымГруппам КАК ИсключенияИзРаспределенияСтатейПоНоменклатурнымГруппам
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА ДеньгиВТоварныхГруппах.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ ДеньгиВТоварныхГруппах.НоменклатурнаяГруппа
	КОНЕЦ КАК НоменклатурнаяГруппа,
	СУММА(ДеньгиВТоварныхГруппах.Сумма) / РАЗНОСТЬДАТ(&amp;Началопериода, &amp;КонецПериода, ДЕНЬ) КАК Сумма
ПОМЕСТИТЬ ДеньгиВТоварныхГруппах
ИЗ
	РегистрСведений.ДеньгиВТоварныхГруппах КАК ДеньгиВТоварныхГруппах
ГДЕ
	ДеньгиВТоварныхГруппах.Сумма &gt; 0
	И ДеньгиВТоварныхГруппах.Период МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА ДеньгиВТоварныхГруппах.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ ДеньгиВТоварныхГруппах.НоменклатурнаяГруппа
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЗатратыОбороты.СтатьяЗатрат,
	ЗатратыОбороты.Подразделение КАК Подразделение,
	ЗатратыОбороты.СуммаОборот,
	МАКСИМУМ(НастройкиРаспределенияПоНоменклатурнымГруппам.Подразделение) КАК Подразделение1
ПОМЕСТИТЬ ВТ1
ИЗ
	РегистрНакопления.Затраты.Обороты(&amp;Нач, &amp;Кон, Авто, НоменклатурнаяГруппа = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.Пустаяссылка)) КАК ЗатратыОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НастройкиРаспределенияПоНоменклатурнымГруппам КАК НастройкиРаспределенияПоНоменклатурнымГруппам
		ПО ЗатратыОбороты.СтатьяЗатрат = НастройкиРаспределенияПоНоменклатурнымГруппам.СтатьяЗатрат
			И (ЗатратыОбороты.Подразделение = НастройкиРаспределенияПоНоменклатурнымГруппам.Подразделение
				ИЛИ НастройкиРаспределенияПоНоменклатурнымГруппам.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка))

СГРУППИРОВАТЬ ПО
	ЗатратыОбороты.СтатьяЗатрат,
	ЗатратыОбороты.Подразделение,
	ЗатратыОбороты.СуммаОборот
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ1.СтатьяЗатрат,
	ВТ1.Подразделение,
	ВТ1.СуммаОборот,
	ЕСТЬNULL(НастройкиРаспределенияПоНоменклатурнымГруппам.ПоЧему, "по объему") КАК ПоЧему,
	ЕСТЬNULL(НастройкиРаспределенияПоНоменклатурнымГруппам.ПоКому, "по всем пропорционально") КАК ПоКому,
	ВТ1.Подразделение1
ПОМЕСТИТЬ СпособыРаспределения
ИЗ
	ВТ1 КАК ВТ1
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НастройкиРаспределенияПоНоменклатурнымГруппам КАК НастройкиРаспределенияПоНоменклатурнымГруппам
		ПО ВТ1.СтатьяЗатрат = НастройкиРаспределенияПоНоменклатурнымГруппам.СтатьяЗатрат
			И ВТ1.Подразделение1 = НастройкиРаспределенияПоНоменклатурнымГруппам.Подразделение
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ ЕСТЬNULL(ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа, ВложенныйЗапрос.НоменклатурнаяГруппа)
	КОНЕЦ КАК НоменклатурнаяГруппа,
	СУММА(ПродажиОбороты.КоличествоОборот) КАК Количество,
	СУММА(ВЫБОР
			КОГДА ПродажиОбороты.Номенклатура.Родитель = &amp;Бонусы
				ТОГДА 0
			ИНАЧЕ ПродажиОбороты.СтоимостьОборот
		КОНЕЦ) КАК Объем,
	СУММА(ПродажиСебестоимостьОбороты.СтоимостьОборот) КАК Себестоимость,
	СРЕДНЕЕ(ВЫРАЗИТЬ(ДеньгиВТоварныхГруппах.Сумма КАК ЧИСЛО(15, 0))) КАК ДеньгиВТоварнойГруппе,
	СУММА(ВЫБОР
			КОГДА &amp;ПоНачислению
				ТОГДА ПродажиСебестоимостьОбороты.СтоимостьОборот / 1.18 * втБонусыПоНоменклатуре.Бонус / 100
			ИНАЧЕ ВЫБОР
					КОГДА ПродажиОбороты.Номенклатура.Родитель = &amp;Бонусы
						ТОГДА ПродажиОбороты.СтоимостьОборот
					ИНАЧЕ 0
				КОНЕЦ
		КОНЕЦ) КАК ПлановыйБонус
ПОМЕСТИТЬ БазаРаспределения
ИЗ
	(ВЫБРАТЬ РАЗЛИЧНЫЕ
		РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа
	ИЗ
		РегистрСведений.РаспределениеСтатейПоНоменклатурнымГруппам КАК РаспределениеСтатейПоНоменклатурнымГруппам) КАК ВложенныйЗапрос
		ПОЛНОЕ СОЕДИНЕНИЕ РегистрНакопления.Продажи.Обороты(, , Регистратор, ) КАК ПродажиОбороты
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ПродажиСебестоимость.Обороты(, , Регистратор, ) КАК ПродажиСебестоимостьОбороты
			ПО ПродажиОбороты.ХарактеристикаНоменклатуры = ПродажиСебестоимостьОбороты.ХарактеристикаНоменклатуры
				И ПродажиОбороты.Номенклатура = ПродажиСебестоимостьОбороты.Номенклатура
				И ПродажиОбороты.ЗаказПокупателя = ПродажиСебестоимостьОбороты.ЗаказПокупателя
				И ПродажиОбороты.Подразделение = ПродажиСебестоимостьОбороты.Подразделение
				И ПродажиОбороты.Регистратор = ПродажиСебестоимостьОбороты.Регистратор
			ЛЕВОЕ СОЕДИНЕНИЕ ДеньгиВТоварныхГруппах КАК ДеньгиВТоварныхГруппах
			ПО ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа = ДеньгиВТоварныхГруппах.НоменклатурнаяГруппа
			ЛЕВОЕ СОЕДИНЕНИЕ втБонусыПоНоменклатуре КАК втБонусыПоНоменклатуре
			ПО ПродажиОбороты.Номенклатура = втБонусыПоНоменклатуре.Номенклатура
				И ПродажиОбороты.Период = втБонусыПоНоменклатуре.ПериодРеализации
		ПО ВложенныйЗапрос.НоменклатурнаяГруппа = ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ ЕСТЬNULL(ПродажиОбороты.Номенклатура.НоменклатурнаяГруппа, ВложенныйЗапрос.НоменклатурнаяГруппа)
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СпособыРаспределения.СтатьяЗатрат,
	СпособыРаспределения.Подразделение,
	СпособыРаспределения.СуммаОборот,
	БазаРаспределения.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	БазаРаспределения.Количество,
	БазаРаспределения.Объем,
	СпособыРаспределения.ПоКому,
	СпособыРаспределения.ПоЧему,
	БазаРаспределения.Себестоимость,
	БазаРаспределения.ДеньгиВТоварнойГруппе
ПОМЕСТИТЬ МатрацаРаспределения
ИЗ
	СпособыРаспределения КАК СпособыРаспределения
		ПОЛНОЕ СОЕДИНЕНИЕ БазаРаспределения КАК БазаРаспределения
		ПО (ИСТИНА)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МатрацаРаспределения.СтатьяЗатрат,
	МатрацаРаспределения.Подразделение,
	МатрацаРаспределения.СуммаОборот,
	МатрацаРаспределения.НоменклатурнаяГруппа,
	МатрацаРаспределения.Количество,
	МатрацаРаспределения.Объем,
	МатрацаРаспределения.ПоКому,
	МатрацаРаспределения.ПоЧему,
	МатрацаРаспределения.Себестоимость,
	ВЫБОР
		КОГДА РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа
	КОНЕЦ КАК НоменклатурнаяГруппаПриемник,
	РаспределениеСтатейПоНоменклатурнымГруппам.ДоляГруппы,
	МатрацаРаспределения.ДеньгиВТоварнойГруппе
ПОМЕСТИТЬ МатрицаСНоменклатурнойГруппой
ИЗ
	МатрацаРаспределения КАК МатрацаРаспределения
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.РаспределениеСтатейПоНоменклатурнымГруппам КАК РаспределениеСтатейПоНоменклатурнымГруппам
		ПО МатрацаРаспределения.СтатьяЗатрат = РаспределениеСтатейПоНоменклатурнымГруппам.СтатьяЗатрат
			И МатрацаРаспределения.Подразделение = РаспределениеСтатейПоНоменклатурнымГруппам.ПодразделениеИсточник
			И (ВЫБОР
				КОГДА РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа = МатрацаРаспределения.НоменклатурнаяГруппа
			КОНЕЦ)

СГРУППИРОВАТЬ ПО
	МатрацаРаспределения.Подразделение,
	МатрацаРаспределения.СтатьяЗатрат,
	МатрацаРаспределения.НоменклатурнаяГруппа,
	МатрацаРаспределения.ПоКому,
	МатрацаРаспределения.ПоЧему,
	МатрацаРаспределения.СуммаОборот,
	МатрацаРаспределения.Количество,
	МатрацаРаспределения.Объем,
	МатрацаРаспределения.Себестоимость,
	РаспределениеСтатейПоНоменклатурнымГруппам.ДоляГруппы,
	МатрацаРаспределения.ДеньгиВТоварнойГруппе,
	ВЫБОР
		КОГДА РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ РаспределениеСтатейПоНоменклатурнымГруппам.НоменклатурнаяГруппа
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МатрицаСНоменклатурнойГруппой.СтатьяЗатрат,
	МатрицаСНоменклатурнойГруппой.Подразделение,
	МатрицаСНоменклатурнойГруппой.СуммаОборот,
	МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппа,
	МатрицаСНоменклатурнойГруппой.Количество,
	МатрицаСНоменклатурнойГруппой.Объем,
	МатрицаСНоменклатурнойГруппой.ПоКому,
	МатрицаСНоменклатурнойГруппой.ПоЧему,
	ЕСТЬNULL(МатрицаСНоменклатурнойГруппой.Объем, 0) - ЕСТЬNULL(МатрицаСНоменклатурнойГруппой.Себестоимость, 0) КАК Наценка,
	МатрицаСНоменклатурнойГруппой.ДоляГруппы,
	ВЫБОР
		КОГДА МатрицаСНоменклатурнойГруппой.ПоКому = "по выбранным группам"
			ТОГДА ВЫБОР
					КОГДА НЕ МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник ЕСТЬ NULL 
						ТОГДА ВЫБОР
								КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
									ТОГДА 1
								ИНАЧЕ 0
							КОНЕЦ
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ КАК К,
	МатрицаСНоменклатурнойГруппой.Объем * ВЫБОР
		КОГДА МатрицаСНоменклатурнойГруппой.ПоКому = "по выбранным группам"
			ТОГДА ВЫБОР
					КОГДА НЕ МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник ЕСТЬ NULL 
						ТОГДА ВЫБОР
								КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
									ТОГДА 1
								ИНАЧЕ 0
							КОНЕЦ
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ КАК БазаОбъем,
	МатрицаСНоменклатурнойГруппой.Количество * ВЫБОР
		КОГДА МатрицаСНоменклатурнойГруппой.ПоКому = "по выбранным группам"
			ТОГДА ВЫБОР
					КОГДА НЕ МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник ЕСТЬ NULL 
						ТОГДА ВЫБОР
								КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
									ТОГДА 1
								ИНАЧЕ 0
							КОНЕЦ
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ КАК БазаКоличество,
	(ЕСТЬNULL(МатрицаСНоменклатурнойГруппой.Объем, 0) - ЕСТЬNULL(МатрицаСНоменклатурнойГруппой.Себестоимость, 0)) * ВЫБОР
		КОГДА МатрицаСНоменклатурнойГруппой.ПоКому = "по выбранным группам"
			ТОГДА ВЫБОР
					КОГДА НЕ МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник ЕСТЬ NULL 
						ТОГДА ВЫБОР
								КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
									ТОГДА 1
								ИНАЧЕ 0
							КОНЕЦ
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ КАК БазаНаценка,
	МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник,
	Исключения.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа1,
	МатрицаСНоменклатурнойГруппой.ДеньгиВТоварнойГруппе,
	МатрицаСНоменклатурнойГруппой.ДеньгиВТоварнойГруппе * ВЫБОР
		КОГДА МатрицаСНоменклатурнойГруппой.ПоКому = "по выбранным группам"
			ТОГДА ВЫБОР
					КОГДА НЕ МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппаПриемник ЕСТЬ NULL 
						ТОГДА ВЫБОР
								КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
									ТОГДА 1
								ИНАЧЕ 0
							КОНЕЦ
					ИНАЧЕ 0
				КОНЕЦ
		ИНАЧЕ ВЫБОР
				КОГДА Исключения.НоменклатурнаяГруппа ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ КАК БазаДеньгиВТоварнойГруппе
ПОМЕСТИТЬ СводРаспределения
ИЗ
	МатрицаСНоменклатурнойГруппой КАК МатрицаСНоменклатурнойГруппой
		ЛЕВОЕ СОЕДИНЕНИЕ Исключения КАК Исключения
		ПО МатрицаСНоменклатурнойГруппой.СтатьяЗатрат = Исключения.СтатьяЗатрат
			И (ВЫБОР
				КОГДА Исключения.ПодразделениеИсточник = ЗНАЧЕНИЕ(Справочник.подразделения.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ МатрицаСНоменклатурнойГруппой.Подразделение = Исключения.ПодразделениеИсточник
			КОНЕЦ)
			И МатрицаСНоменклатурнойГруппой.НоменклатурнаяГруппа = Исключения.НоменклатурнаяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СводРаспределения.СтатьяЗатрат,
	СводРаспределения.Подразделение,
	СУММА(СводРаспределения.БазаОбъем) КАК БазаОбъем,
	СУММА(СводРаспределения.БазаКоличество) КАК БазаКоличество,
	СУММА(СводРаспределения.БазаНаценка) КАК БазаНаценка,
	СУММА(СводРаспределения.БазаДеньгиВТоварнойГруппе) КАК БазаДеньгиВТоварнойГруппе
ПОМЕСТИТЬ БазаРаспределенияСумма
ИЗ
	СводРаспределения КАК СводРаспределения

СГРУППИРОВАТЬ ПО
	СводРаспределения.Подразделение,
	СводРаспределения.СтатьяЗатрат
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СводРаспределения.СтатьяЗатрат,
	СводРаспределения.Подразделение,
	СУММА(СводРаспределения.БазаОбъем) КАК БазаОбъем,
	СУММА(СводРаспределения.БазаКоличество) КАК БазаКоличество,
	СУММА(СводРаспределения.БазаНаценка) КАК БазаНаценка,
	СУММА(СводРаспределения.ДеньгиВТоварнойГруппе) КАК ДеньгиВТоварнойГруппе
ПОМЕСТИТЬ БазаРаспределенияПр
ИЗ
	СводРаспределения КАК СводРаспределения
ГДЕ
	СводРаспределения.НоменклатурнаяГруппаПриемник = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.ПустаяСсылка)

СГРУППИРОВАТЬ ПО
	СводРаспределения.СтатьяЗатрат,
	СводРаспределения.Подразделение
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СУММА(-ВзаиморасчетыСКонтрагентамиОбороты.СуммаУпрРасход) КАК Сумма,
	ВзаиморасчетыСКонтрагентамиОбороты.ДоговорКонтрагента.НоменклатурнаяГруппа
ПОМЕСТИТЬ КурсовыеРазницы
ИЗ
	РегистрНакопления.ВзаиморасчетыСКонтрагентами.Обороты(, , Запись, ) КАК ВзаиморасчетыСКонтрагентамиОбороты
ГДЕ
	ВзаиморасчетыСКонтрагентамиОбороты.СуммаВзаиморасчетовПриход = 0
	И ВзаиморасчетыСКонтрагентамиОбороты.СуммаВзаиморасчетовРасход = 0

СГРУППИРОВАТЬ ПО
	ВзаиморасчетыСКонтрагентамиОбороты.ДоговорКонтрагента.НоменклатурнаяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СводРаспределения.СтатьяЗатрат,
	СводРаспределения.Подразделение,
	СводРаспределения.НоменклатурнаяГруппа,
	ВЫБОР
		КОГДА СводРаспределения.СтатьяЗатрат В (&amp;СтатьиНалогов)
				И &amp;ПоНачислению
			ТОГДА 0
		ИНАЧЕ СводРаспределения.СуммаОборот * ВЫБОР
				КОГДА СводРаспределения.ПоЧему = "по объему"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаОбъем = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Объем * СводРаспределения.К / БазаРаспределенияСумма.БазаОбъем
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по деньгам в ТГ"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.ДеньгиВТоварнойГруппе * СводРаспределения.К / БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по наценке"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаНаценка = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Наценка * СводРаспределения.К / БазаРаспределенияСумма.БазаНаценка
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по количеству"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаКоличество = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Количество * СводРаспределения.К / БазаРаспределенияСумма.БазаКоличество
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по долям"
						И СводРаспределения.НоменклатурнаяГруппаПриемник &lt;&gt; ЗНАЧЕНИЕ(Справочник.номенклатурныеГруппы.Пустаяссылка)
					ТОГДА СводРаспределения.ДоляГруппы
				КОГДА СводРаспределения.ПоЧему = "по долям"
						И СводРаспределения.НоменклатурнаяГруппаПриемник = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.Пустаяссылка)
					ТОГДА СводРаспределения.ДоляГруппы * СводРаспределения.К * (СводРаспределения.Объем / БазаРаспределенияПр.БазаОбъем)
			КОНЕЦ
	КОНЕЦ КАК ДоляЗатрат,
	ВЫБОР
		КОГДА СводРаспределения.СтатьяЗатрат В (&amp;СтатьиНалогов)
				И НЕ &amp;ПоНачислению
			ТОГДА "6. Налоги"
		ИНАЧЕ "5.Распределяемые затраты"
	КОНЕЦ КАК ВидЗатрат,
	-ВЫБОР
		КОГДА СводРаспределения.СтатьяЗатрат В (&amp;СтатьиНалогов)
				И &amp;ПоНачислению
			ТОГДА 0
		ИНАЧЕ СводРаспределения.СуммаОборот * ВЫБОР
				КОГДА СводРаспределения.ПоЧему = "по объему"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаОбъем = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Объем * СводРаспределения.К / БазаРаспределенияСумма.БазаОбъем
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по деньгам в ТГ"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.ДеньгиВТоварнойГруппе * СводРаспределения.К / БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по наценке"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаНаценка = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Наценка * СводРаспределения.К / БазаРаспределенияСумма.БазаНаценка
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по количеству"
					ТОГДА ВЫБОР
							КОГДА БазаРаспределенияСумма.БазаКоличество = 0
								ТОГДА 0
							ИНАЧЕ СводРаспределения.Количество * СводРаспределения.К / БазаРаспределенияСумма.БазаКоличество
						КОНЕЦ
				КОГДА СводРаспределения.ПоЧему = "по долям"
						И СводРаспределения.НоменклатурнаяГруппаПриемник &lt;&gt; ЗНАЧЕНИЕ(Справочник.номенклатурныеГруппы.Пустаяссылка)
					ТОГДА СводРаспределения.ДоляГруппы
				КОГДА СводРаспределения.ПоЧему = "по долям"
						И СводРаспределения.НоменклатурнаяГруппаПриемник = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.Пустаяссылка)
					ТОГДА СводРаспределения.ДоляГруппы * СводРаспределения.К * (СводРаспределения.Объем / БазаРаспределенияПр.БазаОбъем)
			КОНЕЦ
	КОНЕЦ КАК Итого,
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА -ВЫБОР
					КОГДА СводРаспределения.СтатьяЗатрат В (&amp;СтатьиНалогов)
							И &amp;ПоНачислению
						ТОГДА 0
					ИНАЧЕ СводРаспределения.СуммаОборот * ВЫБОР
							КОГДА СводРаспределения.ПоЧему = "по объему"
								ТОГДА ВЫБОР
										КОГДА БазаРаспределенияСумма.БазаОбъем = 0
											ТОГДА 0
										ИНАЧЕ СводРаспределения.Объем * СводРаспределения.К / БазаРаспределенияСумма.БазаОбъем
									КОНЕЦ
							КОГДА СводРаспределения.ПоЧему = "по деньгам в ТГ"
								ТОГДА ВЫБОР
										КОГДА БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе = 0
											ТОГДА 0
										ИНАЧЕ СводРаспределения.ДеньгиВТоварнойГруппе * СводРаспределения.К / БазаРаспределенияСумма.БазаДеньгиВТоварнойГруппе
									КОНЕЦ
							КОГДА СводРаспределения.ПоЧему = "по наценке"
								ТОГДА ВЫБОР
										КОГДА БазаРаспределенияСумма.БазаНаценка = 0
											ТОГДА 0
										ИНАЧЕ СводРаспределения.Наценка * СводРаспределения.К / БазаРаспределенияСумма.БазаНаценка
									КОНЕЦ
							КОГДА СводРаспределения.ПоЧему = "по количеству"
								ТОГДА ВЫБОР
										КОГДА БазаРаспределенияСумма.БазаКоличество = 0
											ТОГДА 0
										ИНАЧЕ СводРаспределения.Количество * СводРаспределения.К / БазаРаспределенияСумма.БазаКоличество
									КОНЕЦ
							КОГДА СводРаспределения.ПоЧему = "по долям"
									И СводРаспределения.НоменклатурнаяГруппаПриемник &lt;&gt; ЗНАЧЕНИЕ(Справочник.номенклатурныеГруппы.Пустаяссылка)
								ТОГДА СводРаспределения.ДоляГруппы
							КОГДА СводРаспределения.ПоЧему = "по долям"
									И СводРаспределения.НоменклатурнаяГруппаПриемник = ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.Пустаяссылка)
								ТОГДА СводРаспределения.ДоляГруппы * СводРаспределения.К * (СводРаспределения.Объем / БазаРаспределенияПр.БазаОбъем)
						КОНЕЦ
				КОНЕЦ * 0.8
		ИНАЧЕ 0
	КОНЕЦ КАК ИтогоНалог,
	"С учетом налога на прибыль" КАК НП
ИЗ
	СводРаспределения КАК СводРаспределения
		ЛЕВОЕ СОЕДИНЕНИЕ БазаРаспределенияСумма КАК БазаРаспределенияСумма
		ПО СводРаспределения.СтатьяЗатрат = БазаРаспределенияСумма.СтатьяЗатрат
			И СводРаспределения.Подразделение = БазаРаспределенияСумма.Подразделение
		ЛЕВОЕ СОЕДИНЕНИЕ БазаРаспределенияПр КАК БазаРаспределенияПр
		ПО СводРаспределения.СтатьяЗатрат = БазаРаспределенияПр.СтатьяЗатрат
			И СводРаспределения.Подразделение = БазаРаспределенияПр.Подразделение

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ЗатратыОбороты.СтатьяЗатрат,
	ЗатратыОбороты.Подразделение,
	ВЫБОР
		КОГДА ЗатратыОбороты.НоменклатурнаяГруппа.Родитель = &amp;ГруппаАксы
			ТОГДА &amp;Аксы
		ИНАЧЕ ЗатратыОбороты.НоменклатурнаяГруппа
	КОНЕЦ,
	ЗатратыОбороты.СуммаОборот,
	"4.Затраты номенклатурной группы",
	-ЗатратыОбороты.СуммаОборот,
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА -ЗатратыОбороты.СуммаОборот * 0.8
		ИНАЧЕ 0
	КОНЕЦ,
	"С учетом налога на прибыль"
ИЗ
	РегистрНакопления.Затраты.Обороты(, , , НоменклатурнаяГруппа &lt;&gt; ЗНАЧЕНИЕ(справочник.НоменклатурныеГруппы.ПустаяСсылка)) КАК ЗатратыОбороты

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	NULL,
	NULL,
	БазаРаспределения.НоменклатурнаяГруппа,
	СУММА(БазаРаспределения.Объем),
	"1. Сумма продаж",
	NULL,
	NULL,
	NULL
ИЗ
	БазаРаспределения КАК БазаРаспределения

СГРУППИРОВАТЬ ПО
	БазаРаспределения.НоменклатурнаяГруппа

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	NULL,
	NULL,
	БазаРаспределения.НоменклатурнаяГруппа,
	СУММА(БазаРаспределения.Себестоимость),
	"2. Сумма себестоимости",
	NULL,
	NULL,
	NULL
ИЗ
	БазаРаспределения КАК БазаРаспределения

СГРУППИРОВАТЬ ПО
	БазаРаспределения.НоменклатурнаяГруппа

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	NULL,
	NULL,
	БазаРаспределения.НоменклатурнаяГруппа,
	СУММА(ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)),
	"3. Валовая прибыль",
	СУММА(ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)),
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА (ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)) * 0.8
		ИНАЧЕ 0
	КОНЕЦ,
	"С учетом налога на прибыль"
ИЗ
	БазаРаспределения КАК БазаРаспределения

СГРУППИРОВАТЬ ПО
	БазаРаспределения.НоменклатурнаяГруппа,
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА (ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)) * 0.8
		ИНАЧЕ 0
	КОНЕЦ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;поначислению
			ТОГДА &amp;ндс
		ИНАЧЕ NULL
	КОНЕЦ,
	NULL,
	БазаРаспределения.НоменклатурнаяГруппа,
	ВЫБОР
		КОГДА &amp;поначислению
			ТОГДА (ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)) / 118 * 18
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА &amp;поначислению
			ТОГДА "6. Налоги"
		ИНАЧЕ NULL
	КОНЕЦ,
	-ВЫБОР
		КОГДА &amp;поначислению
			ТОГДА (ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)) / 118 * 18
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА &amp;поначислению
			ТОГДА -(ЕСТЬNULL(БазаРаспределения.Объем, 0) - ЕСТЬNULL(БазаРаспределения.Себестоимость, 0)) / 118 * 18 * 0.8
		ИНАЧЕ 0
	КОНЕЦ,
	"С учетом налога на прибыль"
ИЗ
	БазаРаспределения КАК БазаРаспределения

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	NULL,
	NULL,
	БазаРаспределения.НоменклатурнаяГруппа,
	БазаРаспределения.ПлановыйБонус,
	"3.1. Бонусы",
	БазаРаспределения.ПлановыйБонус,
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА ЕСТЬNULL(БазаРаспределения.ПлановыйБонус, 0) * 0.8
		ИНАЧЕ 0
	КОНЕЦ,
	"С учетом налога на прибыль"
ИЗ
	БазаРаспределения КАК БазаРаспределения

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	NULL,
	NULL,
	КурсовыеРазницы.ДоговорКонтрагентаНоменклатурнаяГруппа,
	КурсовыеРазницы.Сумма,
	"3.2. Курсовые Разницы",
	КурсовыеРазницы.Сумма,
	ВЫБОР
		КОГДА &amp;ПоНачислению
			ТОГДА ЕСТЬNULL(КурсовыеРазницы.Сумма, 0)
		ИНАЧЕ 0
	КОНЕЦ,
	"С учетом налога на прибыль"
ИЗ
	КурсовыеРазницы КАК КурсовыеРазницы</query>
		</dataSet>
		<totalField>
			<dataPath>ДоляЗатрат</dataPath>
			<expression>Сумма(ДоляЗатрат)</expression>
		</totalField>
		<totalField>
			<dataPath>Итого</dataPath>
			<expression>Сумма(Итого)</expression>
		</totalField>
		<totalField>
			<dataPath>ИтогоНалог</dataPath>
			<expression>Сумма(ИтогоНалог)</expression>
		</totalField>
		<parameter>
			<name>НачалоПериода</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Начало периода</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<parameter>
			<name>КонецПериода</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Конец периода</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<parameter>
			<name>СтатьиНалогов</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Статьи налогов</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтатьиЗатрат</Type>
			</valueType>
			<useRestriction>true</useRestriction>
			<valueListAllowed>true</valueListAllowed>
		</parameter>
		<parameter>
			<name>Кон</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Кон</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>Нач</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Нач</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>ПоНачислению</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>По начислению</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:boolean</Type>
			</valueType>
			<value xsi:type="xs:boolean">false</value>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>ндс</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Ндс</d4p1:content>
				</d4p1:item>
			</title>
			<value xsi:nil="true"/>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>Аксы</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Аксы</d4p1:content>
				</d4p1:item>
			</title>
			<value xsi:nil="true"/>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>ГруппаАксы</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Группа аксы</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.НоменклатурныеГруппы</Type>
			</valueType>
			<value xsi:nil="true"/>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>Бонусы</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Бонусы</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</Type>
			</valueType>
			<value xsi:nil="true"/>
			<useRestriction>true</useRestriction>
		</parameter>
		<settingsVariant>
			<name xmlns="http://v8.1c.ru/8.1/data-composition-system/settings">Основной</name>
			<presentation xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xsi:type="xs:string">Основной</presentation>
		</settingsVariant>
	</dataCompositionSchema>
</SchemaFile>﻿<?xml version="1.0" encoding="UTF-8"?>
<Settings xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<conditionalAppearance>
		<item>
			<selection>
				<item>
					<field>НоменклатурнаяГруппа</field>
				</item>
			</selection>
			<filter/>
			<appearance>
				<dcscor:item xsi:type="SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</item>
	</conditionalAppearance>
	<item xsi:type="StructureItemTable">
		<column>
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>НоменклатурнаяГруппа</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
				<item xsi:type="SelectedItemField">
					<field>ДоляЗатрат</field>
				</item>
			</selection>
		</column>
		<row>
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>ВидЗатрат</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
				<item xsi:type="SelectedItemField">
					<field>ДоляЗатрат</field>
				</item>
			</selection>
			<item>
				<groupItems>
					<item xsi:type="GroupItemField">
						<field>СтатьяЗатрат</field>
						<groupType>Items</groupType>
						<periodAdditionType>None</periodAdditionType>
						<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
						<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
					</item>
				</groupItems>
				<order>
					<item xsi:type="OrderItemAuto"/>
				</order>
				<selection>
					<item xsi:type="SelectedItemAuto"/>
					<item xsi:type="SelectedItemField">
						<field>ДоляЗатрат</field>
					</item>
				</selection>
				<item>
					<groupItems>
						<item xsi:type="GroupItemField">
							<field>Подразделение</field>
							<groupType>Items</groupType>
							<periodAdditionType>None</periodAdditionType>
							<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
							<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
						</item>
					</groupItems>
					<order>
						<item xsi:type="OrderItemAuto"/>
					</order>
					<selection>
						<item xsi:type="SelectedItemAuto"/>
					</selection>
				</item>
			</item>
		</row>
		<row>
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>НП</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
				<item xsi:type="SelectedItemField">
					<field>ДоляЗатрат</field>
				</item>
			</selection>
		</row>
	</item>
	<item xsi:type="StructureItemTable">
		<use>false</use>
		<column>
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>НоменклатурнаяГруппа.ВидТовара</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
				<item xsi:type="SelectedItemField">
					<field>ДоляЗатрат</field>
				</item>
			</selection>
			<item>
				<groupItems>
					<item xsi:type="GroupItemField">
						<field>НоменклатурнаяГруппа</field>
						<groupType>Items</groupType>
						<periodAdditionType>None</periodAdditionType>
						<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
						<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
					</item>
				</groupItems>
				<order>
					<item xsi:type="OrderItemAuto"/>
				</order>
				<selection>
					<item xsi:type="SelectedItemAuto"/>
					<item xsi:type="SelectedItemField">
						<field>ДоляЗатрат</field>
					</item>
				</selection>
				<conditionalAppearance>
					<item>
						<selection>
							<item>
								<field>НоменклатурнаяГруппа</field>
							</item>
						</selection>
						<filter/>
						<appearance>
							<dcscor:item xsi:type="SettingsParameterValue">
								<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
								<dcscor:value xsi:type="xs:decimal">20</dcscor:value>
							</dcscor:item>
						</appearance>
					</item>
				</conditionalAppearance>
			</item>
		</column>
		<row>
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>ВидЗатрат</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
				<item xsi:type="SelectedItemField">
					<field>ДоляЗатрат</field>
				</item>
			</selection>
			<item>
				<groupItems>
					<item xsi:type="GroupItemField">
						<field>СтатьяЗатрат</field>
						<groupType>Items</groupType>
						<periodAdditionType>None</periodAdditionType>
						<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
						<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
					</item>
				</groupItems>
				<order>
					<item xsi:type="OrderItemAuto"/>
				</order>
				<selection>
					<item xsi:type="SelectedItemAuto"/>
				</selection>
				<item>
					<groupItems>
						<item xsi:type="GroupItemField">
							<field>Подразделение</field>
							<groupType>Items</groupType>
							<periodAdditionType>None</periodAdditionType>
							<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
							<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
						</item>
					</groupItems>
					<order>
						<item xsi:type="OrderItemAuto"/>
					</order>
					<selection>
						<item xsi:type="SelectedItemAuto"/>
					</selection>
				</item>
			</item>
		</row>
	</item>
</Settings>﻿<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema">
		<template>
			<name>Макет1</name>
			<template xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:AreaTemplate">
				<dcsat:item xsi:type="dcsat:TableRow">
					<dcsat:tableCell>
						<dcsat:item xsi:type="dcsat:Field">
							<dcsat:value xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xsi:type="dcscor:Parameter">ДоляЗатрат</dcsat:value>
						</dcsat:item>
						<dcsat:appIndex>0</dcsat:appIndex>
					</dcsat:tableCell>
				</dcsat:item>
			</template>
			<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:ExpressionAreaTemplateParameter">
				<dcsat:name>ДоляЗатрат</dcsat:name>
				<dcsat:expression>Формат(Итого,"ЧДЦ=0")</dcsat:expression>
			</parameter>
		</template>
		<template>
			<name>Макет2</name>
			<template xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:AreaTemplate">
				<dcsat:item xsi:type="dcsat:TableRow">
					<dcsat:tableCell>
						<dcsat:item xsi:type="dcsat:Field">
							<dcsat:value xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xsi:type="dcscor:Parameter">ДоляЗатрат</dcsat:value>
						</dcsat:item>
						<dcsat:appIndex>0</dcsat:appIndex>
					</dcsat:tableCell>
				</dcsat:item>
			</template>
			<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:ExpressionAreaTemplateParameter">
				<dcsat:name>ДоляЗатрат</dcsat:name>
				<dcsat:expression>выбор когда итогоНалог&gt;0 тогда Формат(ИтогоНалог,"ЧДЦ=0") иначе Формат(Итого,"ЧДЦ=0")  конец</dcsat:expression>
			</parameter>
		</template>
		<totalFieldsTemplate>
			<groupField1>ВидЗатрат</groupField1>
			<templateType1>OverallHeader</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>Header</templateType2>
			<template>Макет1</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>ВидЗатрат</groupField1>
			<templateType1>OverallHeader</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>OverallHeader</templateType2>
			<template>Макет1</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>НоменклатурнаяГруппа.ВидТовара</groupField1>
			<templateType1>Header</templateType1>
			<groupField2>ВидЗатрат</groupField2>
			<templateType2>OverallHeader</templateType2>
			<template>Макет1</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>ВидЗатрат</groupField1>
			<templateType1>OverallFooter</templateType1>
			<groupField2>НоменклатурнаяГруппа.ВидТовара</groupField2>
			<templateType2>OverallHeader</templateType2>
			<template>Макет1</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>НП</groupField1>
			<templateType1>Header</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>Header</templateType2>
			<template>Макет2</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>НП</groupField1>
			<templateType1>OverallHeader</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>Header</templateType2>
			<template>Макет2</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>НП</groupField1>
			<templateType1>Header</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>OverallHeader</templateType2>
			<template>Макет2</template>
		</totalFieldsTemplate>
		<totalFieldsTemplate>
			<groupField1>НП</groupField1>
			<templateType1>OverallHeader</templateType1>
			<groupField2>НоменклатурнаяГруппа</groupField2>
			<templateType2>OverallHeader</templateType2>
			<template>Макет2</template>
		</totalFieldsTemplate>
	</dataCompositionSchema>
	<appearance xmlns="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="TableCellAppearance">
		<item xmlns="http://v8.1c.ru/8.1/data-composition-system/core">
			<parameter>ГоризонтальноеПоложение</parameter>
			<value xmlns:d4p1="http://v8.1c.ru/8.1/data/ui" xsi:type="d4p1:HorizontalAlign">Right</value>
		</item>
	</appearance>
</SchemaFile>