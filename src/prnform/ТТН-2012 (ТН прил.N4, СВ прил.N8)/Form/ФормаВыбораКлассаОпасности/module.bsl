
Процедура КнопкаВыполнитьНажатие(Кнопка)
	Если ЭлементыФормы.ГруппыТоваров.ТекущиеДанные <> Неопределено
		И ЭлементыФормы.ГруппыТоваров.ТекущиеДанные.Родитель <> Неопределено
	Тогда
		Закрыть(ЭлементыФормы.ГруппыТоваров.ТекущиеДанные.Группа);
	КонецЕсли;
КонецПроцедуры

Процедура ПриОткрытии()
	
	ЗаполнитьТабл();
	
КонецПроцедуры // ПриОткрытии()

процедура ЗаполнитьТабл()
		Если ГруппыТоваров.Строки.Количество() = 0 Тогда
		КлассификаторЕТСНГ = ПолучитьМакет("ДОПОГ");
		СтрокаГруппы = Неопределено;
		Для итератор = 1 По КлассификаторЕТСНГ.ВысотаТаблицы Цикл
			
			   Класс1 = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 1, итератор, 1).ТекущаяОбласть.Текст);
			Значение1 = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 2, итератор, 2).ТекущаяОбласть.Текст);
		   ЭтоГруппа1 = Булево(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 3, итератор, 3).ТекущаяОбласть.Текст);
//-------------группы 2х уровней-------------------------------------------------------------------------------										
			Если ЭтоГруппа1 Тогда
				
				СтрокаГруппы = ГруппыТоваров.Строки.Добавить();
				СтрокаГруппы.Группа = Класс1+" - "+Значение1;
				СтрокаГруппы.Класс  = Класс1;
			Иначе //------------------- не группа, а строка-----------------------
				Если СтрокаГруппы = Неопределено Тогда
					ДетальнаяСтрока = ГруппыТоваров.Строки.Добавить();
				иначе
					ДетальнаяСтрока = СтрокаГруппы.Строки.Добавить();
				КонецЕсли;
				ДетальнаяСтрока.Группа = Класс1+" - "+Значение1;
				ДетальнаяСтрока.Класс  = Класс1;
				КонецЕсли;
//--------------------------------------------------------------------------------------------------------------			
		КонецЦикла;

	КонецЕсли;
КонецПроцедуры	

Процедура ГруппыТоваровВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	Закрыть(ВыбраннаяСтрока.Класс);
КонецПроцедуры // ГруппыТоваровВыбор()

Процедура КоманднаяПанель1Заполнить(Кнопка)
	ЗаполнитьТабл();
КонецПроцедуры

Процедура ГруппыТоваровПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	Если ДанныеСтроки.Родитель=Неопределено Тогда
		                          //Новый Шрифт(<Шрифт>, <Имя шрифта>, <Размер>, <Жирный>, <Наклонный>, <Подчеркнутый>, <Зачеркнутый>) 
		шрифтВыделения = новый Шрифт(ОформлениеСтроки.Шрифт,         ,         ,  Истина,             ,               ,              );
		ОформлениеСтроки.Шрифт  = шрифтВыделения;
		//ОформлениеСтроки.ЦветТекста  = WebЦвета.Синий;
	конецЕсли;
КонецПроцедуры
