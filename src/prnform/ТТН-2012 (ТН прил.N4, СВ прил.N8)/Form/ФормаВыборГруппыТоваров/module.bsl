
Процедура КнопкаВыполнитьНажатие(Кнопка)
	Если ЭлементыФормы.ГруппыТоваров.ТекущиеДанные <> Неопределено
		И ЭлементыФормы.ГруппыТоваров.ТекущиеДанные.Родитель <> Неопределено
	Тогда
		Закрыть(ЭлементыФормы.ГруппыТоваров.ТекущиеДанные.Группа);
	КонецЕсли;
КонецПроцедуры

Процедура ПриОткрытии()
	
	ЗаполнитьТабл();
	
КонецПроцедуры // ПриОткрытии()

процедура ЗаполнитьТабл()
		Если ГруппыТоваров.Строки.Количество() = 0 Тогда
		КлассификаторЕТСНГ = ПолучитьМакет("ЕТСНГ");
		СтрокаГруппы = Неопределено;
		СтрокаГруппы1 = Неопределено;
		Для итератор = 1 По КлассификаторЕТСНГ.ВысотаТаблицы Цикл
			
			     Код1 = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 1, итератор, 1).ТекущаяОбласть.Текст);
			Значение1 = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 2, итератор, 2).ТекущаяОбласть.Текст);
		   ЭтоГруппа1 = Булево(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 3, итератор, 3).ТекущаяОбласть.Текст);
		 	Класс1    = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 4, итератор, 4).ТекущаяОбласть.Текст); 
			МВН1      = СокрЛП(КлассификаторЕТСНГ.ПолучитьОбласть(итератор, 5, итератор, 5).ТекущаяОбласть.Текст);
//-------------группы 2х уровней-------------------------------------------------------------------------------										
			Если ЭтоГруппа1 Тогда
				// 50 - 60  или 69
				Если Найти(Код1,"-")>0 или (стрДлина(СокрЛП(Код1))<6) тогда  
				СтрокаГруппы1 = ГруппыТоваров.Строки.Добавить();
					СтрокаГруппы1.Код = Код1;
					СтрокаГруппы1.Группа = Значение1;
				иначе //создаем папки
					Если СтрокаГруппы1=неопределено тогда
						СтрокаГруппы = ГруппыТоваров.Строки.Добавить();
                    иначе
						СтрокаГруппы = СтрокаГруппы1.Строки.Добавить();
					КонецЕсли;	
				СтрокаГруппы.Код = Код1;
				СтрокаГруппы.Группа = Значение1;
				СтрокаГруппы.Класс  = Класс1;
				конецЕсли;
			
			Иначе //------------------- не группа, а строка-----------------------
				Если СтрокаГруппы1 = Неопределено Тогда
					ДетальнаяСтрока = СтрокаГруппы.Строки.Добавить();
				иначеЕсли СтрокаГруппы = Неопределено Тогда
					ДетальнаяСтрока = СтрокаГруппы1.Строки.Добавить();
				иначе
					ДетальнаяСтрока = СтрокаГруппы.Строки.Добавить();
				КонецЕсли;
				ДетальнаяСтрока.Код = Код1;
				ДетальнаяСтрока.Группа = Значение1;
				ДетальнаяСтрока.Класс  = Класс1;
				ДетальнаяСтрока.МВН    = МВН1;
			КонецЕсли;
//--------------------------------------------------------------------------------------------------------------			
		КонецЦикла;

	КонецЕсли;
КонецПроцедуры	

Процедура ГруппыТоваровВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	Если ВыбраннаяСтрока.Родитель = Неопределено Тогда
		Предупреждение("         Раздел - выбрать нельзя!
					   |Откройте раздел(+) и выберите нужный пункт...",20);
		возврат;
	КонецЕсли;
	Закрыть(ВыбраннаяСтрока.Код+" - "+ВыбраннаяСтрока.Группа);
КонецПроцедуры // ГруппыТоваровВыбор()

Процедура КоманднаяПанель1Заполнить(Кнопка)
	ЗаполнитьТабл();
КонецПроцедуры

Процедура ГруппыТоваровПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	Если ДанныеСтроки.Родитель=Неопределено Тогда
		                          //Новый Шрифт(<Шрифт>, <Имя шрифта>, <Размер>, <Жирный>, <Наклонный>, <Подчеркнутый>, <Зачеркнутый>) 
		шрифтВыделения = новый Шрифт(ОформлениеСтроки.Шрифт,         ,         ,  Истина,             ,               ,              );
		ОформлениеСтроки.Шрифт  = шрифтВыделения;
		//ОформлениеСтроки.ЦветТекста  = WebЦвета.Синий;
	конецЕсли;
КонецПроцедуры
