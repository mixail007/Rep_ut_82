
Процедура ВыбПериодНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(ДатаНач, ?(ДатаКон='0001-01-01', ДатаКон, КонецДня(ДатаКон)));
	Если НастройкаПериода.Редактировать() Тогда
		ДатаНач = НастройкаПериода.ПолучитьДатуНачала();
		ДатаКон = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
	
Параметр1 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач"));
Параметр1.Значение = ДатаНач;
Параметр2 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон"));
Параметр2.Значение = КонецДня(ДатаКон);
	
Параметр11 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач1"));
Параметр11.Значение = ДобавитьМесяц(ДатаНач,-12);
Параметр22 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон1"));
Параметр22.Значение = КонецДня(ДобавитьМесяц(ДатаКон,-12));
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	ДатаНач = ДобавитьМесяц( НачалоМесяца( ТекущаяДата()), -1);
	ДатаКон = НачалоМесяца( ТекущаяДата() )-1;
	
Параметр1 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач"));
Параметр1.Значение = ДатаНач;
Параметр2 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон"));
Параметр2.Значение = КонецДня(ДатаКон);
	
Параметр11 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач1"));
Параметр11.Значение = ДобавитьМесяц(ДатаНач,-12);
Параметр22 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон1"));
Параметр22.Значение = КонецДня(ДобавитьМесяц(ДатаКон,-12));
	
КонецПроцедуры

Процедура ДатаНачПриИзменении(Элемент)
Параметр1 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач"));
Параметр1.Значение = ДатаНач;
Параметр11 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНач1"));
Параметр11.Значение = ДобавитьМесяц(ДатаНач,-12);
КонецПроцедуры

Процедура ДатаКонПриИзменении(Элемент)
Параметр2 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон"));
Параметр2.Значение = КонецДня(ДатаКон);
Параметр22 = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаКон1"));
Параметр22.Значение = КонецДня(ДобавитьМесяц(ДатаКон,-12));
КонецПроцедуры
