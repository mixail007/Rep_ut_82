<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema">
		<dataSource>
			<name>ИсточникДанных1</name>
			<dataSourceType>Local</dataSourceType>
		</dataSource>
		<dataSet xsi:type="DataSetQuery">
			<name>ЗапросКомплектующие</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДискиОстаток</dataPath>
				<field>ДискиОстаток</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Итого по дискам: (на складе + в заказах)</d5p1:content>
					</d5p1:item>
				</title>
				<valueType>
					<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:decimal</Type>
					<NumberQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
						<Digits>10</Digits>
						<FractionDigits>0</FractionDigits>
						<AllowedSign>Any</AllowedSign>
					</NumberQualifiers>
				</valueType>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Качество</dataPath>
				<field>Качество</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Качество</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоВЗаказ</dataPath>
				<field>КоличествоВЗаказ</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>В Заказ</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КрышкаОстаток</dataPath>
				<field>КрышкаОстаток</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Остаток по крышкам</d5p1:content>
					</d5p1:item>
				</title>
				<valueType>
					<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:decimal</Type>
					<NumberQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
						<Digits>10</Digits>
						<FractionDigits>0</FractionDigits>
						<AllowedSign>Any</AllowedSign>
					</NumberQualifiers>
				</valueType>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Диск</d5p1:content>
					</d5p1:item>
				</title>
				<role>
					<dimension xmlns="http://v8.1c.ru/8.1/data-composition-system/common">true</dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СерияНоменклатуры</dataPath>
				<field>СерияНоменклатуры</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Серия номенклатуры</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Склад</dataPath>
				<field>Склад</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Склад</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ХарактеристикаНоменклатуры</dataPath>
				<field>ХарактеристикаНоменклатуры</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Характеристика номенклатуры</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НоменклатураКод</dataPath>
				<field>НоменклатураКод</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Код диска</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Крышка</dataPath>
				<field>Крышка</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Крышка</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОсновнойПоставщик</dataPath>
				<field>ОсновнойПоставщик</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Основной поставщик</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПроизводственнаяПлощадка</dataPath>
				<field>ПроизводственнаяПлощадка</field>
				<title xmlns:d5p1="http://v8.1c.ru/8.1/data/core" xsi:type="d5p1:LocalStringType">
					<d5p1:item>
						<d5p1:lang>ru</d5p1:lang>
						<d5p1:content>Производственная площадка</d5p1:content>
					</d5p1:item>
				</title>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ
	А.Номенклатура.Код,
	А.Номенклатура,
	СУММА(А.НоменклатураОстаток) КАК ДискиОстаток,
	ТоварыНаСкладахОстатки.КоличествоОстаток КАК КрышкаОстаток,
	0 КАК КоличествоВЗаказ,
	А.Номенклатура.ОсновнойПоставщик КАК ОсновнойПоставщик,
	А.Номенклатура.АртикулСокр КАК ПроизводственнаяПлощадка,
	А.Крышка
ИЗ
	(ВЫБРАТЬ
		ОстаткиПоДискам.Номенклатура КАК Номенклатура,
		СУММА(ОстаткиПоДискам.КоличествоОстаток) КАК НоменклатураОстаток,
		ОстаткиПоДискам.Номенклатура.Код КАК НоменклатураКод,
		КомплектующиеНоменклатуры.Комплектующая КАК Крышка
	ИЗ
		(ВЫБРАТЬ
			ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
			ТоварыНаСкладахОстатки.КоличествоОстаток КАК КоличествоОстаток
		ИЗ
			РегистрНакопления.ТоварыНаСкладах.Остатки(, Номенклатура.Производитель В (&amp;СписокПроизводителей)) КАК ТоварыНаСкладахОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ЗаказПоставщикуСезонныйТовары.Номенклатура,
			СУММА(ЗаказПоставщикуСезонныйТовары.Количество)
		ИЗ
			Документ.ЗаказПоставщикуСезонный.Товары КАК ЗаказПоставщикуСезонныйТовары
		ГДЕ
			ЗаказПоставщикуСезонныйТовары.Ссылка В(&amp;СписокЗаказов)
			И ЗаказПоставщикуСезонныйТовары.Номенклатура.Производитель В(&amp;СписокПроизводителей)
		
		СГРУППИРОВАТЬ ПО
			ЗаказПоставщикуСезонныйТовары.Номенклатура) КАК ОстаткиПоДискам
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КомплектующиеНоменклатуры КАК КомплектующиеНоменклатуры
			ПО ОстаткиПоДискам.Номенклатура = КомплектующиеНоменклатуры.Номенклатура
	ГДЕ
		(КомплектующиеНоменклатуры.Комплектующая В ИЕРАРХИИ (&amp;Крышки)
				ИЛИ КомплектующиеНоменклатуры.Комплектующая = &amp;ПустаяСсылка)
	
	СГРУППИРОВАТЬ ПО
		КомплектующиеНоменклатуры.Комплектующая,
		ОстаткиПоДискам.Номенклатура,
		ОстаткиПоДискам.Номенклатура.Код) КАК А
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ТоварыНаСкладах.Остатки КАК ТоварыНаСкладахОстатки
		ПО А.Крышка = ТоварыНаСкладахОстатки.Номенклатура

СГРУППИРОВАТЬ ПО
	А.Крышка,
	А.Номенклатура,
	ТоварыНаСкладахОстатки.КоличествоОстаток,
	А.Номенклатура.Код,
	А.Номенклатура.ОсновнойПоставщик,
	А.Номенклатура.АртикулСокр</query>
		</dataSet>
		<totalField>
			<dataPath>ДискиОстаток</dataPath>
			<expression>Сумма(ДискиОстаток)</expression>
			<group>Крышка</group>
			<group>ОбщийИтог</group>
		</totalField>
		<totalField>
			<dataPath>КрышкаОстаток</dataPath>
			<expression>Максимум(КрышкаОстаток)</expression>
			<group>Крышка</group>
		</totalField>
		<totalField>
			<dataPath>КоличествоВЗаказ</dataPath>
			<expression>Выбор Когда Выразить((Сумма(ДискиОстаток)/100*30-ЕстьNull(Максимум(КрышкаОстаток),0))/4+0.5, "Число(15)")*4 &lt; 0 Тогда 0
Иначе Выразить((Сумма(ДискиОстаток)/100*30-ЕстьNull(Максимум(КрышкаОстаток),0))/4+0.5, "Число(15)")*4 Конец</expression>
			<group>Крышка</group>
		</totalField>
		<parameter>
			<name>СписокЗаказов</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Список заказов</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<TypeSet xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:AnyRef</TypeSet>
			</valueType>
			<value xsi:nil="true"/>
			<useRestriction>false</useRestriction>
			<valueListAllowed>true</valueListAllowed>
		</parameter>
		<parameter>
			<name>СписокПроизводителей</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Список производителей</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<TypeSet xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:AnyRef</TypeSet>
			</valueType>
			<value xsi:nil="true"/>
			<useRestriction>false</useRestriction>
			<valueListAllowed>true</valueListAllowed>
		</parameter>
		<parameter>
			<name>Период</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Период</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>true</useRestriction>
		</parameter>
		<parameter>
			<name>Крышки</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Крышки</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</Type>
			</valueType>
			<value xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<parameter>
			<name>ПустаяСсылка</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Пустая ссылка</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</Type>
			</valueType>
			<value xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<settingsVariant>
			<name xmlns="http://v8.1c.ru/8.1/data-composition-system/settings">Основной</name>
			<presentation xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xsi:type="xs:string">Основной</presentation>
		</settingsVariant>
	</dataCompositionSchema>
</SchemaFile>﻿<?xml version="1.0" encoding="UTF-8"?>
<Settings xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<selection>
		<item xsi:type="SelectedItemField">
			<field>ОсновнойПоставщик</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>ПроизводственнаяПлощадка</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>Крышка.Code</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>Крышка</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>Номенклатура</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>НоменклатураКод</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>ДискиОстаток</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>КрышкаОстаток</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>КоличествоВЗаказ</field>
		</item>
	</selection>
	<outputParameters>
		<dcscor:item xsi:type="SettingsParameterValue">
			<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
			<dcscor:value xsi:type="DataCompositionAttributesPlacement">Separately</dcscor:value>
		</dcscor:item>
	</outputParameters>
	<item xsi:type="StructureItemGroup">
		<groupItems>
			<item xsi:type="GroupItemField">
				<field>ОсновнойПоставщик</field>
				<groupType>Items</groupType>
				<periodAdditionType>None</periodAdditionType>
				<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
				<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
			</item>
			<item xsi:type="GroupItemField">
				<field>ПроизводственнаяПлощадка</field>
				<groupType>Items</groupType>
				<periodAdditionType>None</periodAdditionType>
				<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
				<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
			</item>
		</groupItems>
		<order>
			<item xsi:type="OrderItemAuto"/>
		</order>
		<selection>
			<item xsi:type="SelectedItemAuto"/>
		</selection>
		<item xsi:type="StructureItemGroup">
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>Крышка</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
			</selection>
			<item xsi:type="StructureItemGroup">
				<order>
					<item xsi:type="OrderItemAuto"/>
				</order>
				<selection>
					<item xsi:type="SelectedItemAuto"/>
				</selection>
			</item>
		</item>
	</item>
</Settings>﻿<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema"/>
</SchemaFile>