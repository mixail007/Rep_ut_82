
Процедура ВыбПериодНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(НачПериода, ?(КонПериода='0001-01-01', КонПериода, КонецДня(КонПериода)));
	Если НастройкаПериода.Редактировать() Тогда
		НачПериода = НастройкаПериода.ПолучитьДатуНачала();
		КонПериода = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
   ПараметрСКД =КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("НачалоПериода"));
   ПараметрСКД.Использование = Истина;
   ПараметрСКД.Значение  = НачПериода;
   
   ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("КонецПериода"));
   ПараметрСКД.Использование = Истина;
   ПараметрСКД.Значение  = КонецДня(КонПериода);

КонецПроцедуры

Процедура НачПериодаПриИзменении(Элемент)
   ПараметрСКД =КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("НачалоПериода"));
   ПараметрСКД.Использование = Истина;
   ПараметрСКД.Значение  = НачПериода;
КонецПроцедуры

Процедура КонПериодаПриИзменении(Элемент)
   
   ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("КонецПериода"));
   ПараметрСКД.Использование = Истина;
   ПараметрСКД.Значение  = КонецДня(КонПериода);
КонецПроцедуры

Процедура ОприходованияПриИзменении(Элемент)
	Список = Новый СписокЗначений;	
	Для Каждого зн из Оприходования цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	Для Каждого зн из Списания цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("Регистратор"));
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = Список;

КонецПроцедуры

Процедура СписанияПриИзменении(Элемент)
		Список = Новый СписокЗначений;	
	Для Каждого зн из Оприходования цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	Для Каждого зн из Списания цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("Регистратор"));
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = Список;

КонецПроцедуры

Процедура ЗаполнитьОприходованияНажатие(Элемент)
	
	
	Если ПустаяСтрока(КомментарийОприходования) тогда
		Возврат;
	КонецЕсли;

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ОприходованиеТоваров.Ссылка
		|ИЗ
		|	Документ.ОприходованиеТоваров КАК ОприходованиеТоваров
		|ГДЕ
		|	ОприходованиеТоваров.Дата МЕЖДУ &ДатаНач И &ДатаКон И ОприходованиеТоваров.Комментарий ПОДОБНО ""%" +  СокрЛП(КомментарийОприходования) + "%""";

	Запрос.УстановитьПараметр("ДатаНач", НачалоДня(НачПериода));
	Запрос.УстановитьПараметр("ДатаКон", КонецДня(КонПериода));

	Результат = Запрос.Выполнить();

	ВыборкаДетальныеЗаписи = Результат.Выбрать();

	Список = Новый СписокЗначений;	
	
	Оприходования.Очистить(); 
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		Оприходования.Добавить(ВыборкаДетальныеЗаписи.Ссылка); 		
	КонецЦикла; 	
	
	Для Каждого зн из Оприходования цикл 
		Список.Добавить(зн.Значение); 	
	КонецЦикла;
	Для Каждого зн из Списания цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("Регистратор"));
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = Список;     

	
КонецПроцедуры

Процедура ЗаполнитьСписанияНажатие(Элемент)
	
	Если ПустаяСтрока(КомментарийСписания) тогда
		Возврат;
	КонецЕсли;
	
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	СписаниеТоваров.Ссылка
		|ИЗ
		|	Документ.СписаниеТоваров КАК СписаниеТоваров
		|ГДЕ
		|	СписаниеТоваров.Дата МЕЖДУ &ДатаНач И &ДатаКон И СписаниеТоваров.Комментарий ПОДОБНО ""%" +  СокрЛП(КомментарийСписания) + "%""";

	Запрос.УстановитьПараметр("ДатаНач", НачалоДня(НачПериода));
	Запрос.УстановитьПараметр("ДатаКон", КонецДня(КонПериода));

	Результат = Запрос.Выполнить();

	ВыборкаДетальныеЗаписи = Результат.Выбрать();

	Список = Новый СписокЗначений;	
	
	Списания.Очистить(); 
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		Списания.Добавить(ВыборкаДетальныеЗаписи.Ссылка); 		
	КонецЦикла; 	
	
	Для Каждого зн из Оприходования цикл 
		Список.Добавить(зн.Значение); 	
	КонецЦикла;
	Для Каждого зн из Списания цикл 
		Список.Добавить(зн.Значение); 
	КонецЦикла;
	
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("Регистратор"));
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = Список;     
КонецПроцедуры
