
Процедура КнопкаВыполнитьНажатие(Кнопка)
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Дата КАК Дата,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент КАК Контрагент,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.СуммаДокумента КАК Сумма,
		|	ЛОЖЬ КАК Согласовать,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент.ВыгружатьСерыйСписокВTerminal КАК СС,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент.ВыгружатьЧерныйСписокВTerminal КАК ЧС
		|ИЗ
		|	РегистрНакопления.ЗаказыПокупателей.Остатки(
		|			,
		|			ЗаказПокупателя.РазрешитьГрузитьТоварыИзСтопЛиста = ЛОЖЬ
		|				И ЗаказПокупателя.Проверен = ИСТИНА) КАК ЗаказыПокупателейОстатки
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураИмпорт КАК НоменклатураИмпорт
		|		ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураИмпорт.Номенклатура
		|
		|УПОРЯДОЧИТЬ ПО
		|	Дата";

	Результат = Запрос.Выполнить();

	Заказы.Загрузить(Результат.Выгрузить());


КонецПроцедуры

Процедура ПриОткрытии()

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Дата КАК Дата,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент КАК Контрагент,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.СуммаДокумента КАК Сумма,
		|	ЛОЖЬ КАК Согласовать,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент.ВыгружатьСерыйСписокВTerminal КАК СС,
		|	ЗаказыПокупателейОстатки.ЗаказПокупателя.Контрагент.ВыгружатьЧерныйСписокВTerminal КАК ЧС
		|ИЗ
		|	РегистрНакопления.ЗаказыПокупателей.Остатки(
		|			,
		|			ЗаказПокупателя.РазрешитьГрузитьТоварыИзСтопЛиста = ЛОЖЬ
		|				И ЗаказПокупателя.Проверен = ИСТИНА) КАК ЗаказыПокупателейОстатки
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураИмпорт КАК НоменклатураИмпорт
		|		ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураИмпорт.Номенклатура
		|
		|УПОРЯДОЧИТЬ ПО
		|	Дата";

	Результат = Запрос.Выполнить();

	Заказы.Загрузить(Результат.Выгрузить());

КонецПроцедуры
