
Процедура ПриОткрытии()
	Если Найти(ПараметрыСеанса.ТекущийПользователь.Код, "Красюк Н.В.") > 0 или РольДоступна("ПравоЗавершенияРаботыПользователей") Тогда
	ПараметрСКД = КомпоновщикНастроек.Настройки.Отбор.Элементы[0];
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.НеРавно;
	ПараметрСКД.ПравоеЗначение  = Справочники.Пользователи.ПустаяСсылка();	
	Иначе
	ПараметрСКД = КомпоновщикНастроек.Настройки.Отбор.Элементы[0];
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.ПравоеЗначение  = ПараметрыСеанса.ТекущийПользователь;
	ЭлементыФормы.Подразделение.Доступность = Ложь;
	КонецЕсли;
КонецПроцедуры

Процедура КнопкаВыбораПериодаНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(НачПериода, ?(КонПериода='0001-01-01', КонПериода, КонецДня(КонПериода)));
	Если НастройкаПериода.Редактировать() Тогда
		НачПериода = НастройкаПериода.ПолучитьДатуНачала();
		КонПериода = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("Дата1");
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = НачПериода;
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("Дата2");
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = КонецДня(КонПериода);
КонецПроцедуры

Процедура НачПериодаПриИзменении(Элемент)
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("Дата1");
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = НачалоДня(НачПериода);
КонецПроцедуры

Процедура КонПериодаПриИзменении(Элемент)
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("Дата2");
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = КонецДня(КонПериода);
КонецПроцедуры

Процедура ПодразделениеПриИзменении(Элемент)
	ПараметрСКД = КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ОсновноеПодразделение");
	ПараметрСКД.Использование = Истина;
	ПараметрСКД.Значение  = Подразделение;
КонецПроцедуры
