перем ДанныеРасшифровки1;
Процедура ЗакрытьНажатие(Элемент)
	// Вставить содержимое обработчика.
КонецПроцедуры

Процедура ПриОткрытии()
	Если видОтчета = "Затраты" тогда
		КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
		ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
		СхемаКомпоновкиДанных1 = ЭтотОбъект.ПолучитьМакет("РасшифровкаЗатрат");
		
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.НачалоПериода;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = НачалоМесяца(НачалоПериода);                                
		
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.КонецПериода;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = КонецМесяца(Конецпериода);                                
		
		Если СтатьяЗатрат <> Неопределено тогда
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.СтатьяЗатрат;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = СтатьяЗатрат;                                
		конецЕсли;
		Если Ответственный <> Неопределено тогда
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.Ответственный;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = Ответственный;                                
	    конецЕсли;
	    Если Подразделение <> Неопределено тогда
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.Подразделение;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = Подразделение;                                
		конецЕсли;
		
		ДанныеРасшифровки1 = Новый ДанныеРасшифровкиКомпоновкиДанных;
		КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
		//настройки1= СхемаКомпоновкиДанных1.ВариантыНастроек.Найти(Вариант).Настройки;
		МакетКомпоновки1 = КомпоновщикМакета1.Выполнить(СхемаКомпоновкиДанных1, схемаКомпоновкиДанных1.НастройкиПоУмолчанию, ДанныеРасшифровки1);
		
		ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
		ПроцессорКомпоновкиДанных1.Инициализировать(МакетКомпоновки1, , ДанныеРасшифровки1,истина);
		ПроцессорВывода1 = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
		ПроцессорВывода1.УстановитьДокумент(ЭлементыФормы.Результат);
		ПроцессорВывода1.Вывести(ПроцессорКомпоновкиДанных1);
	иначеЕсли видОтчета = "Командировки" тогда
		КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
		ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
		СхемаКомпоновкиДанных1 = ЭтотОбъект.ПолучитьМакет("РасшифровкаКомандировок");
		
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.ПериодБюджета;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = ПериодПланирования;                                
		
		  Если Подразделение <> Неопределено тогда
		ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.Подразделение;
		ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
		ПараметрСКД.Значение  = Подразделение;                                
		конецЕсли;

		
		ДанныеРасшифровки1 = Новый ДанныеРасшифровкиКомпоновкиДанных;
		КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
		МакетКомпоновки1 = КомпоновщикМакета1.Выполнить(СхемаКомпоновкиДанных1, СхемаКомпоновкиДанных1.НастройкиПоУмолчанию, ДанныеРасшифровки1);
		
		ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
		ПроцессорКомпоновкиДанных1.Инициализировать(МакетКомпоновки1, , ДанныеРасшифровки1,истина);
		ПроцессорВывода1 = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
		ПроцессорВывода1.УстановитьДокумент(ЭлементыФормы.Результат);
		ПроцессорВывода1.Вывести(ПроцессорКомпоновкиДанных1);
		
	конецЕсли;
	
КонецПроцедуры

Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
			перем  ВыполненноеДействие;

	СтандартнаяОбработка = Ложь;
	СхемаКомпоновкиДанных = ПолучитьМакет("РасшифровкаЗатрат");
   //Создадим и инициализируем обработчик расшифровки                    
    ОбработкаРасшифровки = Новый ОбработкаРасшифровкиКомпоновкиДанных(ДанныеРасшифровки1, Новый ИсточникДоступныхНастроекКомпоновкиДанных(СхемаКомпоновкиДанных));
                                                                         
    ДоступныеДействия = Новый Массив();
	ДоступныеДействия.Добавить(ДействиеОбработкиРасшифровкиКомпоновкиДанных.ОткрытьЗначение);
    
     Настройки = ОбработкаРасшифровки.Выполнить(Расшифровка, ВыполненноеДействие, ДоступныеДействия,);

КонецПроцедуры
