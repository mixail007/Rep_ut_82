<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema">
		<dataSource>
			<name>ИсточникДанных1</name>
			<dataSourceType>Local</dataSourceType>
		</dataSource>
		<dataSet xsi:type="DataSetQuery">
			<name>НаборДанных1</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ЗаданиеНаОтгрузку</dataPath>
				<field>ЗаданиеНаОтгрузку</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Контрагент</dataPath>
				<field>Контрагент</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КрышкиОтданыВодителю</dataPath>
				<field>КрышкиОтданыВодителю</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЕСТЬNULL(ЗаданиеНаОтгрузкуЗаказыПокупателей.Ссылка, КатегорииОбъектов.Объект1) КАК ЗаданиеНаОтгрузку,
	ЗаданиеНаОтгрузкуЗаказыПокупателей.ЗаказПокупателя.Контрагент КАК Контрагент,
	ВЫБОР
		КОГДА КатегорииОбъектов.Категория ЕСТЬ NULL 
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК КрышкиОтданыВодителю
ИЗ
	Документ.ЗаданиеНаОтгрузку.ЗаказыПокупателей КАК ЗаданиеНаОтгрузкуЗаказыПокупателей
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВЫРАЗИТЬ(рс.Объект КАК Документ.ЗаданиеНаОтгрузку) КАК Объект1,
			рс.Категория КАК Категория
		ИЗ
			РегистрСведений.КатегорииОбъектов КАК рс
		ГДЕ
			рс.Категория = &amp;Категория) КАК КатегорииОбъектов
		ПО ЗаданиеНаОтгрузкуЗаказыПокупателей.Ссылка = КатегорииОбъектов.Объект1
ГДЕ
	ЗаданиеНаОтгрузкуЗаказыПокупателей.Ссылка.Дата МЕЖДУ &amp;НачДата И &amp;КонДата
	И ЗаданиеНаОтгрузкуЗаказыПокупателей.ЗаказПокупателя.ТребуютсяКрышки</query>
		</dataSet>
		<calculatedField>
			<dataPath>Штраф</dataPath>
			<expression>0</expression>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Штраф</d4p1:content>
				</d4p1:item>
			</title>
		</calculatedField>
		<totalField>
			<dataPath>КрышкиОтданыВодителю</dataPath>
			<expression>Минимум(КрышкиОтданыВодителю)</expression>
		</totalField>
		<totalField>
			<dataPath>Штраф</dataPath>
			<expression>Выбор когда Минимум(КрышкиОтданыВодителю) = Истина тогда 0 иначе 500 конец</expression>
			<group>ЗаданиеНаОтгрузку</group>
		</totalField>
		<totalField>
			<dataPath>Штраф</dataPath>
			<expression>0</expression>
			<group>Контрагент</group>
		</totalField>
		<totalField>
			<dataPath>Штраф</dataPath>
			<expression>Сумма(ВычислитьВыражениеСГруппировкойМассив("Выбор когда Минимум(КрышкиОтданыВодителю) = Истина тогда 0 иначе 500 конец","ЗаданиеНаОтгрузку"))</expression>
			<group>ОбщийИтог</group>
		</totalField>
		<parameter>
			<name>НачДата</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Нач дата</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<parameter>
			<name>КонДата</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Кон дата</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core">xs:dateTime</Type>
				<DateQualifiers xmlns="http://v8.1c.ru/8.1/data/core">
					<DateFractions>DateTime</DateFractions>
				</DateQualifiers>
			</valueType>
			<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
			<useRestriction>false</useRestriction>
		</parameter>
		<parameter>
			<name>Категория</name>
			<title xmlns:d4p1="http://v8.1c.ru/8.1/data/core" xsi:type="d4p1:LocalStringType">
				<d4p1:item>
					<d4p1:lang>ru</d4p1:lang>
					<d4p1:content>Категория</d4p1:content>
				</d4p1:item>
			</title>
			<valueType>
				<Type xmlns="http://v8.1c.ru/8.1/data/core" xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КатегорииОбъектов</Type>
			</valueType>
			<value xsi:nil="true"/>
			<useRestriction>true</useRestriction>
			<expression>справочники.КатегорииОбъектов.НайтиПоКоду("00050")</expression>
		</parameter>
		<settingsVariant>
			<name xmlns="http://v8.1c.ru/8.1/data-composition-system/settings">Основной</name>
			<presentation xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xsi:type="xs:string">Основной</presentation>
		</settingsVariant>
	</dataCompositionSchema>
</SchemaFile>﻿<?xml version="1.0" encoding="UTF-8"?>
<Settings xmlns="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<selection>
		<item xsi:type="SelectedItemField">
			<field>КрышкиОтданыВодителю</field>
		</item>
		<item xsi:type="SelectedItemField">
			<field>Штраф</field>
		</item>
	</selection>
	<filter>
		<item xsi:type="FilterItemComparison">
			<left xsi:type="dcscor:Field">ЗаданиеНаОтгрузку.Подразделение</left>
			<comparisonType>Equal</comparisonType>
		</item>
		<item xsi:type="FilterItemComparison">
			<use>false</use>
			<left xsi:type="dcscor:Field">Контрагент</left>
			<comparisonType>Equal</comparisonType>
		</item>
	</filter>
	<dataParameters>
		<dcscor:item xsi:type="SettingsParameterValue">
			<dcscor:parameter>НачДата</dcscor:parameter>
			<dcscor:value xsi:type="v8:StandardBeginningDate">
				<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfThisDay</v8:variant>
			</dcscor:value>
		</dcscor:item>
		<dcscor:item xsi:type="SettingsParameterValue">
			<dcscor:parameter>КонДата</dcscor:parameter>
			<dcscor:value xsi:type="v8:StandardBeginningDate">
				<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfNextDay</v8:variant>
			</dcscor:value>
		</dcscor:item>
	</dataParameters>
	<conditionalAppearance>
		<item>
			<selection/>
			<filter>
				<item xsi:type="FilterItemComparison">
					<left xsi:type="dcscor:Field">КрышкиОтданыВодителю</left>
					<comparisonType>Equal</comparisonType>
					<right xsi:type="xs:boolean">true</right>
				</item>
			</filter>
			<appearance>
				<dcscor:item xsi:type="SettingsParameterValue">
					<dcscor:parameter>ЦветФона</dcscor:parameter>
					<dcscor:value xsi:type="v8ui:Color">#CCFFCC</dcscor:value>
				</dcscor:item>
			</appearance>
		</item>
	</conditionalAppearance>
	<item xsi:type="StructureItemGroup">
		<groupItems>
			<item xsi:type="GroupItemField">
				<field>ЗаданиеНаОтгрузку</field>
				<groupType>Items</groupType>
				<periodAdditionType>None</periodAdditionType>
				<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
				<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
			</item>
		</groupItems>
		<order>
			<item xsi:type="OrderItemAuto"/>
		</order>
		<selection>
			<item xsi:type="SelectedItemAuto"/>
			<item xsi:type="SelectedItemField">
				<field>ЗаданиеНаОтгрузку.Перевозчик</field>
			</item>
		</selection>
		<outputParameters>
			<dcscor:item xsi:type="SettingsParameterValue">
				<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
				<dcscor:value xsi:type="DataCompositionAttributesPlacement">Separately</dcscor:value>
			</dcscor:item>
		</outputParameters>
		<item xsi:type="StructureItemGroup">
			<groupItems>
				<item xsi:type="GroupItemField">
					<field>Контрагент</field>
					<groupType>Items</groupType>
					<periodAdditionType>None</periodAdditionType>
					<periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionBegin>
					<periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</periodAdditionEnd>
				</item>
			</groupItems>
			<order>
				<item xsi:type="OrderItemAuto"/>
			</order>
			<selection>
				<item xsi:type="SelectedItemAuto"/>
			</selection>
		</item>
	</item>
</Settings>﻿<?xml version="1.0" encoding="UTF-8"?>
<SchemaFile xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema"/>
</SchemaFile>