
Процедура УстановитьОтбор()

	СписокЖурнала.Отбор.ДокументыПоКонтрагенту.Значение = КритерийОтбораСписок.Отбор.ЗначениеОтбора.Значение;
	
	СписокЖурнала.Отбор.Дата.ВидСравнения = ВидСравнения.Интервал;
	СписокЖурнала.Отбор.Дата.Значение  = НачПериода;
	СписокЖурнала.Отбор.Дата.ЗначениеС = НачПериода;
	СписокЖурнала.Отбор.Дата.ЗначениеПо= КонецДня(КонПериода);
	СписокЖурнала.Отбор.Дата.Использование = Истина;
	//+++)

КонецПроцедуры

Процедура ПриОткрытии()
	
	КритерийОтбораСписок.Отбор.ЗначениеОтбора.Значение = ПараметрОтборПоЗначению;
	
	СписокЖурнала.Отбор.ДокументыПоКонтрагенту.Использование = Истина;
	ЭлементыФормы.СписокЖурнала.НастройкаОтбора.ДокументыПоКонтрагенту.Доступность = Ложь;
	
	//+++( 01.06.2017 - ограничение по "глубине" - не более 2-3 месяцев
	НачПериода = ПолучитьЗначениеПоУмолчанию( глТекущийПользователь, "ОсновнаяДатаНачалаОтчетов");
	Если НачПериода='00010101' тогда
		НачПериода = ДобавитьМесяц( НачалоМесяца( ТекущаяДата() ), -1 );
	КонецЕсли;	
	КонПериода = НачалоДня(ТекущаяДата());

	УстановитьОтбор();
		
КонецПроцедуры

Процедура ВыбКонтрагентПриИзменении(Элемент)
	
	УстановитьОтбор();
	
КонецПроцедуры

Процедура ВыбПериодНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(НачПериода, ?(КонПериода='0001-01-01', КонПериода, КонецДня(КонПериода)));
	Если НастройкаПериода.Редактировать() Тогда
		НачПериода = НастройкаПериода.ПолучитьДатуНачала();
		КонПериода = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
	УстановитьОтбор();
КонецПроцедуры

Процедура НачПериодаПриИзменении(Элемент)
	УстановитьОтбор();
КонецПроцедуры

 