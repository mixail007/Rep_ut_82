////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ОБЩЕГО НАЗНАЧЕНИЯ

// Процедура формирует и выводит сумму в информационной надписи.
//
Процедура ОбновитьНадписьФормулаСумма()

	ЭлементыФормы.тСуммаЧисло.Заголовок = СокрЛ(Формат(Цена * Количество * Коэффициент, "ЧЦ=15;ЧДЦ=2;ЧН=0,00"));

КонецПроцедуры // ОбновитьНадписьФормулаСумма()

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	Если ВладелецФормы=Неопределено Тогда
		Отказ=Истина; Возврат;
	КонецЕсли; 
КонецПроцедуры

// Процедура - обработчик события "ПриОткрытии" формы.
//
Процедура ПриОткрытии()

	ЗапрашиватьКоличество = ВладелецФормы.ЗапрашиватьКоличество;
	ЗапрашиватьЦену       = ВладелецФормы.ЗапрашиватьЦену;

	ЭлементыФормы.тКоличество.Доступность=ЗапрашиватьКоличество;
	ЭлементыФормы.Количество.Доступность=ЗапрашиватьКоличество;
	ЭлементыФормы.тКоэффициент.Доступность=ЗапрашиватьЦену;
	ЭлементыФормы.Коэффициент.Доступность=ЗапрашиватьЦену;
	ЭлементыФормы.тЦена.Доступность=ЗапрашиватьЦену;
	ЭлементыФормы.Цена.Доступность=ЗапрашиватьЦену;

	ОбновитьНадписьФормулаСумма();

	Если ЭлементыФормы.Количество.Доступность Тогда
		ЭтаФорма.ТекущийЭлемент = ЭтаФорма.ЭлементыФормы.Количество;
	ИначеЕсли ЭлементыФормы.Коэффициент.Доступность Тогда
		ЭтаФорма.ТекущийЭлемент = ЭтаФорма.ЭлементыФормы.Коэффициент;
	Иначе
		ЭтаФорма.ТекущийЭлемент = ЭтаФорма.ЭлементыФормы.КоманднаяПанельДействий.Кнопки.КнопкаОКНажатие;
	КонецЕсли;

КонецПроцедуры // ПриОткрытии()

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ, ВЫЗЫВАЕМЫЕ ИЗ ЭЛЕМЕНТОВ ФОРМЫ

// Процедура - обработчик события "ПриИзменении" поля ввода количества.
//
Процедура КоличествоПриИзменении(Элемент)

	ОбновитьНадписьФормулаСумма();

КонецПроцедуры // КоличествоПриИзменении()

// Процедура - обработчик события "ПриИзменении" поля ввода цены.
//
Процедура ЦенаПриИзменении(Элемент)

	ОбновитьНадписьФормулаСумма();

КонецПроцедуры // ЦенаПриИзменении()

Процедура КоэффициентПриИзменении(Элемент)

	ОбновитьНадписьФормулаСумма();

КонецПроцедуры

// Процедура - обработчик события "Нажатие" кнопки "ОК".
//
Процедура КнопкаОКНажатие(Элемент)

	СтруктураПараметров = Новый Структура();
	СтруктураПараметров.Вставить("Количество",	Количество);
	СтруктураПараметров.Вставить("Коэффициент",	Коэффициент);
	СтруктураПараметров.Вставить("Цена",		Цена);

	Закрыть(СтруктураПараметров);

КонецПроцедуры // КнопкаОКНажатие()
