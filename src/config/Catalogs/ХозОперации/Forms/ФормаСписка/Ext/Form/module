
Процедура СправочникСписокВидДокументаНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	//СтандартнаяОбработка = Ложь;
	ТекСтрока = ЭлементыФормы.СправочникСписок.ТекущиеДанные;
	ВыбранныйДокумент = ТекСтрока.ВидДокумента; // ВыбратьДокумент();
	
	Если ТипЗнч(ВыбранныйДокумент) = Тип("Структура") Тогда
		
		СтарыйЭлемент = Элемент.Значение;
		
		
		Элемент.Значение = ВыбранныйДокумент.Значение;
	    ТекСтрока.ПредставлениеДокумента = ВыбранныйДокумент.Представление;
		
		Если СтарыйЭлемент <> ВыбранныйДокумент.Значение Тогда
			ТекСтрока.КодОперации = "";	
		КонецЕсли; 
	
	//Иначе
	//	
	//	Элемент.Значение = "";
	//	ЭлементыФормы.СправочникСписок.ТекущиеДанные.ПредставлениеДокумента = "";
		
	КонецЕсли; 
		
КонецПроцедуры

Процедура СправочникСписокКодОперацииНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	ДокИмя = ЭлементыФормы.СправочникСписок.ТекущаяСтрока.ВидДокумента;
	
	Если НЕ ЗначениеНеЗаполнено(ДокИмя) Тогда
	
		Если ЕстьРеквизитДокумента("ВидОперации", (Метаданные.НайтиПоПолномуИмени("Документ." + ДокИмя))) Тогда
			
			Если Элемент.СписокВыбора.ТипЗначения <> Метаданные.НайтиПоПолномуИмени("Документ." + ДокИмя).Реквизиты.ВидОперации.Тип Тогда
				
				//ЭлементыФормы.СправочникСписок.Колонки.КодОперации.ЭлементУправления.ОграничениеТипа = Метаданные.НайтиПоПолномуИмени("Документ." + ДокИмя).Реквизиты.ВидОперации.Тип;
				ЭлементыФормы.СправочникСписок.Колонки.КодОперации.ЭлементУправления.Значение = Метаданные.НайтиПоПолномуИмени("Документ." + ДокИмя).Реквизиты.ВидОперации.Тип.ПривестиЗначение(ЭлементыФормы.СправочникСписок.Колонки.КодОперации.ЭлементУправления.Значение);
				
			КонецЕсли; 
			
		Иначе
			
			СтандартнаяОбработка = Ложь;
			
		КонецЕсли; 
		                            
	
	КонецЕсли; 
	
КонецПроцедуры

Процедура СправочникСписокВидДокументаПриИзменении(Элемент)
	
	Если ЭлементыФормы.СправочникСписок.ТекущаяСтрока <> Неопределено Тогда
		
		ЭлементОбъект = ЭлементыФормы.СправочникСписок.ТекущаяСтрока.ПолучитьОбъект();
		ЭлементОбъект.Наименование = ЭлементыФормы.СправочникСписок.ТекущаяСтрока.ПредставлениеДокумента + 
		?(ЗначениеНеЗаполнено(ЭлементыФормы.СправочникСписок.ТекущаяСтрока.КодОперации), "", " (" + Строка(ЭлементыФормы.СправочникСписок.ТекущаяСтрока.КодОперации) + ")");
		ЭлементОбъект.Записать();
		
		
	КонецЕсли; 
	
КонецПроцедуры

Процедура СправочникСписокПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	
	СправочникСписокВидДокументаПриИзменении(Элемент);
	
КонецПроцедуры
