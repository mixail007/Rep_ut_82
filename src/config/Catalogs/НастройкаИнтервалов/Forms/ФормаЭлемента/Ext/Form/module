
//Вызывается при окончании редактирования границы интервала
//
Процедура ТабличнаяЧастьПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	
	//Выровнять(Элемент.ТекущаяСтрока);
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	Если ТабличнаяЧасть.Количество() = 0 тогда
		СтрокаОстальные = ТабличнаяЧасть.Добавить();
		СТрокаОстальные.НачалоИнтервала = 100000;
		СтрокаОстальные.Подпись = "Все";
	КонецЕсли;
КонецПроцедуры

Процедура Выровнять(ВведеннаяСтрока = НеОпределено)
	Если ВведеннаяСтрока = НеОпределено тогда
		//просто выравнивание - например, после удаления строки
		РедактируемаяСтрокаУжеОбработана = Истина;
	иначе
		РедактируемаяСтрокаУжеОбработана = Ложь;
	КонецЕсли;
	ТабличнаяЧасть.Сортировать("НачалоИнтервала");
	КонИнтервала = 0;
	Для каждого Строка из ТабличнаяЧасть Цикл
		Строка.КонецИнтервала = КОнИнтервала;
		Если (Строка = ВведеннаяСтрока) или РедактируемаяСтрокаУжеОбработана тогда
			РедактируемаяСтрокаУжеОбработана = Истина;
			Если (Строка.НомерСтроки = 1) и (ТабличнаяЧасть.Количество()<>1) тогда
				Строка.Подпись = "Не более " + строка(Строка.НачалоИнтервала) + " дней";
			иначеЕсли Строка.НомерСтроки<ТабличнаяЧасть.Количество() Тогда
				Строка.Подпись = "От " + строка(Строка.КонецИнтервала)+" до " + строка(Строка.НачалоИнтервала) + " дней";
			иначеЕсли ТабличнаяЧасть.Количество()<>1 Тогда
				Строка.НачалоИнтервала = 50000;
				Строка.Подпись = "Остальные (не менее "+строка(Строка.КонецИнтервала)+" дней)";
			иначе 
				Строка.НачалоИнтервала = 50000;
				Строка.Подпись = "Все";
			КонецЕсли;
		КонецЕсли;
		КонИнтервала = Строка.НачалоИнтервала + 1;
	КонецЦикла;
КонецПроцедуры
Процедура ТабличнаяЧастьПослеУдаления(Элемент)
	//Выровнять();
КонецПроцедуры

Процедура ТабличнаяЧастьОбработкаЗаписиНовогоОбъекта(Элемент, Объект, СтандартнаяОбработка)
//	Выровнять(Объект);
КонецПроцедуры

Процедура ТабличнаяЧастьПередОкончаниемРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования, Отказ)
	
	Если ТабличнаяЧасть.НайтиСтроки(Новый Структура("НачалоИнтервала", Элемент.ТекущаяСтрока.НачалоИнтервала)).Количество()>1 Тогда
		Предупреждение("Такая граница уже есть! Введите другое значение границы.");
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры



