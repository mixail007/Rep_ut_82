
// Обработчик события ПередЗаписью формы.
//
Процедура ПередЗаписью(Отказ)

	// Ограничение прав доступа
	Если ТипЗнч(Владелец) = Тип("СправочникСсылка.Контрагенты") Тогда
		КонтрагентДляОграниченияПравДоступа = Владелец;
		ОрганизацияДляОграниченияПравДоступа = Справочники.Организации.ПустаяСсылка();
	ИначеЕсли ТипЗнч(Владелец) = Тип("СправочникСсылка.Организации") Тогда
		КонтрагентДляОграниченияПравДоступа = Справочники.Контрагенты.ПустаяСсылка();
		ОрганизацияДляОграниченияПравДоступа = Владелец;
	КонецЕсли; 
	
	Если НЕ ОбменДанными.Загрузка Тогда

		Если ЕстьНеЦифры(НомерСчета) Тогда
			
			//+++ 16.06.2015 - снятие ограничения на буквы для Экспортных клиентов
			Если ТипЗнч(Владелец) = Тип("СправочникСсылка.Контрагенты") 
				И Владелец.Экспорт тогда	
				#Если Клиент тогда
				Сообщить("Внимание! В составе номера банковского счета есть не только цифры! Запись счета для Экспортного клиента - разрешена!", СтатусСообщения.Информация);
				#КонецЕсли
			Иначе	
				СообщитьОбОшибке("В составе номера банковского счета должны быть только цифры.",, ("Элемент справочника ""Банковские счета"" " + Наименование + " не записан!"));
				Отказ = Истина;
			КонецЕсли;
		
		КонецЕсли; 

		Если ЗначениеНеЗаполнено(ВалютаДенежныхСредств) Тогда
			СообщитьПользователюНезаполненРеквизит(Ссылка, "валюта счета");
			Отказ = Истина;
		КонецЕсли;

	КонецЕсли;
	
	Если НЕ Отказ Тогда
	
		обЗаписатьПротоколИзменений(ЭтотОбъект);
	
	КонецЕсли; 

КонецПроцедуры

