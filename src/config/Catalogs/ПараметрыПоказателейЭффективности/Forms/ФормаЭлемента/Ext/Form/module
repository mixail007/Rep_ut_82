Перем СтарыйТипПарамета;

Процедура ПередЗаписью(Отказ)
	Наименование = "";
	Для каждого СтрПараметр ИЗ Списокпараметров Цикл
		Если ТипЗнч(СтрПараметр.Параметр)  = Тип("ПеречислениеСсылка.ВидыТоваров")  Тогда
			Наименование = Наименование + СтрПараметр.Параметр + "; ";
		ИначеЕсли   ТипЗнч(СтрПараметр.Параметр)  = Тип("Строка") Тогда
			Наименование = Наименование + СтрПараметр.ВидСравнения + " " + СтрПараметр.Параметр +  "; ";
        Иначе
			Наименование = Наименование + СтрПараметр.Параметр.Наименование + "; " ;
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

Процедура СписокПараметровВидСравненияПриИзменении(Элемент)
	Если ЭлементыФормы.СписокПараметров.ТекущиеДанные.ВидСравнения = "Содержит" или ЭлементыФормы.СписокПараметров.ТекущиеДанные.ВидСравнения ="Не содержит"
		и ТипЗнч(ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр) <> Тип("Строка") Тогда
		ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = "";
	Иначе
		Если ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Номенклатура"  и СтарыйТипПарамета <> "Номенклатура" Тогда
            ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = Справочники.Номенклатура.ПустаяСсылка();
        ИначеЕсли  ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Номенклатурные группы" и СтарыйТипПарамета <> "Номенклатурные группы" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.НоменклатурныеГруппы.ПустаяСсылка();
		ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Производители" и СтарыйТипПарамета <> "Производители" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.Производители.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Модели товаров" и СтарыйТипПарамета <> "Модели товаров" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.МоделиТоваров.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Типоразмеры" и СтарыйТипПарамета <> "Типоразмеры" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = Справочники.Типоразмеры.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Виды товаров" и СтарыйТипПарамета <> "Виды товаров" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр= Перечисления.ВидыТоваров.ПустаяСсылка();
 		КонецЕсли;
     КонецЕсли;

КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	СписокВыбора  = Новый СписокЗначений;
	СписокВыбора.Добавить(ВидСравнения.Равно);
	СписокВыбора.Добавить(ВидСравнения.НеРавно);
	СписокВыбора.Добавить(ВидСравнения.ВИерархии);
	СписокВыбора.Добавить(ВидСравнения.НеВИерархии);
	СписокВыбора.Добавить(ВидСравнения.Содержит);
    СписокВыбора.Добавить(ВидСравнения.НеСодержит);
	//СписокВыбора.Добавить(ВидСравнения.Больше);
	//СписокВыбора.Добавить(ВидСравнения.Меньше);
	//СписокВыбора.Добавить(ВидСравнения.БольшеИлиРавно);
	//СписокВыбора.Добавить(ВидСравнения.МеньшеИлиРавно);


	
	ЭлементыФормы.СписокПараметров.Колонки.ВидСравнения.ЭлементУправления.СписокВыбора = СписокВыбора;
	
	СписокВыбораТипа  = Новый СписокЗначений;
	СписокВыбораТипа.Добавить("Номенклатура");
	СписокВыбораТипа.Добавить("Номенклатурные группы");
	СписокВыбораТипа.Добавить("Производители");
    СписокВыбораТипа.Добавить("Модели товаров");
	СписокВыбораТипа.Добавить("Типоразмеры");
	СписокВыбораТипа.Добавить("Виды товаров");

	
	ЭлементыФормы.СписокПараметров.Колонки.ТипПараметра.ЭлементУправления.СписокВыбора = СписокВыбораТипа;


КонецПроцедуры

Процедура СписокПараметровПередНачаломДобавления(Элемент, Отказ, Копирование)

КонецПроцедуры

Процедура СписокПараметровПараметрПриИзменении(Элемент)
	Если ТипЗнч(ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр) <> Тип("Строка") и  ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр <> Неопределено Тогда
		 ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр.Метаданные().Представление()
	КонецЕсли;
КонецПроцедуры

Процедура СписокПараметровПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	Если НоваяСтрока и Не Копирование Тогда
		Элемент.ТекущиеДанные.ВидСравнения = "Равно";
	КонецЕсли;
	СтарыйТипПарамета = Элемент.ТекущиеДанные.ТипПараметра;
КонецПроцедуры

Процедура СписокПараметровТипПараметраПриИзменении(Элемент)
	Если ЭлементыФормы.СписокПараметров.ТекущиеДанные.ВидСравнения = "Содержит" или ЭлементыФормы.СписокПараметров.ТекущиеДанные.ВидСравнения ="Не содержит" 
		и ТипЗнч(ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр) <> Тип("Строка") Тогда
		ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = "";
	Иначе
		Если ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Номенклатура"  и СтарыйТипПарамета <> "Номенклатура" Тогда
            ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = Справочники.Номенклатура.ПустаяСсылка();
        ИначеЕсли  ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Номенклатурные группы" и СтарыйТипПарамета <> "Номенклатурные группы" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.НоменклатурныеГруппы.ПустаяСсылка();
		ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Производители" и СтарыйТипПарамета <> "Производители" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.Производители.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Модели товаров" и СтарыйТипПарамета <> "Модели товаров" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр =  Справочники.МоделиТоваров.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Типоразмеры" и СтарыйТипПарамета <> "Типоразмеры" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр = Справочники.Типоразмеры.ПустаяСсылка();
        ИначеЕсли ЭлементыФормы.СписокПараметров.ТекущиеДанные.ТипПараметра = "Виды товаров" и СтарыйТипПарамета <> "Виды товаров" Тогда
			ЭлементыФормы.СписокПараметров.ТекущиеДанные.Параметр= Перечисления.ВидыТоваров.ПустаяСсылка();
 		КонецЕсли;
     КонецЕсли;
КонецПроцедуры



