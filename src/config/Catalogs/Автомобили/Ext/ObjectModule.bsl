// Модуль справочника Банки


//Формирование наименования автомобиля на основе модели, цвета и VIN-кода
Процедура ФормированиеНаименованияАвтомобиля(ГосНомер) Экспорт
	НовоеНаименование="";
	Если НЕ ЗначениеНеЗаполнено(Модель) Тогда
		Если НЕ ПустаяСтрока(НовоеНаименование) Тогда НовоеНаименование=НовоеНаименование+" "; КонецЕсли; 
		НовоеНаименование=НовоеНаименование+СокрЛП(Модель);
	КонецЕсли;
	Если НЕ ЗначениеНеЗаполнено(Цвет) Тогда
		Если НЕ ПустаяСтрока(НовоеНаименование) Тогда НовоеНаименование=НовоеНаименование+" "; КонецЕсли; 
		НовоеНаименование=НовоеНаименование+СокрЛП(Цвет);
	КонецЕсли; 
	Если НЕ ЗначениеНеЗаполнено(ГосНомер) Тогда
		Если НЕ ПустаяСтрока(НовоеНаименование) Тогда НовоеНаименование=НовоеНаименование+" "; КонецЕсли; 
		НовоеНаименование=НовоеНаименование+"№ "+СокрЛП(ГосНомер);
	КонецЕсли;
	Если НЕ ЗначениеНеЗаполнено(VIN) Тогда
		Если НЕ ПустаяСтрока(НовоеНаименование) Тогда НовоеНаименование=НовоеНаименование+" "; КонецЕсли; 
		НовоеНаименование=НовоеНаименование+"VIN "+СокрЛП(VIN);
	КонецЕсли;
	Если НЕ ПустаяСтрока(НовоеНаименование) Тогда Наименование=НовоеНаименование; КонецЕсли; 
КонецПроцедуры

// Возвращает структуру обязательных / уникальных реквизитов элемента
// Если ДляЭлемента = Истина, возвращаемая структура содержит реквизиты для проверки элемента
// Если ДляГруппы = Истина, аналогично для группы
// Возвращаемая структура содержит строковые идентификаторы реквизитов или вложенные структуры для табличных частей
// Для реквизита значение структуры содержит число 1-Обязательный, 3-Уникальный
Функция ПолучитьОбязательныеРеквизиты(ДляЭлемента=Истина, ДляГруппы=Ложь) Экспорт
	ОбязательныеРеквизиты=Новый Структура();
	ОбязательныеРеквизиты.Вставить("Код",1);
	ОбязательныеРеквизиты.Вставить("Наименование",3);
	Если ДляЭлемента Тогда
		ОбязательныеРеквизиты.Вставить("VIN",3);
		//ОбязательныеРеквизиты.Вставить("ГодВыпуска",1);
		//ОбязательныеРеквизиты.Вставить("ГосНомер",1);
		ОбязательныеРеквизиты.Вставить("Модель",1);
		//ОбязательныеРеквизиты.Вставить("НомерДвигателя",1);
		//ОбязательныеРеквизиты.Вставить("НомерКузова",1);
		//ОбязательныеРеквизиты.Вставить("НомерШасси",1);
		//ОбязательныеРеквизиты.Вставить("Цвет",1);
		//Если РедактированиеЦенВНоменклатурныхТаблицах Тогда
		//	Если (НЕ обЗначениеНеЗаполнено(Цена)) ИЛИ (НЕ обЗначениеНеЗаполнено(Валюта)) Тогда
		//		ОбязательныеРеквизиты.Вставить("Цена",1);
		//		ОбязательныеРеквизиты.Вставить("Валюта",1);
		//	КонецЕсли; 
		//КонецЕсли;
	КонецЕсли;
	Возврат ОбязательныеРеквизиты;
КонецФункции

// Стандартный обработчик ПередЗаписью элемента справочника
Процедура ПередЗаписью(Отказ)
	Если (НЕ ЭтоГруппа) И (ЭтоНовый()) Тогда
		Автор=глТекущийПользователь;
		Дата=ТекущаяДата();
	КонецЕсли; 
	
	Если НЕ Отказ Тогда
	
		обЗаписатьПротоколИзменений(ЭтотОбъект);
	
	КонецЕсли; 

КонецПроцедуры


Процедура ПриУстановкеНовогоКода(СтандартнаяОбработка, Префикс)
	Префикс = ПолучитьПрефиксНомера();
КонецПроцедуры




