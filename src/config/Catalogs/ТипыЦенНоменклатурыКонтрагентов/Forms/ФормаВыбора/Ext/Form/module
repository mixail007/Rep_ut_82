
Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	Если РежимВыбора И ЗначениеНеЗаполнено(Отбор.Владелец.Значение) И ЗначениеНеЗаполнено(ПараметрОтборПоВладельцу) Тогда
		ФормаВыбораВладельца = Справочники.Контрагенты.ПолучитьФормуВыбора();
		ФормаВыбораВладельца.Заголовок = "Выберите Контрагента, типы цен которого Вы хотите выбирать.";
		Контрагент = ФормаВыбораВладельца.ОткрытьМодально();
		Если ТипЗнч(Контрагент) = ТипЗнч(Отбор.Владелец.Значение) Тогда
			Отбор.Владелец.Значение = Контрагент;
		КонецЕсли;
		Если НЕ ЗначениеНеЗаполнено(Отбор.Владелец.Значение) Тогда
			Отбор.Владелец.Использование = Истина;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриОткрытии()
	Если Константы.ИспользоватьОграниченияСписковВыбора.Получить() Тогда
		УстановитьОтборВСправочникКонтрагенты(Отбор, ЭлементыФормы.СправочникСписок);
	КонецЕсли;
КонецПроцедуры
