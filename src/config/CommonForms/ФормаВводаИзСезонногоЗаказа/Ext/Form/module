
Процедура ОсновныеДействияФормыДействиеОК(Кнопка)
	Если Полностью Тогда
	    СтруктураВыбора = Новый Структура ("Полностью", Истина);
	ИначеЕсли ВидОстатков = 0 ИЛИ ВидОстатков = 1 Тогда
		СтруктураВыбора = Новый Структура ("ВидСклада,ВидОстатков,СУчетомАналогов,Полностью", ВидСклада,ВидОстатков,СУчетомАналогов,Ложь);
	ИначеЕсли ВидОстатков = 2 ИЛИ ВидОстатков = 3 ИЛИ ВидОстатков = 4 Тогда
		СтруктураВыбора = Новый Структура ("ВидСклада,ВидОстатков,ДатаНач,ДатаКон,СУчетомАналогов,Полностью", ВидСклада,ВидОстатков,ДатаНач,ДатаКон,СУчетомАналогов,Ложь);
	ИначеЕсли ВидОстатков = 5 Тогда
		СтруктураВыбора = Новый Структура ("ВидСклада,ВидОстатков,ДатаНач,ДатаКон,ДатаПланПрихода,СУчетомАналогов,Полностью", ВидСклада,ВидОстатков,ДатаНач,ДатаКон,ДатаПланПрихода,СУчетомАналогов,Ложь);
	КонецЕсли;
	
	Закрыть (СтруктураВыбора);
	
КонецПроцедуры

Процедура ПоОстаткамРДПриИзменении(Элемент)
	
	Если ВидСклада>0 тогда
		
		ВидОстатков = ?(ВидОстатков=2 , 1, ВидОстатков); // 2 не может быть
		
		ЭлементыФормы.ПоПриходу.Доступность=Ложь;
		ЭлементыФормы.ДатаНач.Видимость = ложь;
		ЭлементыФормы.ДатаКон.Видимость = ложь;
		ЭлементыФормы.ДатаПо.Видимость  = ложь;
		ЭлементыФормы.КнопкаВыбораПериода.Видимость = ложь;
		
	Иначе
		
		ЭлементыФормы.ПоПриходу.Доступность=Истина;
					
		Если ВидОстатков=2 тогда
			ЭлементыФормы.ДатаНач.Видимость = истина;
			ЭлементыФормы.ДатаКон.Видимость = истина;
			ЭлементыФормы.ДатаПо.Видимость  = истина;
			ЭлементыФормы.КнопкаВыбораПериода.Видимость = истина;
		Иначе	
			ЭлементыФормы.ДатаНач.Видимость = ложь;
			ЭлементыФормы.ДатаКон.Видимость = ложь;
			ЭлементыФормы.ДатаПо.Видимость  = ложь;
			ЭлементыФормы.КнопкаВыбораПериода.Видимость = ложь;
		КонецЕсли;
		
		//***2016.02.19
		Если ВидОстатков=3 Тогда
			ДатаПланПрихода = ТекущаяДата()+14*86400;
			ЭлементыФормы.ДатаПланПрихода.Доступность = Ложь;
		ИначеЕсли ВидОстатков=4 Тогда 
			ДатаПланПрихода = ТекущаяДата()+45*86400;
			ЭлементыФормы.ДатаПланПрихода.Доступность = Ложь;
		ИначеЕсли ВидОстатков=5 тогда
			ЭлементыФормы.ДатаПланПрихода.Доступность = Истина;
		Иначе	
			ЭлементыФормы.ДатаПланПрихода.Доступность = Ложь;
		КонецЕсли;
		//***
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ВыбПериодНажатие(Элемент)
	
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(ДатаНач, ?(ДатаКон='0001-01-01', ДатаКон, КонецДня(ДатаКон)));
	Если НастройкаПериода.Редактировать() Тогда
		ДатаНач = НастройкаПериода.ПолучитьДатуНачала();
		ДатаКон = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
	
КонецПроцедуры


Процедура ПриОткрытии()
	
	ДатаНач = НачалоДня(ТекущаяДата()); //  сегодня 4-ий день прихода...
	ДатаКон = КонецДня(ТекущаяДата())  + 2 * 86400;//  +2 дня вперед... на выходные
	СУчетомАналогов = Истина;
	
	ЭлементыФормы.ДатаПланПрихода.Доступность = Ложь;
	
КонецПроцедуры

