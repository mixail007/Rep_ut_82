
Процедура ОсновныеДействияФормыЗаписать(Кнопка)
Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход = Справочники.Номенклатура.НайтиПоНаименованию("Таможня, НДС",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"));
Запись.Значение = таможня;
Запись.Записать(Истина);

Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход =Справочники.Номенклатура.НайтиПоНаименованию("Таможенная пошлина",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"));
Запись.Значение = пошлина;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход =Справочники.Номенклатура.НайтиПоНаименованию("Фрахт",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44")); //Фрахт
Запись.Значение = фрахт;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход =Справочники.Номенклатура.НайтиПоНаименованию("Брокерские услуги",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"));
Запись.Значение = брокерскиеУслуги;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход = Справочники.Номенклатура.НайтиПоНаименованию("Автодоставка",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"));
Запись.Значение = Автодоставка;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход = Справочники.Номенклатура.НайтиПоНаименованию("Автодоставка (до границы)",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"));
Запись.Значение = АвтодоставкаГраница;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход = "Комиссия";
Запись.Значение = Комиссия;
Запись.Записать(Истина);


Запись = РегистрыСведений.КонтрольДопРасходов.СоздатьМенеджерЗаписи();
Запись.Период = Период;
Запись.ДопРасход = "Прочие";
Запись.Значение = Прочее;
Запись.Записать(Истина);


КонецПроцедуры

Процедура ПериодПриИзменении(Элемент)
	Заполнить(Период);
КонецПроцедуры

Процедура Заполнить(Период)
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	КонтрольДопРасходовСрезПоследних.ДопРасход,
	|	КонтрольДопРасходовСрезПоследних.Значение
	|ИЗ
	|	РегистрСведений.КонтрольДопРасходов.СрезПоследних(&Период, ) КАК КонтрольДопРасходовСрезПоследних";
	
	Запрос.УстановитьПараметр("Период", Период);
	
	Результат = Запрос.Выполнить();
	
	Выборка = Результат.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		Если выборка.допРасход=Справочники.Номенклатура.НайтиПоНаименованию("Таможня, НДС",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда
			таможня = Выборка.Значение ;
		конецЕсли;
		Если выборка.допРасход=Справочники.Номенклатура.НайтиПоНаименованию("Таможенная пошлина",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда
			пошлина= Выборка.Значение ;
		конецЕсли;
		
		Если выборка.допРасход=Справочники.Номенклатура.НайтиПоНаименованию("Фрахт",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда 
			фрахт = Выборка.Значение ;
		конецЕсли;
		
		Если выборка.допРасход=Справочники.Номенклатура.НайтиПоНаименованию("Брокерские услуги",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда
			брокерскиеУслуги= Выборка.Значение;
		КонецЕсли;
		
		Если выборка.допРасход= Справочники.Номенклатура.НайтиПоНаименованию("Автодоставка",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда
			Автодоставка= Выборка.Значение;
		КонецЕсли;
		
		Если выборка.допРасход= Справочники.Номенклатура.НайтиПоНаименованию("Автодоставка (до границы)",,Справочники.Номенклатура.НайтиПоНаименованию("Услуги входящие 44"))тогда
			АвтодоставкаГраница = Выборка.Значение ;
		КонецЕсли;
		
		Если выборка.допРасход=  "Комиссия" тогда
			Комиссия =Выборка.Значение ;
		конецЕсли;
		
		Если выборка.допРасход = "Прочие" тогда
			Прочее=Выборка.Значение ;
		конецЕсли;		
	КонецЦикла;
	
	
конецПроцедуры	

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	Период = ТекущаяДата();
	Заполнить(Период);
КонецПроцедуры
