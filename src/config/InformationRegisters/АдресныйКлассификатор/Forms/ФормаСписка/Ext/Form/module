////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ И ЭЛЕМЕНТОВ ФОРМЫ

// Процедура - обработчик события "ЗагрузитьАК" командной панели "ДействияФормы".
//
Процедура ДействияФормыЗагрузитьАК(Кнопка)

	РегистрыСведений.АдресныйКлассификатор.ПолучитьФорму("ФормаЗагрузкиАдресногоКлассификатора").Открыть();

КонецПроцедуры

Процедура СформироватьНадписьФильтаПоТипу()

	СтрокаНадписи = "Отбор:";

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Регионы.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Регионы, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Районы.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Районы, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Города.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Города, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.НасПункты.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Нас. пункты, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Улицы.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Улицы, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Дома.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Дома, ";
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Квартиры.Пометка Тогда
		СтрокаНадписи = СтрокаНадписи + "Квартиры, ";
	КонецЕсли;

	Если Прав(СтрокаНадписи, 2) = ", " Тогда
		СтрокаНадписи = Лев(СтрокаНадписи, СтрДлина(СтрокаНадписи) - 2);
	КонецЕсли;

	ЭлементыФормы.ИнфНадписьОтбора.Заголовок = СтрокаНадписи;
	
КонецПроцедуры

Процедура УстановитьОтборПоТипу()

	СписокОтбора = Новый СписокЗначений;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Регионы.Пометка Тогда
		СписокОтбора.Добавить(1);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Районы.Пометка Тогда
		СписокОтбора.Добавить(2);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Города.Пометка Тогда
		СписокОтбора.Добавить(3);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.НасПункты.Пометка Тогда
		СписокОтбора.Добавить(4);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Улицы.Пометка Тогда
		СписокОтбора.Добавить(5);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Дома.Пометка Тогда
		СписокОтбора.Добавить(6);
	КонецЕсли;

	Если ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Квартиры.Пометка Тогда
		СписокОтбора.Добавить(7);
	КонецЕсли;

	Если (СписокОтбора.Количество() > 0) И (СписокОтбора.Количество() < 7) Тогда
		РегистрСведенийСписок.Отбор.ТипАдресногоЭлемента.Использование = Истина;
		РегистрСведенийСписок.Отбор.ТипАдресногоЭлемента.ВидСравнения = ВидСравнения.ВСписке;
		РегистрСведенийСписок.Отбор.ТипАдресногоЭлемента.Значение = СписокОтбора;

	Иначе
		РегистрСведенийСписок.Отбор.ТипАдресногоЭлемента.Использование = Ложь;

	КонецЕсли;
	
	СформироватьНадписьФильтаПоТипу();

КонецПроцедуры

Процедура ОбновлениеОтображения()

	СформироватьНадписьФильтаПоТипу();

КонецПроцедуры

Процедура ПриОткрытии()

	УстановитьОтборПоТипу();

КонецПроцедуры


// отбор

Процедура ДействияФормыРегионы(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Регионы.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Регионы.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыРайоны(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Районы.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Районы.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыГорода(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Города.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Города.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыНасПункты(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.НасПункты.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.НасПункты.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыУлицы(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Улицы.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Улицы.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыДома(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Дома.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Дома.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыКвартиры(Кнопка)
	
	ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Квартиры.Пометка = НЕ ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки.Квартиры.Пометка;
	УстановитьОтборПоТипу();
	
КонецПроцедуры

Процедура ДействияФормыПоказатьВсе(Кнопка)
	
	Для каждого КнопкаОтбора из ЭлементыФормы.ДействияФормы.Кнопки.Отбор.Кнопки Цикл
		КнопкаОтбора.Пометка = Истина;
	КонецЦикла;
	
	УстановитьОтборПоТипу();
	
КонецПроцедуры



