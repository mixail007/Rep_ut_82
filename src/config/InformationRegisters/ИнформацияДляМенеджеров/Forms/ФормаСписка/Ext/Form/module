
Процедура РегистрСведенийСписокПередУдалением(Элемент, Отказ)
	текЗапист = ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные;
	Если текЗапист.Раздел <> 3 
		или НЕ текЗапист.Автор = глТекущийПользователь тогда
		Если не РольДоступна("ПравоЗавершенияРаботыПользователей") тогда
			Предупреждение("Вы не можете удалить запись другого пользователя!", 10);
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если не РольДоступна("ПравоЗавершенияРаботыПользователей") тогда
		
		РегистрСведенийСписок.Отбор.Автор.видСравнения = видСравнения.Равно;
		РегистрСведенийСписок.Отбор.Автор.Значение     = глТекущийПользователь;
		РегистрСведенийСписок.Отбор.Автор.Использование= истина;
		
		ЭлементыФормы.РегистрСведенийСписок.НастройкаОтбора["Автор"].Доступность = Ложь;
		
	КонецЕсли;
	
КонецПроцедуры
