Перем мСтруктурнаяЕдиница;
Перем мОтветственноеЛицо;

Процедура РегистрСведенийСписокПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)

	Если ОтменаРедактирования Тогда
		Возврат;
	КонецЕсли;

	Если мСтруктурнаяЕдиница <> Элемент.ТекущаяСтрока.СтруктурнаяЕдиница Тогда

		// Оповестим также форму той структурной единицы, данные которого начинали редактировать.
		Оповестить("ОбновитьФорму", Новый Структура("ИмяЭлемента", СокрЛП(Элемент.ТекущаяСтрока.ОтветственноеЛицо)), мСтруктурнаяЕдиница);
		мСтруктурнаяЕдиница = Элемент.ТекущаяСтрока.СтруктурнаяЕдиница;

		// Если еще и тип ответственности поменяли.
		Если мОтветственноеЛицо <> Элемент.ТекущаяСтрока.ОтветственноеЛицо Тогда
			Оповестить("ОбновитьФорму", Новый Структура("ИмяЭлемента", СокрЛП(мОтветственноеЛицо)), мСтруктурнаяЕдиница);
			мОтветственноеЛицо = Элемент.ТекущаяСтрока.ОтветственноеЛицо;
		КонецЕсли;
	Иначе

		Оповестить("ОбновитьФорму", Новый Структура("ИмяЭлемента", СокрЛП(Элемент.ТекущаяСтрока.ОтветственноеЛицо)), Элемент.ТекущаяСтрока.СтруктурнаяЕдиница);

		// Если еще и тип ответственности поменяли.
		Если мОтветственноеЛицо <> Элемент.ТекущаяСтрока.ОтветственноеЛицо Тогда
			Оповестить("ОбновитьФорму", Новый Структура("ИмяЭлемента", СокрЛП(мОтветственноеЛицо)), Элемент.ТекущаяСтрока.СтруктурнаяЕдиница);
			мОтветственноеЛицо = Элемент.ТекущаяСтрока.ОтветственноеЛицо;
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

Процедура РегистрСведенийСписокПриНачалеРедактирования(Элемент, НоваяСтрока)

	мСтруктурнаяЕдиница = Элемент.ТекущиеДанные.СтруктурнаяЕдиница;
	мОтветственноеЛицо  = Элемент.ТекущиеДанные.ОтветственноеЛицо;

КонецПроцедуры
