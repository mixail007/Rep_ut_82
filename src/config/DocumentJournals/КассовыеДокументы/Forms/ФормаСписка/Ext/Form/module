	
Процедура ОрганизацияПриИзменении(Элемент)
		
	Если Не Элемент.Значение=Неопределено Тогда
		Отбор.Организация.Использование=Истина;
	Иначе
		Отбор.Организация.Использование=Ложь;
	КонецЕсли;
	
КонецПроцедуры

Процедура КассаПриИзменении(Элемент)
		
	Если Не Элемент.Значение=Неопределено Тогда
		Отбор.Касса.Использование=Истина;
	Иначе
		Отбор.Касса.Использование=Ложь;
	КонецЕсли;;
	
КонецПроцедуры

Процедура КассаОчистка(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка=Ложь;
	Элемент.Значение=Справочники.Кассы.ПустаяСсылка();
	Отбор.Касса.Использование=Ложь;
	
КонецПроцедуры

Процедура ОрганизацияОчистка(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка=Ложь;
	Элемент.Значение=Справочники.Организации.ПустаяСсылка();
	Отбор.Организация.Использование=Ложь;
		
КонецПроцедуры

Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)
	
	Если ЭлементыФормы.ЖурналДокументовСписок.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	НапечататьДвиженияДокумента(ЭлементыФормы.ЖурналДокументовСписок.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.ЖурналДокументовСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	ФормаСтруктурыПодчиненности = ПолучитьОбщуюФорму("ФормаСтруктурыПодчиненности", ЭтаФорма);
	Если ФормаСтруктурыПодчиненности.Открыта() Тогда
		ФормаСтруктурыПодчиненности.Закрыть();
	КонецЕсли;
	ФормаСтруктурыПодчиненности.ДокументСсылка = ЭлементыФормы.ЖурналДокументовСписок.ТекущиеДанные.Ссылка;
	ФормаСтруктурыПодчиненности.Открыть();
	
КонецПроцедуры

Процедура ДействияФормыДействиеПечать(Кнопка)
	
	Если ЭлементыФормы.ЖурналДокументовСписок.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	НапечататьДокументИзФормыСписка(ЭлементыФормы.ЖурналДокументовСписок.ТекущаяСтрока.ПолучитьОбъект());
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	// Вставить содержимое обработчика.
	РазрешитьОткрыватьЖУрнал = ПолучитьЗначениеПоУмолчанию(глТекущийПользователь,"РазрешитьОткрыватьКассовыеДокументы");
	Если не(РазрешитьОткрыватьЖУрнал) Тогда
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

Процедура ПриОткрытии()
	
	УстановитьОтборВЖурналеДокументов(ЖурналДокументовСписок.Отбор, ЭлементыФормы.ЖурналДокументовСписок);	
	
	//***2015.08.10
	СписокКассПользователя = получитьСписокРазрешенныхОбъектовПользователя(ПараметрыСеанса.ТекущийПользователь, "Кассы"); 
	Если СписокКассПользователя.Количество() > 0 тогда 
		Отбор["Касса"].ВидСравнения = ВидСравнения.ВСписке;
		Отбор["Касса"].Значение = СписокКассПользователя;
		Отбор["Касса"].Использование = Истина;
		ЭлементыФормы.ЖурналДокументовСписок.НастройкаОтбора["Касса"].Доступность = Ложь;
		ЭлементыФормы.ЖурналДокументовСписок.НастройкаОтбора["Касса"].Доступность = Ложь;
		ЭлементыФормы.Флажок2.Доступность = Ложь;
		ЭлементыФормы.Касса.Доступность = Ложь;
	КонецЕсли;
	
КонецПроцедуры




