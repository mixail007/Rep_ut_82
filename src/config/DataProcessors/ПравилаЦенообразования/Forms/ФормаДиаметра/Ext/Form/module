 
Процедура ОсновныеДействияФормыВыполнить(Кнопка)
	рез = "";
	Если д1>0 и д2>0 тогда
		Если Д1=Д2 тогда
			рез = Д1;
		ИначеЕсли Д1>Д2 тогда
			Если д2<5 тогда // 13 минимальный диаметр
				рез = ">="+строка(Д1);
			Иначе	
				рез = строка(Д2)+"-"+строка(Д1);
			КонецЕсли;	
		Иначе	
			Если д1<5 тогда // 13 минимальный диаметр
				рез = "<="+строка(Д2);
			Иначе	
				рез = строка(Д1)+"-"+строка(Д2);
			КонецЕсли;	
		КонецЕсли;
	иначеЕсли д1>0 тогда
		рез = ">="+строка(Д1);
	иначеЕсли д2>0 тогда
		рез = "<="+строка(Д2);
	// иначе ""  //без учета диаметра!
	КонецЕсли;	 
	
	Закрыть(рез);
	
КонецПроцедуры


Процедура ПриОткрытии()
	
	Если ЭтаФорма.Диаметр<>"" тогда
		
		Если найти(ЭтаФорма.Диаметр,"-")>0 тогда
		Д1 = число( лев(ЭтаФорма.Диаметр, найти(ЭтаФорма.Диаметр,"-")-1) );
		Д2 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр) - найти(ЭтаФорма.Диаметр,"-")) );
		иначеЕсли Лев(ЭтаФорма.Диаметр,2)=">=" тогда
			Д1 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр)-2) );
		иначеЕсли Лев(ЭтаФорма.Диаметр,2)="<=" тогда
			Д2 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр)-2) );
		//------------------чисто < или  > ------------------------------------	
		иначеЕсли Лев(ЭтаФорма.Диаметр,1)=">" тогда
			Д1 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр)-1) )+1; //>= на 1 больше
		иначеЕсли Лев(ЭтаФорма.Диаметр,1)="<" тогда
			Д2 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр)-1) )-1; //<= на 1 меньше
		иначеЕсли Лев(ЭтаФорма.Диаметр,1)="=" тогда
			Д1 = число( прав(ЭтаФорма.Диаметр, стрДлина(ЭтаФорма.Диаметр)-1) ); //>= на 1 больше
			Д2 = Д1;
		иначе // чистое число
			попытка
				Д1 = число( ЭтаФорма.Диаметр ); //<= на 1 меньше
				Д2 = Д1;
			исключение
				Предупреждение("Строка '"+ЭтаФорма.Диаметр+"' - не является числом!",10);
			конецПопытки;	
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

