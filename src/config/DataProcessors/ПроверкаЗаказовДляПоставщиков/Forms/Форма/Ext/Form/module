
Процедура КнопкаВыполнитьНажатие(Кнопка)
	
	Если Флажок1 тогда
		яштПоставщики.НовЛайнПолучениеОстатков(Флажок8, КонПериода);	
	КонецЕсли;
	
	Если Флажок5 тогда
		яштПоставщики.НовЛайнЗагрузкаЦен();
	КонецЕсли;
	
	
	Если Флажок3 тогда
		яштПоставщики.ПауэрЗагрузкаОстатков();	
	КонецЕсли;
	
	Если Флажок4 тогда
		яштПоставщики.ПауэрЗагрузкаНоменклатурыЦен();	
	КонецЕсли;
	
	Если Флажок9 тогда//+++ 20.11.2014
		яштПоставщики.АйсАвтоЗагрузкаЦенИОстатков();
	КонецЕсли;
	
	//ВСЕ сразу из регистра!
	Если Флажок6 или Флажок2 тогда	
		
		Пауэр      = Справочники.Контрагенты.НайтиПоРеквизиту("ИНН", "7703247653");
    ТестовыйЗаказ  = ЛОЖЬ;  //сразу нормальный заказ
	   
	//+++---------------анализируем по всем поставщикам------------------
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	СрокиДоставки.Поставщик,
	               |	СрокиДоставки.СрокДоставки КАК СрокДоставки
	               |ИЗ
	               |	РегистрСведений.СрокиДоставки КАК СрокиДоставки
	               |ГДЕ
	               |	НЕ СрокиДоставки.ОТХ
	               |
	               |УПОРЯДОЧИТЬ ПО
	               |	СрокДоставки
	               |АВТОУПОРЯДОЧИВАНИЕ";
	Результат = Запрос.Выполнить();
	ВыборкаПоставщиков = Результат.Выбрать();

   ТестовыйЗаказ = ЛОЖЬ;
	Пока ВыборкаПоставщиков.Следующий() Цикл
		
		//+++ Проверяются Заказы покупателей и создаются заказы поставщикам в Пауэр и у Нас в Базе!
		Если ВыборкаПоставщиков.поставщик = Пауэр и Флажок2 тогда  
	     	яштПоставщики.ПауэрПроверкаЗаказовПокупателей(НачПериода, КонПериода, ТестовыйЗаказ); 
		ИначеЕсли Флажок6 тогда	
			яштПоставщики.НовлайнПроверкаЗаказовПокупателей(НачПериода, КонПериода, ВыборкаПоставщиков.Поставщик); 
		КонецЕсли;
		
	КонецЦикла;

	//// ТОЛЬКО Пауэр	за период
	//ИначеЕсли Флажок2 и не Флажок6 тогда	
	//	яштПоставщики.ПауэрПроверкаЗаказовПокупателей(НачПериода, КонПериода);	
	КонецЕсли;
	
	
	Если Флажок7 тогда	
		яштПоставщики.ПауэрПроверкаСтатусовЗаказовПокупателей();
	КонецЕсли;
		
КонецПроцедуры

Процедура ВыбПериодНажатие(Элемент)
	НастройкаПериода = Новый НастройкаПериода;
	НастройкаПериода.РедактироватьКакИнтервал = Истина;
	НастройкаПериода.РедактироватьКакПериод = Истина;
	НастройкаПериода.ВариантНастройки = ВариантНастройкиПериода.Период;
	НастройкаПериода.УстановитьПериод(НачПериода, ?(КонПериода='0001-01-01', КонПериода, КонецДня(КонПериода)));
	Если НастройкаПериода.Редактировать() Тогда
		НачПериода = НастройкаПериода.ПолучитьДатуНачала();
		КонПериода = НастройкаПериода.ПолучитьДатуОкончания();
	КонецЕсли;
КонецПроцедуры

Процедура ПриОткрытии()
	НачПериода = НачалоДня(ТекущаяДата());
	КонПериода = ТекущаяДата();
КонецПроцедуры
