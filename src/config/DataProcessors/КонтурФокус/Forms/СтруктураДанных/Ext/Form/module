
Процедура ЗаполнитьСтрокиДерева(Значение,ТекущаяСтрока)
	
	ТипЗначения = ТипЗнч(Значение);
	
	Если ТипЗначения = Тип("Структура") Тогда
		
		Для Каждого Эл Из Значение Цикл
			НоваяСтрока = ТекущаяСтрока.Строки.Добавить();
			НоваяСтрока.Имя = Эл.Ключ;
			
			ЗаполнитьСтрокиДерева(Эл.Значение,НоваяСтрока);
		КонецЦикла;
		
	ИначеЕсли ТипЗначения = Тип("Массив") Тогда
		
		сч = 0;
		
		Для Каждого Стр Из Значение Цикл
			
			НоваяСтрока = ТекущаяСтрока.Строки.Добавить();
			НоваяСтрока.Имя = "Строка ["+сч+"]";
			
			ЗаполнитьСтрокиДерева(Стр,НоваяСтрока);			
			
			сч = сч+1;
			
		КонецЦикла;
		
	Иначе
		
		ТекущаяСтрока.Значение = Значение;
		
	КонецЕсли;	
		
КонецПроцедуры

Процедура ПриОткрытии()
	
	ДеревоДанных.Строки.Очистить();
	
	ЗаполнитьСтрокиДерева(СтруктураДанных,ДеревоДанных);	
	
	Если ЗначениеЗаполнено(ИмяЗаголовка) Тогда
		ЭтаФорма.Заголовок = ИмяЗаголовка;
	КонецЕсли;
	
КонецПроцедуры

//Процедура ДобавитьРеквизитыСтруктурыВДерево(Структура,СтрокиДерева)
//	
//	Для Каждого ЭлементСтруктуры Из Структура Цикл
//		
//		НоваяСтрокаДерева = СтрокиДерева.Добавить();
//		НоваяСтрокаДерева.Имя = ЭлементСтруктуры.Ключ;
//		
//		Если ТипЗнч(ЭлементСтруктуры.Значение)=Тип("ТаблицаЗначений") Тогда
//			НоваяСтрокаДерева.Множественный = Истина;
//			СтруктураКолонок = Новый Структура;
//			Для Каждого Колонка Из ЭлементСтруктуры.Значение.Колонки Цикл
//				СтруктураКолонок.Вставить(Колонка.Имя);
//			КонецЦикла;
//			ДобавитьРеквизитыСтруктурыВДерево(СтруктураКолонок,НоваяСтрокаДерева.Строки);
//			
//		ИначеЕсли ТипЗнч(ЭлементСтруктуры.Значение)=Тип("Структура") Тогда
//			ДобавитьРеквизитыСтруктурыВДерево(ЭлементСтруктуры.Значение,НоваяСтрокаДерева.Строки);
//		КонецЕсли;
//		
//	КонецЦикла;
//	
//КонецПроцедуры

