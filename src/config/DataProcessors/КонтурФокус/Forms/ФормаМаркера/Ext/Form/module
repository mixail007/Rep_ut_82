Процедура ОсновныеДействияФормыОсновныеДействияФормыЗаписатьИЗакрыть(Кнопка)
	
	Если ЭтаФорма.Модифицированность Тогда
		
		СтруктураМаркера = Новый Структура;
		СтруктураМаркера.Вставить("ID", ID);
		СтруктураМаркера.Вставить("Наименование", Наименование);
		СтруктураМаркера.Вставить("Включен",Включен);
		СтруктураМаркера.Вставить("Описание", Описание);
		СтруктураМаркера.Вставить("Категория", Категория);
		СтруктураМаркера.Вставить("КодМаркера", ЭлементыФормы.ТекстКодаМаркера.ПолучитьТекст());
		
		Оповестить("Фокус_ИзмененМаркер",СтруктураМаркера);
		
	КонецЕсли;
	
	ЭтаФорма.Закрыть();		
	
КонецПроцедуры

Функция ПолучитьСписокВозможныхКатегорий()
	
	СписокКатегорий = Новый СписокЗначений;
	
	СписокКатегорий.Добавить("Красный");
	СписокКатегорий.Добавить("Желтый");
	СписокКатегорий.Добавить("Зеленый");
	СписокКатегорий.Добавить("Нейтральный");

	Возврат СписокКатегорий;
	
КонецФункции

Процедура ПриОткрытии()
	
	ЭлементыФормы.Категория.СписокВыбора = ПолучитьСписокВозможныхКатегорий();
	
	Если НЕ ЗначениеЗаполнено(ID) Тогда
		ID = Новый УникальныйИдентификатор;
	КонецЕсли;	
		
КонецПроцедуры