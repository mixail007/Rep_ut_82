//  Процедура печатает выбранный документ 
// Печатается та форма, которая была отпечатана при нажатии в документе кнопки
// печати по умолчанию
//
Процедура ДействияФормыДействиеПечать(Кнопка)

	Если ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	НапечататьДокументИзФормыСписка(ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока.ПолучитьОбъект());

КонецПроцедуры // ДействиеПечать()

// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)

	Если ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	НапечататьДвиженияДокумента(ЭлементыФормы.Список.ТекущиеДанные.Ссылка);

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

Процедура ПриОткрытии()
	
	Если ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "УчетТолькоПоПодразделениюПользователя") Тогда
		
		//+++ 01.06.2015 - отбор общий как во всех документах!		
		УстановитьОтборВЖурналеДокументов(ДокументСписок.Отбор, ЭлементыФормы.Список);
		
		Возврат; //+++ 15.07.2013 - больше никаких отборов
	КонецЕсли;

	ВалютаРегламентированногоУчета         = Константы.ВалютаРегламентированногоУчета.Получить();
	КолонкиФормы                           = ЭлементыФормы.Список.Колонки;
	КолонкиФормы.СуммаДокумента.ТекстШапки = "Сумма (" + ВалютаРегламентированногоУчета + ")";
	
	//ЭлементыФормы.Список.Колонки.Контрагент.Видимость = Константы.ИспользоватьМеханизмПродажиЧерезЧП.Получить();
	//ЭлементыФормы.Список.Колонки.Контрагент.ИзменятьНастройку = Константы.ИспользоватьМеханизмПродажиЧерезЧП.Получить();

	//Если Константы.ИспользоватьМеханизмПродажиЧерезЧП.Получить() Тогда
	//	
	//	ЭлементыФормы.ДействияФормы.Кнопки.ЗагрузитьДокументы.Доступность = ?(Константы.ПродажиЧерезЧППолучатель.Получить(), Истина, Ложь);	
	//	
	//Иначе 
		
		ЭлементыФормы.ДействияФормы.Кнопки.ЗагрузитьДокументы.Доступность = Ложь;
		
	//КонецЕсли; 

	
КонецПроцедуры

// Процедура вызывается при выборе пункта подменю "Структура подчиненности" меню "Перейти".
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.Список.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	ПоказатьСтруктуруПодчиненностиДокумента(ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока);
	
КонецПроцедуры

Процедура ДействияФормыЗагрузитьДокументы(Кнопка)
	
	ОписаниеОшибки = "";
	Успех = Ложь;
	//ЗагрузитьДанныеПоОтгрузкамНаЧП(Успех, ОписаниеОшибки);
	
	Если НЕ Успех Тогда
		
	    Сообщить("Ошибка загрузки!", СтатусСообщения.Важное);
		Сообщить(ОписаниеОшибки, СтатусСообщения.Важное);
		Возврат;
	
	КонецЕсли; 
	
	
КонецПроцедуры
