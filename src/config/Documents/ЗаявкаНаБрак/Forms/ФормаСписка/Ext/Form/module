
Процедура ПриОткрытии()
	// Вставить содержимое обработчика.
	УстановитьФильтрНаШиныДиски();
	
	//+++Шарафутдинов 15.05.2018 хотя бы при одной настройке, по идее все настройки надо бы обрабатывать...
	
	Если ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ИспользоватьОтбор") Тогда  		
		
		Если (ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ЖурналыОтборПоРегиону")) Тогда
			
			СписокКонтрагентовМенеджера = ПолучитьСписокКонтрагентовМенеджераПоРегиону(ПараметрыСеанса.ТекущийПользователь);
			Если ДокументСписок.Отбор.Найти("Контрагент") = Неопределено Тогда 
				ДокументСписок.Отбор.Добавить("Контрагент");
			КонецЕсли;
			ДокументСписок.Отбор["Контрагент"].Использование = Истина;
			ДокументСписок.Отбор["Контрагент"].ВидСравнения = ВидСравнения.ВСписке;
			ДокументСписок.Отбор["Контрагент"].Значение = СписокКонтрагентовМенеджера;
			ЭлементыФормы.ДокументСписок.НастройкаОтбора["Контрагент"].Доступность = Ложь;  	
			
		КонецЕсли;
	КонецЕсли;
	
	//---Шарафутдинов 15.05.2018

	
КонецПроцедуры

Процедура УстановитьФильтрНаШиныДиски()
	
	
	Если глТекущийПользователь=Справочники.Пользователи.НайтиПоНаименованию("Ульянов С.") Тогда 
		// Только НЕ ШИНЫ
		ОтборПоСписку = ДокументСписок.Отбор;
		ОтборПоТипу = ОтборПоСписку.ВидТовара;
		ОтборПоТипу.Использование = Истина;
		ОтборПоТипу.Значение = Перечисления.ВидыТоваров.Шины; 
		ОтборПоТипу.ВидСравнения = ВидСравнения.НеРавно;
	ИначеЕсли (глТекущийПользователь=Справочники.Пользователи.НайтиПоНаименованию("Виноградов") или (глТекущийПользователь=Справочники.Пользователи.НайтиПоНаименованию("Левченко Фёдор Сергеевич")) или (глТекущийПользователь=Справочники.Пользователи.НайтиПоНаименованию("Куртов К.Д."))) тогда
		// Только ШИНЫ
		ОтборПоСписку = ДокументСписок.Отбор;
		ОтборПоТипу = ОтборПоСписку.ВидТовара;
		ОтборПоТипу.Использование = Истина;
		ОтборПоТипу.Значение = Перечисления.ВидыТоваров.Шины; 
		ОтборПоТипу.ВидСравнения = ВидСравнения.Равно;		
	КонецЕсли;
	
КонецПроцедуры