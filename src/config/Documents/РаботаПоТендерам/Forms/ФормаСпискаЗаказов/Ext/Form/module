
Процедура ЗаказыПриПолученииДанных(Элемент, ОформленияСтрок)
	КолИтог=0;  ВесИтог = 0; СуммаИтог=0; СуммаТрИтог=0;
	для каждого стр1 из ОформленияСтрок цикл
		стрДанные = стр1.ДанныеСтроки;
		если стрДанные=неопределено тогда
			стр1.ячейки.Количество.Значение  = 0;
			стр1.ячейки.Вес.Значение	     = 0;
			стр1.ячейки.Сумма.Значение	     = 0;
			стр1.ячейки.СуммаТр.Значение     = 0;
		иначе	
			кол   = стрДанные.ЗаказПокупателя.Товары.Итог("Количество");
			Вес   = стрДанные.ЗаказПокупателя.Товары.Итог("Вес");
			сум   = стрДанные.ЗаказПокупателя.СуммаДокумента;
			сумТр = стрДанные.ЗаказПокупателя.ТРнал + стрДанные.ЗаказПокупателя.ТРБезНал + стрДанные.ЗаказПокупателя.ТРвЦене;
			
			стр1.ячейки.Количество.Значение  = кол;
			стр1.ячейки.Вес.Значение	     = вес;
			стр1.ячейки.Сумма.Значение	     = сум;
			стр1.ячейки.СуммаТр.Значение	 = сумТр;
			
			КолИтог   = КолИтог+кол;
			ВесИтог   = весИтог+вес;
			СуммаИтог   = СуммаИтог+сум;
			СуммаТрИтог = СуммаТрИтог+сумТр;
		КонецЕсли;
	КонецЦикла;	
	
	ЭлементыФормы.Заказы.Колонки.Количество.текстПодвала  = КолИтог;
	ЭлементыФормы.Заказы.Колонки.Вес.текстПодвала 	 	  = ВесИтог;
	ЭлементыФормы.Заказы.Колонки.Сумма.текстПодвала 	  = СуммаИтог;
	ЭлементыФормы.Заказы.Колонки.СуммаТр.текстПодвала     = СуммаТрИтог;
	
	ЭлементыФормы.СуммаТрИтогНадпись.Заголовок = формат(СуммаТрИтог,"ЧН=0,00")+" руб.";
КонецПроцедуры

Процедура ЗаказыЗаказПокупателяНачалоВыбора(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка = ложь;
	форма1 = документы.ЗаказПокупателя.ПолучитьФормуВыбора(,Элемент,);
	если ЗначениеЗаполнено(Контрагент) тогда
	форма1.ДокументСписок.Отбор.Контрагент.ВидСравнения = ВидСравнения.Равно;
	форма1.ДокументСписок.Отбор.Контрагент.Значение = Контрагент;
	форма1.ДокументСписок.Отбор.Контрагент.Использование = Истина;
	КонецЕсли;
	если ЗначениеЗаполнено(ДоговорКонтрагента) тогда
	форма1.ДокументСписок.Отбор.ДоговорКонтрагента.ВидСравнения = ВидСравнения.Равно;
	форма1.ДокументСписок.Отбор.ДоговорКонтрагента.Значение = ДоговорКонтрагента;
	форма1.ДокументСписок.Отбор.ДоговорКонтрагента.Использование = Истина;
	КонецЕсли;
	форма1.ОткрытьМодально();
	
КонецПроцедуры

Процедура Кнопка1Нажатие(Элемент)
	СуммаТрЗатрат = СуммаТрИтог;
КонецПроцедуры
