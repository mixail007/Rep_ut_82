
Процедура ПриОткрытии()
	Если не РольДоступна("ПолныеПрава")тогда 
		Запрос = Новый Запрос;
		Запрос.Текст = 
		"ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	ДоговорыКонтрагентов.Владелец КАК Контрагент
		|ИЗ
		|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
		|ГДЕ
		|	ДоговорыКонтрагентов.ТипДоговора = ЗНАЧЕНИЕ(Справочник.типыДоговоров.ПеремещениеОТХ)
		|	И ДоговорыКонтрагентов.ОтветственноеЛицо = &ОтветственноеЛицо";
		
		Запрос.УстановитьПараметр("ОтветственноеЛицо", глТекущийПользователь);
		
		Результат = Запрос.Выполнить().Выгрузить();
		
		СписокКонтрагентов  = Результат.ВыгрузитьКолонку("Контрагент");
		список = Новый СписокЗначений;
		Список.ЗагрузитьЗначения(СписокКонтрагентов);
		ДокументСписок.Отбор["Контрагент"].Использование = Истина;
		ДокументСписок.Отбор["Контрагент"].ВидСравнения = ВидСравнения.ВСписке;
		ДокументСписок.Отбор["Контрагент"].Значение = Список;
		ЭлементыФормы.ДокументСписок.НастройкаОтбора["Контрагент"].Доступность = Ложь;
	конецесли;	
КонецПроцедуры
