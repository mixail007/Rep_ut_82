
Процедура РазобратьПоFIFOНажатие(Элемент)
	РазобратьПоFIFO();
КонецПроцедуры

Процедура КоманднаяПанель1ПодобратьПоПродажам(Кнопка)
	ФормаЗаполнения = ПолучитьФорму("ФормаПодбра", ЭтаФорма);
	ФормаЗаполнения.Контрагент=Контрагент;
	ФормаЗаполнения.ДатаПо=ДатаПо;
	ФормаЗаполнения.ДатаС=ДатаС;
	ФормаЗаполнения.Открыть();

КонецПроцедуры


Процедура ОбработкаВыбора(ЗначениеВыбора, Источник)
	Если ТипЗнч(ЗначениеВыбора) = Тип("ТаблицаЗначений") Тогда
		Для каждого стр из ЗначениеВыбора цикл
		     если стр.количество <>0 тогда
				ст = товары.Добавить();
				ст.Номенклатура = стр.номенклатура;
				ст.Количество = стр.количество;
			 конецЕсли;	 
		конецЦикла;
	конецЕсли;	
	
КонецПроцедуры

Процедура СоздатьДокументыНажатие(Элемент)
	Ответственный = глТекущийПользователь;
	СоздатьПакетДокументов();
	Если ДокументыСформированы  тогда
		ЭлементыФормы.СтатусДокумент.Заголовок = "Документы сформированы";
		ЭлементыФормы.СтатусДокумент.ЦветТекста = Webцвета.Зеленый;
		ЭлементыФормы.КоманднаяПанель1.Кнопки.ПодобратьПоПродажам.Доступность = Истина;
		ЭлементыФормы.Товары.ТолькоПросмотр = Истина;
		ЭлементыФормы.ТоварыПоЗаказам.ТолькоПросмотр = истина;
		ЭлементыФормы.СоздатьДокументы.Доступность = Ложь;
	иначе	
		ЭлементыФормы.СтатусДокумент.Заголовок = "Документы не сформированы";
		ЭлементыФормы.СтатусДокумент.ЦветТекста = Webцвета.Красный;
	конецЕсли;		
КонецПроцедуры

Процедура ПриОткрытии()
	Если ДокументыСформированы  тогда
		ЭлементыФормы.СтатусДокумент.Заголовок = "Документы на отгрузку сформированы";
		ЭлементыФормы.СтатусДокумент.ЦветТекста = Webцвета.Зеленый;
		ЭлементыФормы.КоманднаяПанель1.Кнопки.ПодобратьПоПродажам.Доступность = Истина;
		//ЭлементыФормы.Товары.ТолькоПросмотр = Истина;
		//ЭлементыФормы.ТоварыПоЗаказам.ТолькоПросмотр = истина;
		//ЭлементыФормы.СоздатьДокументы.Доступность = Ложь;
	иначе	
		ЭлементыФормы.СтатусДокумент.Заголовок = "Документы на отгрузку не сформированы";
		ЭлементыФормы.СтатусДокумент.ЦветТекста = Webцвета.Красный;
	конецЕсли;	
	Если не Рольдоступна("ПолныеПрава")  тогда
		ЭлементыФормы.Панель1.Страницы.ПоЗаказам.Видимость = Ложь;
		ЭлементыФормы.СоздатьДокументы.Доступность = Ложь;
		ЭлементыФормы.РазобратьПоFIFO.Доступность = Ложь;
	конецЕсли;	
КонецПроцедуры

Процедура ТоварыПриПолученииДанных(Элемент, ОформленияСтрок)
	Для каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		Данныестроки = ОформлениеСтроки.Данныестроки;
		ОформлениеСтроки.Ячейки.Код.Текст = ДанныеСтроки.Номенклатура.Код;
		ОформлениеСтроки.Ячейки.Код.ОтображатьТекст = Истина;
	КонецЦикла;
КонецПроцедуры

Процедура ТоварыПоЗаказамПриПолученииДанных(Элемент, ОформленияСтрок)
	Для каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		Данныестроки = ОформлениеСтроки.Данныестроки;
		ОформлениеСтроки.Ячейки.Код.Текст = ДанныеСтроки.Номенклатура.Код;
		ОформлениеСтроки.Ячейки.Код.ОтображатьТекст = Истина;
	КонецЦикла;

КонецПроцедуры

Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	ПоказатьСтруктуруПодчиненностиДокумента(Ссылка);
КонецПроцедуры

Процедура кнОтправитьДокиНажатие(Элемент)
	//Ответ = Вопрос("Перед отправкой документов необходимо записать документ. 
	//|Записать?", РежимДиалогаВопрос.ДаНет);
	//Если Ответ = КодВозвратаДиалога.Да тогда
	//	Записать();
	//	ОтправитьДоки();
	//КонецЕсли;
КонецПроцедуры



