перем Яр;

Процедура УсловияВидТовараПриИзменении(Элемент)
	текСтр = ЭлементыФормы.Условия.ТекущиеДанные;
	если текСтр <> неопределено тогда
		
	варКод = ВРЕГ( лев(строка(текСтр.ВидТовара),1))+"."+строка(текСтр.НоменклатурнаяГруппа.Код); // = 7 символов!
	
	Если 	  варКод="Д.00026" тогда варКод="Д.Литые"
	ИначеЕсли варКод="Д.00049" тогда варКод="Д.Штамп"
	КонецЕсли;	
	
	текСтр.ВариантКод = варКод;
	
	КонецЕсли;

КонецПроцедуры

Процедура ПриОткрытии()
	
	Если ЭтоНовый() тогда
		Дата = НачалоДня( ТекущаяДата() );
		Ответственный = глТекущийПользователь;
		Подразделение = ?(глТекущийПользователь.ОсновноеПодразделение.ОбособленноеПодразделение, глТекущийПользователь.ОсновноеПодразделение, Яр);
	КонецЕсли;
	
КонецПроцедуры

Процедура КоманднаяПанель2ПоКонтрагентуРезерва(Кнопка)
	Если КонтрагентРезерв.Пустая() тогда
		Предупреждение("Не заполнен Контрагент Резерв!",10);
		возврат;
	КонецЕсли;	
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	Контрагенты.Ссылка как Контрагент
	|ИЗ
	|	Справочник.Контрагенты КАК Контрагенты
	|ГДЕ
	|	Контрагенты.КонтрагентДляРезерваИМ = &КонтрагентДляРезерваИМ";
	Запрос.УстановитьПараметр("КонтрагентДляРезерваИМ", КонтрагентРезерв);

	Результат = Запрос.Выполнить();

	Контрагенты.Очистить();
	Контрагенты.Загрузить(  Результат.Выгрузить() );
 
КонецПроцедуры

Яр = справочники.Подразделения.НайтиПоКоду("00005");