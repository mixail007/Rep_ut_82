перем Яр;

Процедура УсловияВидТовараПриИзменении(Элемент)
	текСтр = ЭлементыФормы.Условия.ТекущиеДанные;
	если текСтр <> неопределено тогда
		
	варКод = ВРЕГ( лев(строка(текСтр.ВидТовара),1))+"."+строка(текСтр.НоменклатурнаяГруппа.Код); // = 7 символов!
	
	Если 	  варКод="Д.00026" тогда варКод="Д.Литые"
	ИначеЕсли варКод="Д.00049" тогда варКод="Д.Штамп"
	КонецЕсли;	
	
	текСтр.ВариантКод = варКод;
	
	КонецЕсли;

КонецПроцедуры

Процедура ПриОткрытии()
	
	Если ЭтоНовый() тогда
		Дата = НачалоДня( ТекущаяДата() );
		Ответственный = глТекущийПользователь;
		Подразделение = ?(глТекущийПользователь.ОсновноеПодразделение.ОбособленноеПодразделение, глТекущийПользователь.ОсновноеПодразделение, Яр);
	КонецЕсли;
	
КонецПроцедуры

Процедура КоманднаяПанель2ПоКонтрагентуРезерва(Кнопка)
	Если КонтрагентРезерв.Пустая() тогда
		Предупреждение("Не заполнен Контрагент Резерв!",10);
		возврат;
	КонецЕсли;	
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	Контрагенты.Ссылка как Контрагент
	|ИЗ
	|	Справочник.Контрагенты КАК Контрагенты
	|ГДЕ
	|	Контрагенты.КонтрагентДляРезерваИМ = &КонтрагентДляРезерваИМ";
	Запрос.УстановитьПараметр("КонтрагентДляРезерваИМ", КонтрагентРезерв);

	Результат = Запрос.Выполнить();

	Контрагенты.Очистить();
	Контрагенты.Загрузить(  Результат.Выгрузить() );
 
КонецПроцедуры

//08.11.2018 - установили новые группы
Процедура КоманднаяПанель2Клиенты11Группы(Кнопка)
	 Запрос = Новый Запрос;
	 Запрос.Текст = "ВЫБРАТЬ
        |	Контрагенты.Наименование,
        |	Контрагенты.Ссылка КАК Контрагент
        |ИЗ
        |	Справочник.Контрагенты КАК Контрагенты
        |ГДЕ
        |	Контрагенты.КатегорияПокупателя = ЗНАЧЕНИЕ(Справочник.КатегорииПокупателей.ИнтернетМагазин)
        |	И Контрагенты.Покупатель
        |	И Контрагенты.ПометкаУдаления = ЛОЖЬ
        |	И Контрагенты.Родитель <> ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
        |	И Контрагенты.Родитель <> ЗНАЧЕНИЕ(Справочник.Контрагенты.КлиентыИМ)
        |	И Контрагенты.Родитель <> &Дубли
        |	И Контрагенты.КонтрагентДляРезерваИМ <> &Контрагент7группы
        |
        |УПОРЯДОЧИТЬ ПО
        |	Контрагенты.Наименование";
					
 Запрос.УстановитьПараметр("Дубли", Справочники.Контрагенты.НайтиПоКоду("90213") );
 Запрос.УстановитьПараметр("Контрагент7группы", Справочники.Контрагенты.НайтиПоКоду("П019157") );
 Результат = Запрос.Выполнить();

	Контрагенты.Очистить();
	Контрагенты.Загрузить(  Результат.Выгрузить() );
 КонецПроцедуры

Яр = справочники.Подразделения.НайтиПоКоду("00005");