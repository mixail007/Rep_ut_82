
Процедура ПриОткрытии()
	
	КоличествоИзПартии = Истина;
	ПерезаполнятьПартией = Ложь;
	
	Для Каждого Стр из СписокДопРасходовВх Цикл
		
		СтрНов 					= СписокДопРасходов.Добавить();
		СтрНов.Документ 		= Стр.Значение;
		СтрНов.Контрагент 		= Стр.Значение.Контрагент;
		СтрНов.Сумма 			= Стр.Значение.Сумма;
		СтрНов.НадоДелать		= Истина;
		
	КонецЦикла;
	
КонецПроцедуры


Процедура ОсновныеДействияФормыВыполнить(Кнопка)
	
	Для Каждого Стр из СписокДопРасходов Цикл
		
		Если (Стр.НадоДелать) Тогда 
			
			Если ПерезаполнятьПартией Тогда
			
				яштПартии.СкорректироватьДопЗатраты(Стр.Документ);
				
			Иначе 
				
				яштПартии.ПерераспределитьДопЗатраты(, Стр.Документ, КоличествоИзПартии);
				
			КонецЕсли; 
			
		КонецЕсли;
		
	КонецЦикла;
	
	Закрыть();	
	
КонецПроцедуры
