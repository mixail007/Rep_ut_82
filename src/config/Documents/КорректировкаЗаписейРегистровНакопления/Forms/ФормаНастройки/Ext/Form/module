
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ УПРАВЛЕНИЯ КОМАНДНОЙ ПАНЕЛИ ФОРМЫ

// Обработчик события элемента ОсновныеДействияФормы.ОК.
// .
Процедура ОсновныеДействияФормыОК(Кнопка)
	
	// Сначала удалим те, у которых сняли флажки
	УдаленныеНаборы = "";
	Для каждого СтрокаТаблицы Из ТЗРегистровНакопления Цикл
		ЭлементСписка = СписокРегистровНакопления.НайтиПоЗначению(СтрокаТаблицы.Имя);
		Если ЭлементСписка = Неопределено Тогда
			УдаленныеНаборы = УдаленныеНаборы + Символы.ПС + " - " + СтрокаТаблицы.Представление;
			Продолжить;
		КонецЕсли; 
		Если НЕ ЭлементСписка.Пометка Тогда
			УдаленныеНаборы = УдаленныеНаборы + Символы.ПС + " - " + СтрокаТаблицы.Представление;
			Продолжить;
		КонецЕсли; 
	КонецЦикла; 
	
	Если Не ПустаяСтрока(УдаленныеНаборы) Тогда
		
		ТекстВопроса = "Наборы записей следующих регистров накопления будут удалены:" + УдаленныеНаборы + Символы.ПС + "Продолжить?";
		
		ОтветНаВопрос = Вопрос(ТекстВопроса, РежимДиалогаВопрос.ДаНет);
		
		Если ОтветНаВопрос <> КодВозвратаДиалога.Да Тогда
			Возврат;
		КонецЕсли; 
	
	КонецЕсли; 
	
	ЭтаФорма.Закрыть(СписокРегистровНакопления.Скопировать());
	
КонецПроцедуры

// Обработчик события элемента ОсновныеДействияФормы.Отмена.
// .
Процедура ОсновныеДействияФормыОтмена(Кнопка)
	
	ЭтаФорма.Закрыть(Неопределено);
	
КонецПроцедуры




