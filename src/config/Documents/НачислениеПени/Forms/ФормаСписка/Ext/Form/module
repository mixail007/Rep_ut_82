
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
		
	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	ПоказатьСтруктуруПодчиненностиДокумента(ЭтаФорма.ЭлементыФормы.ДокументСписок.ТекущаяСтрока);

КонецПроцедуры

Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)
	
	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;

	НапечататьДвиженияДокумента(ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка);

КонецПроцедуры

Процедура ПриОткрытии()
	
	Если ДляМенеджера Тогда
		
		СписокКонтрагентовМенеджера = ПолучитьСписокКонтрагентовМенеджера(глТекущийПользователь);
		
		Если Отбор.Найти("ДокументыПоКонтрагенту") = Неопределено Тогда 
			Отбор.Добавить("ДокументыПоКонтрагенту");
		КонецЕсли;
		
		Отбор["ДокументыПоКонтрагенту"].Использование = Истина;
		Отбор["ДокументыПоКонтрагенту"].ВидСравнения = ВидСравнения.ВСписке;
		Отбор["ДокументыПоКонтрагенту"].Значение = СписокКонтрагентовМенеджера;
		
		ЭлементыФормы.ДокументСписок.НастройкаОтбора["ДокументыПоКонтрагенту"].Доступность = Ложь;
				
	КонецЕсли;

КонецПроцедуры

Процедура ДокументСписокПередУстановкойПометкиУдаления(Элемент, Отказ)
	
	ТекущиеДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	Если ТекущиеДанные.Ссылка.АвтоматическийРасчет Тогда
		Если НЕ РольДоступна("ПравоЗавершенияРаботыПользователей") Тогда //ИТ-отдел			
			Предупреждение("Запрещено удалять документы, созданные автоматически.");
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура ДокументСписокПередОтменойПроведения(Элемент, Отказ)
	
	ТекущиеДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	Если ТекущиеДанные.Ссылка.АвтоматическийРасчет Тогда
		Если НЕ РольДоступна("ПравоЗавершенияРаботыПользователей") Тогда //ИТ-отдел			
			Предупреждение("Запрещено распроводить документы, созданные автоматически.");
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры
