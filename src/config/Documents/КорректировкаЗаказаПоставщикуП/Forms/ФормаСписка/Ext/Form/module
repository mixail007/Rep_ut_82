//  Процедура печатает выбранный документ 
// Печатается та форма, которая была отпечатана при нажатии в документе кнопки
// печати по умолчанию
//
Процедура ДействияФормыДействиеПечать(Кнопка)

	ТекущиеДанные = ЭтаФорма.ЭлементыФормы.ДокументСписок.ТекущиеДанные; 
	Если ТекущиеДанные <> Неопределено тогда
		НапечататьДокументИзФормыСписка(ТекущиеДанные.Ссылка.
		ПолучитьОбъект());
	КонецЕсли;


КонецПроцедуры // ДействиеПечать()

// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)

	ТекущиеДанные = ЭтаФорма.ЭлементыФормы.ДокументСписок.ТекущиеДанные; 
	Если ТекущиеДанные <> Неопределено тогда
		НапечататьДвиженияДокумента(ТекущиеДанные.Ссылка);
	КонецЕсли;

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

// Процедура вызывается при выборе пункта подменю "Структура подчиненности" меню "Перейти".
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	ПоказатьСтруктуруПодчиненностиДокумента(ЭтаФорма.ЭлементыФормы.ДокументСписок.ТекущаяСтрока);
	
КонецПроцедуры

Процедура ДокументСписокПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	Если не(ПолучитьЗначениеПоУмолчанию(глТекущийПользователь,"РазрешитьДобавлятьПоступлениеТоваров")) Тогда
		Предупреждение("Вы не имеете право на прямое добавление документов прихода.");
		Отказ = истина;
	КонецЕсли;
	
КонецПроцедуры


Процедура ПриОткрытии()
	
	УстановитьОтборВЖурналеДокументов(ДокументСписок.Отбор, ЭлементыФормы.ДокументСписок);	
	
	//УстановитьОтборВЖурналеДокументовПоОрганизациям(ДокументСписок.Отбор, ЭлементыФормы.ДокументСписок);

КонецПроцедуры


Процедура ДокументСписокПриПолученииДанных(Элемент, ОформленияСтрок)
	
	Для Каждого Строка Из ОформленияСтрок Цикл     
		
		Строка.Ячейки.Разница.УстановитьТекст(ФорматСумм(Строка.ДанныеСтроки.Ссылка.Товары.Итог("Сумма") - Строка.ДанныеСтроки.Ссылка.Товары.Итог("СуммаДоИзменения")));
		
	КонецЦикла;

КонецПроцедуры

