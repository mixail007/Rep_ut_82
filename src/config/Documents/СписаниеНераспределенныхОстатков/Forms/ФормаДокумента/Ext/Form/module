
Процедура КоманднаяПанель1ПоЗависшимОстаткамПартий(Кнопка)
	
	Если ПартииТоваров.Количество() > 0 Тогда
		
		Если Вопрос("Перед заполнением табличная часть будет очищена! Продолжить?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Нет  Тогда
		
			Возврат;
			
		Иначе
			
			ПартииТоваров.Очистить();
		
		КонецЕсли; 
		
	
	КонецЕсли; 
	
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	ПартииТоваровНаСкладахОстатки.Склад КАК Склад,
	|	ПартииТоваровНаСкладахОстатки.Номенклатура КАК Номенклатура,
	|	ПартииТоваровНаСкладахОстатки.КоличествоОстаток КАК Количество,
	|	ПартииТоваровНаСкладахОстатки.СтоимостьОстаток КАК Стоимость,
	|	ПартииТоваровНаСкладахОстатки.ДокументОприходования КАК ДокументОприходования,
	|	ПартииТоваровНаСкладахОстатки.ХарактеристикаНоменклатуры,
	|	ПартииТоваровНаСкладахОстатки.СерияНоменклатуры,
	|	ПартииТоваровНаСкладахОстатки.СтатусПартии,
	|	ПартииТоваровНаСкладахОстатки.Заказ,
	|	ПартииТоваровНаСкладахОстатки.Качество
	|ИЗ
	|	РегистрНакопления.ПартииТоваровНаСкладах.Остатки(&Дата, ) КАК ПартииТоваровНаСкладахОстатки
	|ГДЕ
	|	ПартииТоваровНаСкладахОстатки.КоличествоОстаток = 0";
	
	Запрос.УстановитьПараметр("Дата", Дата);
	
	ПартииТоваров.Загрузить(Запрос.Выполнить().Выгрузить());	
	
	
КонецПроцедуры

Процедура ДатаПриИзменении(Элемент)
	
	Если ПартииТоваров.Количество() > 0 Тогда
		
		Предупреждение("Внимание! Дата документа изменена. 
					   |Табличная часть будет очищена!", 5);
		
		ПартииТоваров.Очистить();
				
	КонецЕсли; 
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если НЕ ЭтоНовый() Тогда
		
		УстановитьЭлементыИсторииКнопка(Ссылка, ЭтаФорма);
		
	КонецЕсли; 

	
КонецПроцедуры

Процедура ВыводИстории(Элемент)
	
	ВывестиИсторию(Ссылка, ЭтаФорма);
	
КонецПроцедуры
	
	
