// Процедура вызывается при выборе пункта подменю "Структура подчиненности" меню "Перейти".
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	ПоказатьСтруктуруПодчиненностиДокумента(ЭтаФорма.ЭлементыФормы.ДокументСписок.ТекущаяСтрока);
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	УстановитьОтборВЖурналеДокументов(ДокументСписок.Отбор, ЭлементыФормы.ДокументСписок);	
	
	//+++( 26.04.2012
	//установка ограничения видимости помеченных на удаление документов
	ЭлементОтбора =ДокументСписок.Отбор.Найти("ПометкаУдаления");
		Если  ЭлементОтбора = Неопределено Тогда
			ЭлементОтбора = ДокументСписок.Отбор.Добавить("ПометкаУдаления"); // если нет - добавим в список отборов
		КонецЕсли;
		
		//по настройке пользователя !!!
		Если НЕ ПолучитьЗначениеПоУмолчанию(глТекущийПользователь, "ДокументыРазрешитьПросмотрПомеченныхНаУдаление") тогда
			ЭлементОтбора.Установить(Ложь); // установим видимость только НЕудаленных
	    	ЭлементыФормы.ДокументСписок.НастройкаОтбора.ПометкаУдаления.Доступность = ЛОЖЬ;
	 	иначе // можно видеть удаленные элементы
			ЭлементыФормы.ДокументСписок.НастройкаОтбора.ПометкаУдаления.Доступность = Истина;
        КонецЕсли;
	//+++)

КонецПроцедуры

Процедура ДокументСписокПриПолученииДанных(Элемент, ОформленияСтрок)
	
	
	для каждого ОформлениеСтроки из ОформленияСтрок цикл 
		
		ОформлениеСтроки.ячейки.важность.ОтображатьТекст = ложь;
		Если ОформлениеСтроки.ДанныеСтроки.Важность <> Перечисления.Важность.Средняя тогда
		ОформлениеСтроки.ячейки.важность.ОтображатьКартинку = истина;
			Если ОформлениеСтроки.ДанныеСтроки.Важность = Перечисления.Важность.Высокая тогда
			ОформлениеСтроки.ячейки.важность.ИндексКартинки = 0;
			иначеЕсли ОформлениеСтроки.ДанныеСтроки.Важность = Перечисления.Важность.Низкая тогда
			ОформлениеСтроки.ячейки.важность.ИндексКартинки = 1;
			КонецЕсли;
		КонецЕсли;
		
		//+++ 19.10.2015
		Если ОформлениеСтроки.ДанныеСтроки.Контрагент = справочники.Контрагенты.НайтиПоКоду("94143") тогда
			ОформлениеСтроки.ячейки.важность.ОтображатьКартинку = истина;
			ОформлениеСтроки.ячейки.важность.ИндексКартинки = 2;
        КонецЕсли;

		ОформлениеСтроки.ячейки.ВидОперации.ОтображатьТекст = ложь;
		ОформлениеСтроки.ячейки.ВидОперации.ОтображатьКартинку = истина;
		Если ОформлениеСтроки.ДанныеСтроки.ВидОперации = Перечисления.ВидыДвиженийПриходРасход.Приход тогда
			ОформлениеСтроки.ячейки.ВидОперации.ИндексКартинки = 1;
		иначеЕсли ОформлениеСтроки.ДанныеСтроки.ВидОперации = Перечисления.ВидыДвиженийПриходРасход.Расход тогда
			ОформлениеСтроки.ячейки.ВидОперации.ИндексКартинки = 0;
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры
