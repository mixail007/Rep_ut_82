
Процедура ПриОткрытии()
	Если СписокГрупп.Количество()= 0 Тогда
		Запрос = Новый Запрос;
		Запрос.УстановитьПараметр("Кроме",Справочники.ГруппыСкладов.ОсновнойСклад);
		запрос.Текст = "ВЫБРАТЬ
		               |	ЛОЖЬ КАК Флаг,
		               |	ГруппыСкладов.Ссылка КАК Группа
		               |ИЗ
		               |	Справочник.ГруппыСкладов КАК ГруппыСкладов
		               |ГДЕ
		               |	ГруппыСкладов.Транзит = ЛОЖЬ
		               |	И ГруппыСкладов.ПометкаУдаления = ЛОЖЬ
		               |	И ГруппыСкладов.Ссылка <> &Кроме";
					   
		//+++ 20.12.2016 для филиалов по не запрещенныи складам филиала
		Если ЭтотОбъект.Подразделение.ОбособленноеПодразделение тогда
		запрос.Текст = "ВЫБРАТЬ РАЗЛИЧНЫЕ
		               |	ЛОЖЬ КАК Флаг,
		               |	Склады.ГруппаСкладов
		               |ИЗ
		               |	Справочник.Склады КАК Склады
		               |ГДЕ
		               |	Склады.Транзитный
		               |	И Склады.ПометкаУдаления = ЛОЖЬ
		               |	И Склады.ЗапретитьИспользование = ЛОЖЬ
		               |	И Склады.Подразделение = &Подразделение";
		запрос.УстановитьПараметр("Подразделение",ЭтотОбъект.Подразделение);			   
		КонецЕсли;
						   
		Рез = запрос.Выполнить().Выгрузить();
		
		СписокГрупп.Загрузить(Рез);	
	КонецЕсли;
КонецПроцедуры

Процедура ОсновныеДействияФормыОК(Кнопка)
	ЭтаФорма.Модифицированность = Ложь;
	ЭтаФорма.Закрыть();
КонецПроцедуры
