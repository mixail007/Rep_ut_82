Перем Контрагент Экспорт;

Процедура ПриОткрытии()	
	    НаборЗаписей = РегистрыСведений.ПравилаЦенообразования.СоздатьНаборЗаписей();
		НаборЗаписей.Отбор.Контрагент.Установить(Контрагент);
		НаборЗаписей.прочитать();
		Для каждого стр из НаборЗаписей Цикл
			НовСтр = Правила.Добавить();
			ЗаполнитьЗначенияСвойств(НовСтр,Стр);
			НовСтр.флаг = Ложь;	
		КонецЦикла;
КонецПроцедуры

Процедура ПравилаПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	Если ДанныеСтроки.Выключено = Истина Тогда
		ОформлениеСтроки.ЦветФона = Новый Цвет(128, 128, 128);
	КонецЕсли;
	
	Если ДанныеСтроки.Бонус > 0 Тогда
		ОформлениеСтроки.ЦветФона = Новый Цвет(128, 128, 128);
	КонецЕсли;
	
	Если ДанныеСтроки.Флаг = Истина и ДанныеСтроки.Выключено = ложь и ДанныеСтроки.Бонус = 0 Тогда
		ОформлениеСтроки.ЦветФона = WebЦвета.Роса;
	КонецЕсли;
КонецПроцедуры

Процедура ОсновныеДействияФормыПеренести(Кнопка)
	Для каждого стр из Правила Цикл
		Отбор = Новый Структура;
		Отбор.Вставить("Флаг",ИСтина);
		Отбор.Вставить("Выключено",ложь);
		Отбор.Вставить("Бонус",0);
		ТЗ = Правила.Скопировать(Отбор);
	    ЭтаФорма.Закрыть(ТЗ);
	КонецЦикла;
КонецПроцедуры









