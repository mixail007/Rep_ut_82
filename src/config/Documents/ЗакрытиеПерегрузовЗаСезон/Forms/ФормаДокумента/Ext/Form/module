
Процедура КоманднаяПанель1Заполнить(Кнопка)
	
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("ДатаКон", КонецДня(Дата));
	Запрос.УстановитьПараметр("Пустая", Документы.ЗаказПоставщикуСезонный.ПустаяСсылка());
	Запрос.УстановитьПараметр("Контрагент", Контрагент);
	Запрос.Текст = "ВЫБРАТЬ
	               |	ЗаказыПоставщикамСезонныеОстаткиИОбороты.Регистратор.Контрагент,
	               |	ЗаказыПоставщикамСезонныеОстаткиИОбороты.Номенклатура,
	               |	-ЗаказыПоставщикамСезонныеОстаткиИОбороты.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток
	               |ИЗ
	               |	РегистрНакопления.ЗаказыПоставщикамСезонные.ОстаткиИОбороты(, &ДатаКон, Регистратор, , ЗаказПоставщикуСезонный = &Пустая И ЕСТЬNULL(Подразделение.ВЭД, ЛОЖЬ) = ЛОЖЬ) КАК ЗаказыПоставщикамСезонныеОстаткиИОбороты
	               |ГДЕ
	               |	ЗаказыПоставщикамСезонныеОстаткиИОбороты.Регистратор.Контрагент = &Контрагент";
	Результат = Запрос.Выполнить().Выбрать();
	
	Если Результат.Количество() = 0 Тогда
		Сообщить("Для выбранного контрагента на дату документа нет данных о перегрузах без сезонных заказов");
	Иначе
		Пока Результат.Следующий() Цикл
			СтрТовары				 = Товары.Добавить();
			СтрТовары.Номенклатура	 = Результат.Номенклатура;
			СтрТовары.Количество	 = Результат.КоличествоКонечныйОстаток;
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры

Процедура ТоварыПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	ОформлениеСтроки.Ячейки.Код.УстановитьТекст(ДанныеСтроки.Номенклатура.Код);
	
КонецПроцедуры
