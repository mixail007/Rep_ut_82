
Процедура ТоварыПутьКПрограммеПриИзменении(Элемент)
	текСтрока =  Элементыформы.Товары.ТекущиеДанные;
		Если текСтрока.Вес=0 тогда
		Предупреждение("Введите сначала ВЕС диска! Только после ввода Веса - можно выбирать Путь к файлам с программой.", 30);
		текСтрока.ПутьКПрограмме = "";
		возврат;
	КонецЕсли;
	
	Если текСтрока.ПутьКПрограмме<>"" тогда
		спис=найтиФайлы(текСтрока.ПутьКПрограмме,"*.*",Истина);
		Если спис.Количество()=0
			или (спис.Количество()=1 и спис[0].полноеИмя=текСтрока.ПутьКПрограмме) тогда //сама папка тоже файл ?!
			Предупреждение("Нет файлов в выбранной папке!
			|Папку: "+текСтрока.ПутьКПрограмме+"
			|      НЕЛЬЗЯ выбирать !", 30);
			текСтрока.ПутьКПрограмме = "";
		
		иначе //вроде всё хорошо... 
			Если прав(текСтрока.ПутьКПрограмме,7)<>текСтрока.Номенклатура.Код тогда 
				Предупреждение("Имя папки должно совпадать с Кодом товара!
							   |Переименуйте папку и выберите её заново...", 30);
				текСтрока.ПутьКПрограмме = "";
			КонецЕсли;	
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

Процедура ТоварыПутьКПрограммеОткрытие(Элемент, СтандартнаяОбработка)
		СтандартнаяОбработка = ЛОЖЬ;
	 	текСтрока =  Элементыформы.Товары.ТекущиеДанные;

	Если текСтрока.ПутьКПрограмме="" тогда
		Предупреждение("Не выбран путь к файлам с программой!", 10);
		возврат;
	иначе
		диалог = новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
		диалог.Каталог =текСтрока.ПутьКПрограмме;
		диалог.Выбрать();
	КонецЕсли;

КонецПроцедуры

Процедура ТоварыПутьКПрограммеНачалоВыбора(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка = ЛОЖЬ;
	 	текСтрока =  Элементыформы.Товары.ТекущиеДанные;
	Если текСтрока.Вес=0 тогда
		Предупреждение("Введите ВЕС диска!", 10);
		возврат;
	КонецЕсли;
	
	диалог = новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	Диалог.МножественныйВыбор = Ложь; 

	Если текСтрока.ПутьКПрограмме="" тогда
		текСтрока.ПутьКПрограмме = "\\terminal\Vissol\";  //+ Код
	КонецЕсли;		
	диалог.Каталог = текСтрока.ПутьКПрограмме;
	Если диалог.Выбрать() тогда
		текСтрока.ПутьКПрограмме = диалог.Каталог;
	иначе
		текСтрока.ПутьКПрограмме = "";
	КонецЕсли;
	
	ТоварыПутьКПрограммеПриИзменении(Элемент);
	

КонецПроцедуры

Процедура ТоварыНоменклатураПриИзменении(Элемент)
	текСтрока =  Элементыформы.Товары.ТекущиеДанные;
	текСтрока.вес = 0;
	текСтрока.Типоразмер =  текСтрока.номенклатура.Типоразмер;
	текстрока.Модель =  текСтрока.Номенклатура.Модель;
	
	если текСтрока.номенклатура.НоменклатурнаяГруппа <> Справочники.НоменклатурныеГруппы.НайтиПоКоду("00022") тогда
		Сообщить("Выбран не кованный диск!");
		текСтрока.Номенклатура ="";
		текСтрока.Типоразмер =  "";
		текстрока.Модель =  "";
		текстрока.Путькпрограмме =  "";

	конецЕсли;	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	
	
	
	
КонецПроцедуры

Процедура ТоварыПриПолученииДанных(Элемент, ОформленияСтрок)
	Для каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		Данныестроки = ОформлениеСтроки.Данныестроки;
		ОформлениеСтроки.Ячейки.Код.Текст = ДанныеСтроки.Номенклатура.Код;
		ОформлениеСтроки.Ячейки.Код.ОтображатьТекст = Истина;
	КонецЦикла;

КонецПроцедуры
