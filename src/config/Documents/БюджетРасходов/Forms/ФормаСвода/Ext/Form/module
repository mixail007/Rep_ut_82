   перем ДанныеРасшифровки1;


Процедура ОбновитьОтчет()
	
	КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
	ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
	СхемаКомпоновкиДанных1 = Документы.БюджетРасходов.ПолучитьМакет("Свод");
	
	ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.Ответственный;
	ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
	ПараметрСКД.Значение  = Ответсвенный;                                
	
	ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.ПериодПланирования;
	ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
	ПараметрСКД.Значение  = ПериодПланирования;                                
	
	ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.НачалоПериода;
	ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
	ПараметрСКД.Значение  = ПериодПланирования.ДатаНачала;                                
	
	ПараметрСКД = СхемаКомпоновкиДанных1.Параметры.конецПериода;
	ПараметрСКД.Использование = ИспользованиеПараметраКомпоновкиДанных.Всегда;
	ПараметрСКД.Значение  = НачалоМесяца(ПериодПланирования.ДатаКонца);                                
	
	
	
	
	
	
	
	ДанныеРасшифровки1 = Новый ДанныеРасшифровкиКомпоновкиДанных;
	КомпоновщикМакета1 = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки1 = КомпоновщикМакета1.Выполнить(СхемаКомпоновкиДанных1, СхемаКомпоновкиДанных1.НастройкиПоУмолчанию, ДанныеРасшифровки1);
	
	ПроцессорКомпоновкиДанных1 = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновкиДанных1.Инициализировать(МакетКомпоновки1, , ДанныеРасшифровки1,истина);
	ПроцессорВывода1 = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода1.УстановитьДокумент(ЭлементыФормы.Результат);
	ПроцессорВывода1.Вывести(ПроцессорКомпоновкиДанных1);
	
	
	
конецПроцедуры	   
   
   
   Процедура ПриОткрытии()
   	ОбновитьОтчет();
КонецПроцедуры

Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ЭлементРасшифровкиДанных = ДанныеРасшифровки1.Элементы[Расшифровка];
	ЭлементРасшифровкиДанныхПоля = ЭлементРасшифровкиДанных.ПолучитьПоля()[0];
	Запланировал = ЭлементРасшифровкиДанных.ПолучитьРодителей()[0].ПолучитьПоля()[0].Значение;
	Если ТипЗнч(Запланировал) = Тип("СправочникСсылка.Пользователи") Тогда
	Выборка = Документы.ПланированиеЗатрат.Выбрать(,,Новый Структура("ПериодПланирования",ПериодПланирования),);	
	пока Выборка.следующий() цикл
		Если Выборка.Исполнитель = Запланировал тогда
		ДокОбъект = Выборка.ПолучитьОбъект();
		Форма = ДокОбъект.ПолучитьФорму("ФормаДокумента");
	    форма.изменяюСвоиСтатьи = Истина;
	    Форма.Открыть();
	    конецЕсли;
	конецЦикла;
	конецесли;
КонецПроцедуры

Процедура ОсновныеДействияФормыОбновить(Кнопка)
	Элементыформы.Результат.Очистить();
	ОбновитьОтчет();
КонецПроцедуры
